"use strict";(self.webpackChunk_finos_perspective_docs=self.webpackChunk_finos_perspective_docs||[]).push([[280],{7680:function(e,t,n){n.r(t),n.d(t,{main:function(){return c}});var r=n(1092),a=n(8549),o=n(7791),i=(n(9382),n(4469),n(8429),n(1698));function c(e){return s.apply(this,arguments)}function s(){return(s=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,c,s,l,u,f,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=document.querySelectorAll("perspective-viewer:not(.nosuperstore)"),o=(0,a.Z)(n);!(c=o()).done;){for((s=c.value).load(i.SUPERSTORE_TABLE),l={settings:!0,theme:"dark"===t?"Material Dark":"Material Light"},u=(0,a.Z)(s.attributes);!(f=u()).done;)"settings"!==(d=f.value).name&&"theme"!==d.name&&(l[d.name]=JSON.parse(d.nodeValue));s.restore(l)}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},579:function(e,t,n){n.r(t),n.d(t,{default:function(){return s}});var r=n(7294),a=n.n(r),o=n(992),i=n(2949),c=n(412);function s(e){if(c.Z.canUseDOM){var t=n(7680).main,s=(0,i.I)().colorMode;(0,r.useEffect)((function(){t(s)}),[s])}return a().createElement(o.Z,e)}},1698:function(e,t,n){n.r(t),n.d(t,{SUPERSTORE_TABLE:function(){return i}});var r=n(1092),a=n(7791),o=n(1820),i=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.ZP.shared_worker(),e.next=3,fetch("/arrow/superstore.arrow");case 3:return n=e.sent,e.next=6,n.arrayBuffer();case 6:return a=e.sent,e.next=9,t.table(a.slice());case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))()},8429:function(e,t,n){var r,a=n(1092),o=n(1976),i=n(3219),c=n(8953),s=n(6732),l=n(7791),u=n(8549),f=n(7580),d=n(7662),p=n(3603),g=n(9951),_=n(5136),h=n(9452),b=Object.create,v=Object.defineProperty,m=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,y=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,k=function(e){return v(e,"__esModule",{value:!0})},V=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},E=function(e,t){for(var n in k(e),t)v(e,n,{get:t[n],enumerable:!0})},Z=function(e){return function(e,t,n){if(t&&"object"==typeof t||"function"==typeof t)for(var r,a=function(){var a=r.value;!x.call(e,a)&&"default"!==a&&v(e,a,{get:function(){return t[a]},enumerable:!(n=m(t,a))||n.enumerable})},o=(0,u.Z)(w(t));!(r=o()).done;)a();return e}(k(v(null!=e?b(y(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},S=V((function(e,t){t.exports.default={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}})),A=V((function(e,t){var n=S().default;function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(!n.length)return e;var i=n.shift();if(r(e)&&r(i))for(var c in i){var s,l;r(i[c])?(e[c]||Object.assign(e,((s={})[c]={},s)),a(e[c],i[c])):Object.assign(e,((l={})[c]=i[c],l))}return a.apply(void 0,[e].concat(n))}t.exports.get_types=function(){return Object.keys(t.exports.get_config().types)},t.exports.get_type_config=function(e){var n={};if(t.exports.get_config().types[e]&&Object.assign(n,t.exports.get_config().types[e]),n.type){var r=t.exports.get_type_config(n.type);return Object.assign(r,n),r}return n},globalThis.__PERSPECTIVE_CONFIG__=void 0,t.exports.override_config=function(e){globalThis.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),globalThis.__PERSPECTIVE_CONFIG__=a(n,e)},t.exports.get_config=function(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=a(n,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}}));Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var T="none",O="ordinal",L="time",C="linear",M=function(e){var t="crossValues",n=null,r=null,a=function(){var a=function(r){var a=n?e[t].filter((function(e){return n==e.name})):e[t];return!("crossValues"==t&&a.length>1)&&a.some((function(e){return r.includes(e.type)}))};return 0===e[t].length?T:r!=L&&a(["datetime","date"])?L:r!=C&&a(["integer","float"])||r==O?C:O};return a.settingName=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.settingValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.excludeType=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a},N={};E(N,{domain:function(){return R},labelFunction:function(){return I},scale:function(){return j}});var z=function(e){return Array.isArray(e)?e.flat(1/0):[e]},P=function(e){var t=function(t){return e(t)};return(0,f.rebindAll)(t,e),t.bandwidth=function(){return arguments.length?(e.bandwidth.apply(e,arguments),t):Math.max(e.bandwidth(),1)},t},j=function(){return e=P((0,d.tiA)()),t=function(t){return e(t)},(0,f.rebindAll)(t,e),t.ticks=function(){return[]},t;var e,t},R=function(){var e=["crossValue"],t="horizontal",n=function(t){var n=z(t);return r([].concat(new Set(n.map((function(t){return t[e[0]]})))))},r=function(e){return"vertical"==t?e.reverse():e};return n.valueName=function(){return arguments.length?(e=[arguments.length<=0?void 0:arguments[0]],n):e[0]},n.valueNames=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},I=function(e){return function(t){return t[e].join("|")}},F={};E(F,{domain:function(){return W},labelFunction:function(){return U},scale:function(){return H},tickFormatFunction:function(){return q}});var D=function(){var e=[0,0],t="percent",n=function(n){switch(t){case"domain":n[0]-=e[0],n[1]+=e[1];break;case"percent":var r=n[1]-n[0];n[0]-=e[0]*r,n[1]+=e[1]*r;break;default:throw new Error("Unknown padUnit: "+t)}return n};return n.pad=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.padUnit=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},Y=function(e){if(Array.isArray(e)){for(var t=Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},B=function(e){return Math.abs(e)>=1e7?(0,d.WUZ)(".3s")(e):Number.isInteger(e)?(0,d.WUZ)(",.0f")(e):(0,d.WUZ)(",.2f")(e)},H=function(){return(0,d.BYU)()},W=function(){var e=function(){var e=[function(e){return e}],t=null,n=[],r=D(),a=function(a){var o,i=new Array(a.length),c=!0,s=!1,l=e[Symbol.iterator]();try{for(var u;!(c=(u=l.next()).done);c=!0)for(var f=u.value,d=0;d<a.length;d++){var _=f(a[d],d);Array.isArray(_)?i.push.apply(i,Y(_)):i.push(_)}}catch(u){s=!0,o=u}finally{try{!c&&l.return&&l.return()}finally{if(s)throw o}}var h=[(0,p.Z)(i),(0,g.Z)(i)];if(h[0]=null==h[0]?(0,p.Z)(n):(0,p.Z)([h[0]].concat(Y(n))),h[1]=null==h[1]?(0,g.Z)(n):(0,g.Z)([h[1]].concat(Y(n))),null!=t){var b=Math.max(Math.abs(h[1]-t),Math.abs(h[0]-t));h[0]=t-b,h[1]=t+b}return r(h)};return a.accessors=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.pad=function(){return arguments.length?(r.pad(arguments.length<=0?void 0:arguments[0]),a):r.pad},a.padUnit=function(){return arguments.length?(r.padUnit(arguments.length<=0?void 0:arguments[0]),a):r.padUnit},a.include=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.symmetricalAbout=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.paddingStrategy=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a}().pad([0,.1]).padUnit("percent"),t=["crossValue"],n=function(n){return e.accessors(t.map((function(e){return function(t){return parseFloat(t[e])}}))),r(z(n))};(0,f.rebindAll)(n,e);var r=function(n){if("domain"==e.padUnit()){var r=function(e){var n=t.map((function(t){return e.map((function(e){return e[t]})).sort((function(e,t){return e-t})).filter((function(e,t,n){return 0===t||e!==n[t-1]})).reduce((function(e,t,n,r){return 0===n||e<=t-r[n-1]?e:Math.abs(t-r[n-1])}))}));return Math.min.apply(Math,n)}(n);return e.pad([r/2,r/2])(n)}return e(n)};return n.valueName=function(){return arguments.length?(t=[arguments.length<=0?void 0:arguments[0]],n):t[0]},n.valueNames=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},U=function(e){return function(t){return t[e][0]}},q=B,G={};E(G,{domain:function(){return X},labelFunction:function(){return J},scale:function(){return K}});var K=function(){return(0,d.Xf)()},X=function(){var e=(0,f.extentTime)(),t=["crossValue"],n=function(n){return e.accessors(t.map((function(e){return function(t){return new Date(t[e])}}))),r(z(n))};(0,f.rebindAll)(n,e,(0,f.exclude)("include","paddingStrategy"));var r=function(n){var r=Math.abs(function(e){var n=t.map((function(t){return e.map((function(e){return new Date(e[t]).getTime()})).sort((function(e,t){return e-t})).filter((function(e,t,n){return 0===t||e!==n[t-1]})).reduce((function(e,t,n,r){return 0===n||Math.abs(e)<=Math.abs(t-r[n-1])?Math.abs(e):Math.abs(t-r[n-1])}))}));return Math.min.apply(Math,n)}(n));return e.padUnit("domain").pad([r/2,r/2])(n)};return n.valueName=function(){return arguments.length?(t=[arguments.length<=0?void 0:arguments[0]],n):t[0]},n.valueNames=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},J=function(e){return function(t){return new Date(t[e][0])}},$={};E($,{component:function(){return le},domain:function(){return ce},labelFunction:function(){return se},scale:function(){return ie}});var Q=function(e,t,n){var r=6,a=6,o=function(){for(var e={},t=function(t){for(var n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];t[a](e[a])}return t},n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(var o=function(){var n=c[i];t[n]=function(){return arguments.length?(e[n]=arguments.length<=0?void 0:arguments[0],t):e[n]}},i=0,c=r;i<c.length;i++)o();return t}("tickFormat","ticks","tickArguments","tickValues","tickPadding"),i=function(){},c=null,s=(0,f.dataJoin)("g","group"),l=(0,f.dataJoin)("path","domain"),u=function(e,t){return p()?"translate("+t+", "+e+")":"translate("+e+", "+t+")"},p=function(){return"left"===e||"right"===e},g=function(f){c?f.each((function(f,g,h){var b=h[g],v=(0,d.Ys)(b),m="bottom"===e||"right"===e?1:-1,w=n.range(),y=function(e){return p()?e.map((function(e){return[e[1],e[0]]})):e}([[w[0],m*r],[w[0],0],[w[1],0],[w[1],m*r]]);l(v,[f]).attr("d",(0,d.jvg)()(y)).attr("stroke","#000").attr("fill","none");var x=s(v,c),k=function(e){return Array.isArray(a)?a[e]:a},V=function(e){for(var t=0,n=0;n<e;n++)t+=k(n);return t};x.attr("transform",(function(e,t){return u(0,m*V(t))})).each((function(e,r,a){var c=(0,d.Ys)(a[r]),s=_(n,e);o(t(s)).decorate((function(e,t){return i(e,t,r)})).tickSizeInner(k(r)).tickOffset((function(e){return s.step(e)/2}))(c),c.select("path.domain").attr("visibility","hidden")})),x.exit().attr("transform",(function(e,t){return u(0,m*V(t))}))})):o(t(n).decorate(i))(f)},_=function e(t,n){function r(e){var n=e.domain;return n.reduce((function(e,n){return e+t(n)}),0)/n.length}return r.ticks=function(){return n},r.tickFormat=function(){return function(e){return e.text}},r.copy=function(){return e(t,n)},r.step=function(e){return e.domain.length*t.step()},(0,f.rebindAll)(r,t,(0,f.exclude)("ticks","step","copy")),r};return g.tickSize=function(){return arguments.length?(a=r=Number(arguments.length<=0?void 0:arguments[0]),g):a},g.tickSizeInner=function(){return arguments.length?(a=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:Number(arguments.length<=0?void 0:arguments[0]),g):a},g.tickSizeOuter=function(){return arguments.length?(r=Number(arguments.length<=0?void 0:arguments[0]),g):r},g.decorate=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],g):i},g.groups=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],g):c},(0,f.rebindAll)(g,o),g},ee=function(e){return Q("top",f.axisOrdinalTop,e)},te=function(e){return Q("bottom",f.axisOrdinalBottom,e)},ne=function(e){return Q("left",f.axisOrdinalLeft,e)},re=function(e){return Q("right",f.axisOrdinalRight,e)};function ae(e){return e.getRootNode().host}function oe(e){return e.closest("#container.chart")}var ie=function(){return P((0,d.tiA)()).padding(.5)},ce=function(){var e=["crossValue"],t="horizontal",n=function(t){var n=z(t);return r([].concat(Array.from(new Set(n.map((function(t){return t[e[0]]}))))))},r=function(e){return"vertical"==t?e.reverse():e};return n.valueName=function(){return arguments.length?(e=[arguments.length<=0?void 0:arguments[0]],n):e[0]},n.valueNames=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},se=function(e){return function(t){return t[e].join("|")}},le=function(e){var t="horizontal",n="crossValues",r=null,a=function(){var a=e[n].length>1,l=i(r),f=l.map(c),d=a?f.map((function(e){return e.size})):f[0].size,p=f.reduce((function(e,t){return e+t.size}),0),g=function(e){return function(n){var r=e(n);return a&&r.groups(l).tickSizeInner(d).tickSizeOuter(p),"horizontal"!==t&&r.tickPadding(10),r}},_=o(a);return{bottom:g(_.bottom),left:g(_.left),right:g(_.right),top:g(_.top),size:p+10+"px",decorate:function(e,n,r){var a=f[r].rotation;"horizontal"===t&&u(e,a),s(e,a)}}},o=function(e){return e?{bottom:te,left:ne,top:ee,right:re}:{bottom:f.axisOrdinalBottom,left:f.axisOrdinalLeft,top:f.axisOrdinalTop,right:f.axisOrdinalRight}},i=function(e){var t=[];return e.forEach((function(e){(e&&e.split?e.split("|"):[e]).forEach((function(n,r){for(;t.length<=r;)t.push([]);var a=t[r];a.length>0&&a[a.length-1].text===n?a[a.length-1].domain.push(e):a.push({text:n,domain:[e]})}))})),t.reverse()},c=function(n){var r=e.size.width,a=Math.max.apply(Math,n.map((function(e){return e.text?e.text.length:0})));return"horizontal"===t?n&&16*n.length>r-100?{size:5*a+10,rotation:90}:n&&n.length*(6*a+10)>r-100?{size:3*a+20,rotation:45}:{size:25,rotation:0}:{size:5*a+10,rotation:0}},s=function(e,n){var r=n?function(e,t){return e.x+e.width+14>t.x+t.width}:function(e,t){return e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height},a="horizontal"==t?l(e):null,o=[];e.each((function(e,t,n){var i=(0,d.Ys)(n[t]),c=function(e){for(var t=-1!==e.indexOf(",")?",":" ",n=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(t).map((function(e){return parseInt(e)}));n.length<2;)n.push(0);return n}(i.attr("transform")),s=i.node().getBBox(),l={x:s.x+c[0],y:s.y+c[1],width:s.width,height:s.height},u=o.some((function(e){return r(e,l)}))||a&&!function(e,t){return e.x>=t.x&&e.x+e.width<=t.x+t.width&&e.y>=t.y&&e.y+e.height<=t.y+t.height}(l,a);i.attr("visibility",u?"hidden":""),u||o.push(l)}))},l=function(e){var t=oe(e.node());if(null!==t){var n=t.querySelector(".cartesian-chart"),r=n.querySelector(".x-axis"),a=n.getBoundingClientRect(),o=r.getBoundingClientRect();return{x:a.left-o.left,width:a.width,y:a.top-o.top,height:a.height}}},u=function(e,t){var n=function(e){return e?e<60?"rotate(-"+e+" 5 5)":"rotate(-"+e+" 3 7)":"translate(0, 8)"}(t),r=t?"end":"";e.each((function(e,t,a){(0,d.Ys)(a[t]).select("text").attr("transform",n).style("text-anchor",r)}))};return a.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.settingName=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.domain=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a},ue={none:N,ordinal:$,time:G,linear:F},fe=function(e){var t=null,n="horizontal",r="crossValues",a=null,o=["crossValue"],i=["include","paddingStrategy","pad"],c={},s=function(s){var f=M(e).excludeType(t).settingName(r).settingValue(a)(),d=ue[f],p=d.domain().valueNames(o);i.forEach((function(e){c[e]&&p[e]&&p[e](c[e])})),p.orient&&p.orient(n);var g=p(s),_=d.component?l(d,g,s):u();return{scale:d.scale(),domain:g,domainFunction:p,labelFunction:d.labelFunction,component:{bottom:_.bottom,left:_.left,top:_.top,right:_.right},size:_.size,decorate:_.decorate,label:e[r].map((function(e){return e.name})).join(", "),tickFormatFunction:d.tickFormatFunction}},l=function(t,a,o){return t.component(e).orient(n).settingName(r).domain(a)(o)},u=function(){return{bottom:f.axisBottom,left:f.axisLeft,top:f.axisTop,right:f.axisRight,decorate:function(){}}};return s.excludeType=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.settingName=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],s):r},s.settingValue=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],s):a},s.valueName=function(){return arguments.length?(o=[arguments.length<=0?void 0:arguments[0]],s):o[0]},s.valueNames=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],s):o},i.forEach((function(e){s[e]=function(){return arguments.length?(c[e]=arguments.length<=0?void 0:arguments[0],s):c[e]}})),s},de=function(e,t){return ge(e,t,(function(e,t){return e.svgPlotArea(t)}),!1)},pe=function(e,t){return ge(e,t,(function(e,t){return e.canvasPlotArea(t).svgPlotArea((0,f.seriesSvgPoint)())}),!0)},ge=function(e,t,n,r){var a=null,o=null,i=(0,f.chartCartesian)({xScale:e.scale,yScale:t.scale,xAxis:e.component,yAxis:t.component}).xDomain(e.domain).xLabel(e.label).xAxisHeight(e.size).xDecorate(e.decorate).xTickFormat(e.tickFormatFunction).yDomain(t.domain).yLabel(t.label).yAxisWidth(t.size).yDecorate(t.decorate).yOrient("left").yTickFormat(t.tickFormatFunction);e.decorate&&i.xDecorate(e.decorate),t.decorate&&i.yDecorate(t.decorate),i.xPaddingInner&&i.xPaddingInner(1),i.xPaddingOuter&&i.xPaddingOuter(.5),i.yPaddingInner&&i.yPaddingInner(1),i.yPaddingOuter&&i.yPaddingOuter(.5),i.axisSplitter=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],i):a},i.altAxis=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],i):o},i.plotArea=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return 0==t.length?r?this.canvasPlotArea():this.svgPlotArea():n.apply(void 0,[this].concat(t))};var c=i.decorate();return i.decorate((function(n,s){var l=n.select("d3fc-svg.plot-area"),u=l.select("svg").node();u.setAttribute("viewBox","0 0 "+l.node().clientWidth+" "+l.node().clientHeight),u.setAttribute("preserveAspectRatio","none");for(var p=0,g=["x-axis","y-axis"];p<g.length;p++){var _=g[p];n.select("d3fc-svg."+_+" svg").node().setAttribute("preserveAspectRatio","none")}if(c(n,s),r){var h=n.select(".svg-plot-area").node(),b=n.select(".canvas-plot-area").node();(0,d.td_)([h,b]).order()}if(a){if(a.haveSplit()){var v=a.altData(),m=(0,f.dataJoin)("d3fc-svg","y2-axis").key((function(e){return e})),w=(0,f.dataJoin)("g","y-series").key((function(e){return e}));n.append("div").attr("class","y-label right-label").style("grid-column",5).style("-ms-grid-column",5).style("grid-row",3).style("-ms-grid-row",3).style("width",o.size||"1em").style("display","flex").style("align-items","center").style("justify-content","center").append("span").attr("class","y-label splitter-label").style("transform","rotate(-90deg)");var y=o.scale.domain(o.domain),x=o.component.right(y);if(x.tickFormat(o.tickFormatFunction),o.decorate&&x.decorate(o.decorate),m(n,["right"]).attr("class",(function(e){return"y-axis "+e+"-axis"})).on("measure",(function(e,t){var n=e.detail,r=n.width,a=n.height;"left"===t&&(0,d.Ys)(e.currentTarget).select("svg").attr("viewBox",-r+" 0 "+r+" "+a).attr("preserveAspectRatio","none"),y.range([a,0])})).on("draw",(function(e,t){(0,d.Ys)(e.currentTarget).select("svg").call(x)})),r){n.select("d3fc-canvas.plot-area").on("draw",(function(n,r){!function(n){var r=i.plotArea();r.context(n.node().getContext("2d")).xScale(e.scale);var a=[t.scale,y];[s,v].forEach((function(e,t){r.yScale(a[t]),r(e)}))}((0,d.Ys)(n.currentTarget).select("canvas"))}))}else{n.select("d3fc-svg.plot-area").on("draw",(function(n,r){!function(n){var r=i.plotArea();r.xScale(e.scale);var a=[t.scale,y];w(n,[s,v]).each((function(e,t,n){r.yScale(a[t]),(0,d.Ys)(n[t]).datum(e).call(r)}))}((0,d.Ys)(n.currentTarget).select("svg"))}))}}a(n)}})),i};function _e(e,t,n){var r=e.select(t);return r.size()>0?r:n()}function he(e,t,n){if(void 0===n&&(n="right"),"right"===n||"bottom"===n)return e[n]<t[n];if("left"===n||"top"===n)return e[n]>t[n];throw"Direction being checked for overflow is invalid: "+n}function be(e,t,n,r){void 0===r&&(r=0);var a="x"===e?"width":"height",o=t[e],i=t[e]+t[a],c=n[e],s=n[e]+n[a];return c+r>o&&c-r<i||s+r>o&&s-r<i||c+r<o&&s-r>i}var ve='<ul id="tooltip-values"></ul>\n',me=Z(A());function we(e,t){switch(e){case"date":case"datetime":return t instanceof Date?t:new Date(parseInt(t)).toLocaleString("en-us",(0,me.get_type_config)(e).format);case"integer":return parseInt(t,10);case"float":return parseFloat(t)}return t}function ye(e,t){return 0===t.crossValues.length||0===e.crossValue.length?[]:((e.crossValue.split?e.crossValue.split("|"):[e.crossValue])||[e.key]).map((function(e,n){return{name:t.crossValues[n].name,value:we(t.crossValues[n].type,e)}}))}function xe(e,t){if(0===t.splitValues.length)return[];var n=e.key?e.key.split("|"):e.mainValue.split?e.mainValue.split("|"):[e.mainValue];return t.splitValues.map((function(e,t){return{name:e.name,value:we(e.type,n[t])}}))}function ke(e,t){return t.mainValues.length>1?e.mainValue?[{name:e.key,value:e.mainValue-(e.baseValue||0)}]:t.mainValues.map((function(t,n){return{name:t.name,value:we(t.type,e.mainValues[n])}})):[{name:t.mainValues[0].name,value:we(t.mainValues[0].type,e.colorValue||e.mainValue-e.baseValue||e.mainValue||e.mainValues)}]}var Ve=Z(A());function Ee(e,t,n){!function(e,t){e.select("#tooltip-values").selectAll("li").data(t).join("li").each((function(e){(0,d.Ys)(this).text(e.name+": ").append("b").text(Ze(e.value))}))}(e,ye(t,n).concat(xe(t,n)).concat(ke(t,n)))}var Ze=function(e){return null===e?"-":e.toLocaleString(void 0,{style:"decimal",minimumFractionDigits:(0,Ve.get_type_config)("float").precision,maximumFractionDigits:(0,Ve.get_type_config)("float").precision})},Se=function(e){return[e.name,"==",e.value]},Ae=function(e,t,n){var r=ke(t,n).map((function(e){return e.name})),a=ye(t,n).map(Se),o=xe(t,n).map(Se),i=n.filter.concat(a).concat(o);e.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{column_names:r,config:{filter:i},row:t.row}}))},Te=function(){var e=!1,t=null,n=null,r=!1,a=function(a){var o=a.node();if(o&&o.isConnected){var i=(0,d.Ys)(oe(o));t=function(e){return _e(e,"div.tooltip",(function(){return e.append("div").attr("class","tooltip").style("z-index",3).style("opacity",0).html(ve)}))}(i);var c=function(e,o){Ee(t,o,n);var c=a.nodes(),s=c.indexOf(this);(function(e,t,n,r){var a,o=e.getBoundingClientRect(),i=t.getBoundingClientRect(),c=i.left+i.width/2-o.left,s=i.top-o.top+e.scrollTop;r&&(s=i.top+i.height/2-o.top+e.scrollTop),n.style("left",c+"px").style("top",s+"px").style("opacity",.9),r&&(a=function(e,t){var n=e.node().getBoundingClientRect(),r=n.width/2,a=n.left-r-t.left;e.style("left",a+"px");var o=n.height/2,i=n.top-o-t.top;return e.style("top",i+"px"),[a,i]}(n,o),c=a[0],s=a[1]),function(e,t,n,r,a){void 0===a&&(a=!1);var o=e.node().getBoundingClientRect();if(he(t,o)){var i=o.right-t.right;e.style("left",n-i+"px")}if(he(t,o,"bottom")){var c=o.bottom-t.bottom;e.style("top",r-c+"px")}if(a){if(he(t,o,"left")){var s=o.left-t.left;e.style("left",n-s+"px")}if(he(t,o,"top")){var l=o.top-t.top;e.style("top",r-l+"px")}}}(n,o,c,s,r)})(i.node(),c[s],t,r),(0,d.Ys)(c[s]).style("opacity","0.7")};e?a.each((function(e){return c.call(this,void 0,e)})):(a.on("mouseover",c).on("mouseout",(function(e,n){Oe(t);var r=a.nodes(),o=r.indexOf(this);r&&(0,d.Ys)(r[o]).style("opacity","1")})),function(){var e=null,t=function(t){var n=t.node();t.on("click",(function(t,r){return Ae(n,r,e)}))};return t.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t}().settings(n)(a))}else Oe(t)};return a.alwaysShow=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.centered=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a};function Oe(e){e&&e.style("opacity",0)}function Le(e,t){var n=e.mainValues.length>1?(0,f.seriesSvgGrouped)((0,f.seriesSvgBar)()):(0,f.seriesSvgBar)();return n=n.decorate((function(n){Te().settings(e)(n),n.style("fill",(function(e){return t(e.key)}))})),(0,f.autoBandwidth)(Ce(n)).crossValue((function(e){return e.crossValue})).mainValue((function(e){return e.mainValue?e.mainValue:0})).baseValue((function(e){return e.baseValue}))}var Ce=function(e){var t=function(t){return e(t)};return(0,f.rebindAll)(t,e),t.bandwidth=function(){return arguments.length?(e.bandwidth(Math.max(arguments.length<=0?void 0:arguments[0],1)),t):e.bandwidth()},t};function Me(e){return e.split("|").slice(0,-1).join("|")}function Ne(e){var t=e.data&&e.data.length>0?e.data[0]:{},n=Object.keys(t).filter((function(e){return"__ROW_PATH__"!==e}));return je().settings(e).domain(n)()}function ze(e,t){var n=Array.from(new Set(t));return je().settings(e).domain(n)()}function Pe(e){var t=e.data&&e.data.length>0?e.data[0]:{},n=[];return Object.keys(t).forEach((function(e){if("__ROW_PATH__"!==e){var t=Me(e);n.includes(t)||n.push(t)}})),je().settings(e).domain(n)()}function je(){var e=null,t=null,n={},r=function(e){return Ie(e,n.colorStyles&&n.colorStyles.opacity)},a=function(){var a=n.colorStyles,o=t||[a.series];if(o||e.length>1){var i=e.length>1?a.scheme:o;return(0,d.PKp)(i.map(r)).domain(e)}return null};return a.domain=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.defaultColors=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.mapFunction=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a}function Re(e){return Fe(1)(e)}function Ie(e,t){return void 0===t&&(t=.5),Fe(t)(e)}function Fe(e){return function(t){var n=(0,d.$_Y)(t);return n.opacity=e,n+""}}var De={none:I,ordinal:se,time:J,linear:U},Ye=function(e){var t=M(e),n="__ROW_PATH__",r=function(e,r){return De[t()](n)(e,r)};return(0,f.rebindAll)(r,t),r.valueName=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],r):n},r};function Be(e,t,n){var r=void 0===n?{}:n,a=r.stack,o=void 0!==a&&a,i=r.excludeEmpty,c=void 0!==i&&i,s=t||e.data;return e.splitValues.length>0?function(e,t,n){var r=n.stack,a=void 0!==r&&r,o=n.excludeEmpty,i=void 0!==o&&o,c={};return t.forEach((function(e){var t={},n={};Object.keys(e).filter((function(e){return"__ROW_PATH__"!==e})).filter((function(t){return!i||null!=e[t]&&null!=e[t]})).forEach((function(r){var o=r.split("|"),i=o[o.length-1],c=e[r]||0,s=i+(c>=0?"+ve":"-ve"),l=o.slice(0,o.length-1).join("|"),u=n[l]=n[l]||{__ROW_PATH__:e.__ROW_PATH__},f=t[s]||0;u.__KEY__=l,a?(u[i]=f+c,u["__BASE_VALUE__"+i]=f,t[s]=u[i]):u[i]=c,u.row=e})),Object.keys(n).forEach((function(e){(c[e]=c[e]||[]).push(n[e])}))})),Object.keys(c).map((function(e){var t=c[e];return t.key=e,t}))}(0,s,{stack:o,excludeEmpty:c}):[s]}function He(e,t){var n={stack:!0};return Be(e,t,n).map((function(t){return We(e,t,n)}))}function We(e,t,n){var r=n.stack,a=function(e,t,n){var r=n.stack,a=void 0!==r&&r,o=Ye(e);return function(e){var n=function(t){return a&&t["__BASE_VALUE__"+e.name]||0},r=t.map((function(t,r){return{crossValue:o(t,r),mainValue:t[e.name]?t[e.name]:null,baseValue:n(t),key:t.__KEY__?t.__KEY__+"|"+e.name:e.name,row:t.row||t}}));return r.key=r[0].key,r}}(e,t,{stack:void 0!==r&&r});return e.mainValues.length>1?e.mainValues.map(a):a(e.mainValues[0])}var Ue=10;function qe(e,t,n){var r=(0,d.Ys)(ae(e).getContainer()).node().getBoundingClientRect(),a=e.getBoundingClientRect(),o={top:a.top+n-Ue,right:a.right+t+Ue,bottom:a.bottom+n+Ue,left:a.left+t-Ue},i={x:t,y:n};return[{edge:"right",dimension:"x"},{edge:"left",dimension:"x"},{edge:"top",dimension:"y"},{edge:"bottom",dimension:"y"}].forEach((function(e){if(he(r,o,e.edge)){var t=o[e.edge]-r[e.edge];i[e.dimension]=i[e.dimension]-t}})),i}var Ge="resize.for-dragging";function Ke(){var e=!0,t=null,n=function(n){var r=n.node(),a=r.getRootNode().host.closest("perspective-viewer");r.style.cursor="move",t.legend&&(r.style.left=t.legend.left,r.style.top=t.legend.top);var o=(0,d.ohM)().on("drag",(function(n){var a=qe(this,n.dx,n.dy);this.style.left=this.offsetLeft+a.x+"px",this.style.top=this.offsetTop+a.y+"px";var o={left:this.style.left,top:this.style.top};t.legend=Object.assign({},t.legend,o),e=function(e){var t=e.getBoundingClientRect(),n=(0,d.Ys)(oe(e)).node().getBoundingClientRect(),r=5;return t.right+Ue+r>=n.right&&t.top-Ue-r<=n.top}(r)?function(e){return(0,d.Ys)(window).on(Ge,null),e.style.left="auto",!0}(r):function(e,t){return!1!==t&&(0,d.Ys)(window).on(Ge,(function(){var t=qe(e,0,0);e.style.left=e.offsetLeft+t.x+"px",e.style.top=e.offsetTop+t.y+"px"})),!1}(r,e)}));o.on("end",(function(e){(0,d.Ys)(window).on(Ge,null),null==a||a.dispatchEvent(new Event("perspective-config-update"))})),n.call(o)};return n.settings=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n}var Xe="horizontal-drag-handle",Je="vertical-drag-handle",$e="dragHandles",Qe="resize";var et=function(e,t,n,r){e.selectAll("."+r).each((function(e,r,a){var o=a[r];(0,d.Ys)(o).attr(n,o.getBoundingClientRect()[n]-t)}))},tt=function(e){return e.select("#"+$e).size()>0},nt=function(e,t,n){return e.attr(t,Number(e.attr(t))-n)},rt=function(e,t,n){return e.attr(t,e.node().getBoundingClientRect()[t]-n)},at=function(e,t){var n,r,a=e||(0,_.wg)(),o=[],i=1,c=t.legend&&t.legend.pageIndex?t.legend.pageIndex:0,s=function(){},l=Ke().settings(t),u=function(e){o=a.scale().domain(),r=function(){var e=9,t=3,n=null,r={height:100,width:100},a={height:null,width:null},o=[],i=function(e,t){return o.filter((function(t){return t.event===e})).forEach((function(e){return e.execute(t)}))},c=function(r){if(!tt(r)){var o={left:function(e){return i(Qe,{horizontal:T(e),vertical:!1})},top:function(e){return i(Qe,{horizontal:!1,vertical:L(e)})},right:function(e){return i(Qe,{horizontal:O(e),vertical:!1})},bottom:function(e){return i(Qe,{horizontal:!1,vertical:C(e)})},topleft:function(e){return i(Qe,{horizontal:T(e),vertical:L(e)})},topright:function(e){return i(Qe,{horizontal:O(e),vertical:L(e)})},bottomright:function(e){return i(Qe,{horizontal:O(e),vertical:C(e)})},bottomleft:function(e){return i(Qe,{horizontal:T(e),vertical:C(e)})}},c=r.node();n.legend&&(c.style.height=n.legend.height,c.style.width=n.legend.width);var u=c.getBoundingClientRect(),f=r.append("svg").attr("id",$e).attr("width",u.width).attr("height",u.height),p=f.append("g"),g=function(e){return"left"===e||"right"===e},_={left:0,top:e,right:u.width-e,bottom:e},h={left:e,top:0,right:e,bottom:u.height-e},b=["left","top","right","bottom"].map((function(n){return p.append("rect").attr("id","drag"+n).attr("class",g(n)?Je:Xe).attr("y",h[n]).attr("x",_[n]).attr("height",g(n)?u.height-2*e:e).attr("width",g(n)?e:u.width-2*e).attr("fill",g(n)?"lightgreen":"lightblue").attr("fill-opacity",0).style("z-index",t).attr("cursor",g(n)?"ew-resize":"ns-resize").call((0,d.ohM)().on("drag",o[n]))})),v=b[0],m=b[1],w=b[2],y=b[3],x=function(e){return""+e[0]+e[1]},k={topleft:"nwse",topright:"nesw",bottomright:"nwse",bottomleft:"nesw"},V=[["top","left"],["top","right"],["bottom","right"],["bottom","left"]].map((function(n){return p.append("rect").attr("id","drag"+x(n)).attr("class","corner-drag-handle "+n[0]+" "+n[1]).attr("height",e).attr("width",e).attr("fill","red").attr("fill-opacity",0).style("z-index",t).attr("cursor",k[x(n)]+"-resize").call((0,d.ohM)().on("drag",o[x(n)]))})),E=V[0],Z=V[1],S=V[2],A=V[3];P("height","y",y),P("width","x",w),z(f)}function T(e){var t=l(qe(v.node(),e.x,0).x,f,"width",(function(e,t){return e-t}));return c.style.left=c.offsetLeft+t+"px",c.style.width=c.offsetWidth-t+"px",M(),N(w,t,"width","x")}function O(e){var t=-l(qe(w.node(),e.dx,0).x,f,"width",(function(e,t){return e+t}));return!s(t,"x",w,e)&&(c.style.width=c.offsetWidth-t+"px",M(),N(w,t,"width","x"))}function L(e){var t=l(qe(m.node(),0,e.y).y,f,"height",(function(e,t){return e-t}));return c.style.top=c.offsetTop+t+"px",c.style.height=c.offsetHeight-t+"px",M(),N(y,t,"height","y")}function C(e){var t=-l(qe(y.node(),0,e.dy).y,f,"height",(function(e,t){return e+t}));return!s(t,"y",y,e)&&(c.style.height=c.offsetHeight-t+"px",M(),N(y,t,"height","y"))}function M(){var e={top:c.style.top,left:c.style.left,height:c.style.height,width:c.style.width};n.legend=Object.assign({},n.legend,e)}function N(e,t,n,r){return rt(f,n,t),nt(e,r,t),et(f,t,n,"height"===n?Je:Xe),z(f),0!=t}function z(t){E.attr("y",0,"x",0),Z.attr("y",0).attr("x",t.attr("width")-e),S.attr("y",t.attr("height")-e).attr("x",t.attr("width")-e),A.attr("y",t.attr("height")-e).attr("x",0)}function P(e,t,n){a[e]&&a[e]<u[e]&&(c.style[e]=a[e]+"px",N(n,u[e]-a[e],e,t))}};function s(e,t,n,r){var a,o;return a=t,o=n,e<0&&r[a]<Number(o.attr(a))||function(e,t,n,r){return e>0&&r[t]>Number(n.attr(t))}(e,t,n,r)}function l(e,t,n,o){var i=o(Number(t.attr(n)),e);return i<r[n]?o(e,r[n]-i):a[n]&&i>a[n]?o(e,a[n]-i):e}return c.on=function(e,t){return o.push({event:e,execute:t}),c},c.zIndex=function(e){return t=e,c},c.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],c):n},c.minWidth=function(e){return r.width=e,a.width&&(a.width=Math.max(r.width,a.width)),c},c.minHeight=function(e){return r.height=e,a.height&&(a.height=Math.max(r.height,a.height)),c},c.handleWidth=function(t){return e=t,c},c.maxWidth=function(e){return a.width=e,r.width=Math.min(r.width,a.width),c},c.maxHeight=function(e){return a.height=e,r.height=Math.min(r.height,a.height),c},c}().settings(t).maxHeight(16*o.length+20).on("resize",(function(){return p(e)})),r(e),l(e),p(e)},p=function(e){m(e),g(e),h(e),function(e){var t=e.select("g.legendCells"),n=e.node().getBoundingClientRect();if(he(n,t.node().getBoundingClientRect())){var r=e.select(".legend");t.selectAll(".label").text((function(e,t,a){var o=a[t];if(he(n,o.getBoundingClientRect())){var i=function(e,t,n){var r=e.getBoundingClientRect(),a=t.node().createSVGPoint(),o=3;return a.x=n.right-r.left-o,a.y=0,e.getCharNumAtPosition(a)}(o,r,n);return e.substring(0,i-3)+"..."}return e}))}}(e)},g=function(e){var t=y(e);t.style("display",i<=1?"none":"block"),t.select("#page-text").text(c+1+"/"+i),t.select("#up-arrow").attr("class",0===c?"disabled":"").on("click",(function(){c>0&&(b(c-1),p(e))})),t.select("#down-arrow").attr("class",c>=i-1?"disabled":"").on("click",(function(){c<i-1&&(b(c+1),p(e))}))},h=function(e){i>1&&a.cellFilter(v()),e.select("g.legendCells").remove();var t=x(e);t.call(a);var n=e.select("g.legendCells").node().getBBox();t.attr("height",n.height+20),s(e)},b=function(e){c=e,t.legend=Object.assign({},t.legend,{pageIndex:c})},v=function(){return function(e,t){return t>=n*c&&t<n*c+n}},m=function(e){var t=e.node().getBoundingClientRect(),r=Math.floor(t.height/16)-1;n=r<o.length?r-1:r,i=w(r),c=Math.min(c,i-1)},w=function(e){return Math.ceil(o.length/e)},y=function(e){return _e(e,".legend-controls",(function(){return e.append("g").attr("class","legend-controls").html('<span id="up-arrow">&#9650;</span>\n<span id="page-text"></span>\n<span id="down-arrow">&#9660;</span>\n')}))},x=function(e){return _e(e,".legend",(function(){return e.append("svg").attr("class","legend")}))};return u.decorate=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],u):s},(0,f.rebindAll)(u,a),u},ot=function(e){return at((0,_.wg)().shape("circle").shapeRadius(6),e)},it=function(e){return at((0,_.ry)().shapePadding(1).labelOffset(3),e)},ct=function(){return ut(ot)},st=function(){return ut(it,lt)};function lt(e){if(!e)return null;var t=e.domain(),n=e.range().map((function(e){return(0,d.NAG)().type(e)()}));return(0,d.PKp)().domain(t).range(n)}function ut(e,t){var n={},r=null,a=null;function o(t){if(r&&r.range().length>1){var o=e(n);o.scale(r).orient("vertical").on("cellclick",(function(e){var t=this.__data__;n.hideKeys=n.hideKeys||[],n.hideKeys.includes(t)?n.hideKeys=n.hideKeys.filter((function(e){return e!==t})):n.hideKeys.push(t),ae(this)._draw()})),o.labels((function(e){var t=e.domain[e.i].split("|");return n.mainValues.length<=1&&t.length>1?t.slice(0,t.length-1).join("|"):e.domain[e.i]}));var i=_e(t,"div.legend-container",(function(){return t.append("div")}));o.decorate((function(e){var t=function(e){return n.hideKeys&&n.hideKeys.includes(e)},r=e.select("g.legendCells").attr("transform","translate(20,20)").selectAll("g.cell");r.classed("hidden",t),r.append("title").html((function(e){return e})),a&&r.select("circle, path").style("fill",(function(e){return t(e)?null:a(e)})).style("stroke",(function(e){return t(e)?null:Re(a(e))}))})),i.attr("class","legend-container").attr("borderbox-on-hover",!0).style("z-index","2").call(o)}}return o.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.scale=function(){return arguments.length?(r=t?t(arguments.length<=0?void 0:arguments[0]):arguments.length<=0?void 0:arguments[0],o):r},o.color=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o}function ft(e,t){var n=t||e.data;return e.hideKeys&&e.hideKeys.length>0?n.map((function(t){var n=Object.assign({},t);return e.hideKeys.forEach((function(e){delete n[e]})),n})):n}function dt(e,t){var n=t||e.data;return e.hideKeys&&e.hideKeys.length>0?n.map((function(t){var n={};return Object.keys(t).map((function(r){e.hideKeys.includes(Me(r))||(n[r]=t[r])})),n})):n}var pt=function(e){return function(t){t.strokeStyle=e?e.colorStyles.grid.gridLineColor:"#bbb",t.lineWidth=1}},gt=function(e){return e.style("display","none")},_t=function(e){return function(t){t.lineWidth=1,t.strokeStyle=e?e.colorStyles.grid.gridLineColor:"#bbb"}},ht=function(e,t){var n="both",r=!1,a=null,o=null,i=null,c=(0,f.seriesSvgMulti)(),s=(0,f.annotationSvgGridline)(),l=function(e){return function(t){return t.style("stroke-width","1.0").style("stroke",e?e.colorStyles.grid.gridLineColor:"#bbb")}}(t),u=gt,d=function(){r&&(c=(0,f.seriesCanvasMulti)().context(i),s=(0,f.annotationCanvasGridline)(),l=pt(t),u=_t(t));var d=c.xScale(a).yScale(o),p="vertical"===n?u:l,g="horizontal"===n?u:l,_=s.xDecorate(p).yDecorate(g);return d.series([_,e]).apply(void 0,arguments)};return d.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],d):n},d.canvas=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],d):r},d.xScale=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],d):a},d.yScale=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],d):o},d.context=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],d):i},d},bt=function(){var e=D(),t=function(t){var n=e.pad(),r=e.padUnit(),a=1;switch(r){case"domain":break;case"percent":a=t[1]-t[0];break;default:throw new Error("Unknown padUnit: "+r)}var o=t[0]-n[0]*a,i=t[1]+n[1]*a;return t[0]=t[0]>=0&&o<0?0:o,t[1]=t[1]<=0&&i>0?0:i,t};return(0,f.rebindAll)(t,e),t},vt=function(){var e=null,t=null,n=null,r=null,a=null,o=null,i=!1,c=!1,s=function(){};function l(s){var l="d3fc-"+(c?"canvas":"svg")+".plot-area";if(n||a){var p=r&&r.domain()[0]instanceof Date,g=(0,d.sPX)().on("zoom",(function(i){var c=i.transform;t.zoom={k:c.k,x:c.x,y:c.y},u(c),s.call(e);var _=1===c.k&&0===c.x&&0===c.y,h=f(s).style("display",_?"none":"");h.select("#zoom-reset").on("click",(function(){return s.select(l).call(g.transform,d.CRH)}));var b=h.select("#one-year").style("display",p?"":"none"),v=h.select("#six-months").style("display",p?"":"none"),m=h.select("#one-month").style("display",p?"":"none");if(p){var w=function(e){return function(){var t=new Date(n.domain()[0]),i=new Date(t);e(t,i);var c=r.range(),u=(c[1]-c[0])/(r(i)-r(t)),f=-r(t)*u,p=0;if(a){var _=a.domain().reduce((function(e,t){return e+t}))/2;p=-o(_)*u+a(_)}s.select(l).call(g.transform,d.CRH.translate(f,p).scale(u))}};b.on("click",w((function(e,t){return t.setYear(e.getFullYear()+1)}))),v.on("click",w((function(e,t){return t.setMonth(e.getMonth()+6)}))),m.on("click",w((function(e,t){return t.setMonth(e.getMonth()+1)})))}})),_=e.decorate();e.decorate((function(e,n){if(_(e,n),!i){i=!0;var a=e.select(l),s=c?window.devicePixelRatio:1;a.on("measure.zoom-range",(function(e){if(r&&r.range([0,e.detail.width/s]),o&&o.range([0,e.detail.height/s]),t.zoom){var n=d.CRH.translate(t.zoom.x,t.zoom.y).scale(t.zoom.k);a.call(g.transform,n)}})).call(g)}}))}s.call(e)}l.chart=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],l):e},l.settings=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],l):t},l.xScale=function(){return arguments.length?(n=p(arguments.length<=0?void 0:arguments[0]),r=n?n.copy():null,l):n},l.yScale=function(){if(!arguments.length)return a;if(a=p(arguments.length<=0?void 0:arguments[0]),o=a?a.copy():null){var e=o.domain();o.domain([e[1],e[0]])}return l},l.canvas=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],l):c},l.onChange=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],l):s};var u=function(e){var t=Object.assign({},e);if(n&&(n.domain(e.rescaleX(r).domain()),t.xDomain=n.domain()),a){var i=e.rescaleY(o).domain();a.domain([i[1],i[0]]),t.yDomain=a.domain()}s(t)},f=function(e){return _e(e,".zoom-controls",(function(){return e.append("div").attr("class","zoom-controls").style("display","none").html('<button id="zoom-reset">Reset zoom</button>\n<button id="one-year">1 Year</button>\n<button id="six-months">6 Months</button>\n<button id="one-month">1 Month</button>\n')}))},p=function(e){return e&&e.nice?e:null};return l};function mt(e,t){var n=He(t,ft(t)),r=Ne(t),a=ct().settings(t).scale(r),o=Le(t,r).orient("horizontal"),i=(0,f.seriesSvgMulti)().mapping((function(e,t){return e[t]})).series(n.map((function(){return o}))),c=fe(t).settingName("mainValues").valueName("mainValue").excludeType(O).include([0]).paddingStrategy(bt())(n),s=fe(t).excludeType(C).settingName("crossValues").valueName("crossValue").orient("vertical")(n),l=de(c,s).plotArea(ht(i,t).orient("horizontal"));l.yPaddingInner&&(l.yPaddingInner(.5),l.yPaddingOuter(.25),o.align("left")),l.xNice&&l.xNice();var u=vt().chart(l).settings(t).yScale(s.scale);e.datum(n).call(u),e.call(a)}mt.plugin={name:"X Bar",category:"X Chart",max_cells:1e3,max_columns:50,render_warning:!0};var wt=mt,yt=function(e){return 2===e.length&&!isNaN(e[0])&&!isNaN(e[1])&&e[0]!==e[1]},xt=function(e){return(0-e[0])/(e[1]-e[0])},kt=function(e,t){return t*e[1]/(t-1)},Vt=function(e,t,n){void 0===n&&(n=Et);var r,a,o,i=e.splitMainValues||[],c=function(e){var t=e.split("|");return i.includes(t[t.length-1])},s=e.mainValues.some((function(e){return c(e.name)}));a=s?n(t,(function(e){return!c(e)})):t,o=s?n(t,c):null;var l=function(t){if(1!==e.mainValues.length){var n=e.mainValues.map((function(e,t){return{index:t,name:e.name}})),a=n.filter((function(e){return!c(e.name)})),o=n.filter((function(e){return c(e.name)})),i=function(){return function(e){var t,n=[],r=!1,a=function(a){a.text("");var i=(0,f.dataJoin)("span","splitter-label").key((function(e){return e})),c=!r&&1===n.length,s=t&&0===e.splitValues.length;i(a,n).classed("disabled",c).text((function(e){return e.name})).style("color",(function(e){return s?Re(t(e.name)):void 0})).on("click",(function(t,n){var i;c||(e.splitMainValues=r?e.splitMainValues.filter((function(e){return e!=n.name})):[n.name].concat(e.splitMainValues||[]),null!=(i=t.target.getRootNode().host.closest("perspective-viewer"))&&i.dispatchEvent(new Event("perspective-config-update")),o(a))}))},o=function(e){var t=ae(e.node());t._container.innerHTML="",t._draw()};return a.labels=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.alt=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.color=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a}(e).color(r)};t.select(".y-label.left-label").call(i().labels(a)),t.select(".y-label.right-label").call(i().labels(o).alt(!0))}};return l.color=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],l):r},l.haveSplit=function(){return s},l.data=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],l):a},l.altData=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],l):o},l},Et=function(e,t){return e.map((function(e){return e.filter((function(e){return t(e.key)}))}))},Zt=function(e,t){return e.map((function(e){return t(e.key)?e:e.map((function(e){return Object.assign({},e,{mainValue:null})}))}))},St=function(e,t){return e.map((function(e){return Zt(e,t)}))};function At(e,t){var n=He(t,ft(t)),r=Ne(t),a=ct().settings(t).scale(r),o=Le(t,r).orient("vertical"),i=(0,f.seriesSvgMulti)().mapping((function(e,t){return e[t]})).series(n.map((function(){return o}))),c=fe(t).excludeType(C).settingName("crossValues").valueName("crossValue")(n),s=fe(t).settingName("mainValues").valueName("mainValue").excludeType(O).orient("vertical").include([0]).paddingStrategy(bt()),l=t.mainValues.length>1?St:Zt,u=Vt(t,n,l).color(r),d=s(u.data()),p=u.haveSplit()?i:ht(i,t).orient("vertical"),g=de(c,d).axisSplitter(u).plotArea(p);g.xPaddingInner&&(g.xPaddingInner(.5),g.xPaddingOuter(.25),o.align("left")),g.yNice&&g.yNice();var _=vt().chart(g).settings(t).xScale(c.scale);if(u.haveSplit()){var h=s(u.altData());(function(e,t){if(yt(e)&&yt(t)){var n=xt(e),r=xt(t);n>r?t[0]=kt(t,n):e[0]=kt(e,r)}})(d.domain,h.domain),g.yDomain(d.domain).altAxis(h)}e.datum(u.data()).call(_),e.call(a)}At.plugin={name:"Y Bar",category:"Y Chart",max_cells:1e3,max_columns:50,render_warning:!0};var Tt=At;function Ot(e,t){var n,r,a=(0,f.seriesSvgLine)(),o=e.data.length*((null==(n=e.data)?void 0:n.length)>0?Object.keys(e.data[0]).length-((null==(r=e.crossValues)?void 0:r.length)>0?1:0):0),i=Math.max(1,Math.min(3,Math.floor(e.size.width/o/2)));return(a=a.decorate((function(e){e.style("stroke",(function(e){return Re(t(e[0]&&e[0].key))})).style("stroke-width",i)}))).crossValue((function(e){return e.crossValue})).mainValue((function(e){return e.mainValue}))}var Lt=function(e){for(var t,n=[],r=(0,u.Z)(e);!(t=r()).done;)for(var a=t.value,o=0;o<a.length;o++)null!==a[o].mainValue&&(n[o]=n[o]||[],n[o].push(a[o]));return n},Ct=function(e,t,n){void 0===n&&(n=Math.min);var r=function(e){return e.reduce((function(e,r){var o=a(r,t);return!o||e&&n(e.value,o.value)!==o.value?e:o}),null)},a=function(e){if(Array.isArray(e))return r(e);var n=t(e);return null!==n?{item:e,value:n}:null},o=r(e);return o?o.item:null},Mt=function(){var e=Te().alwaysShow(!0),t=null,n=null,r=null,a=null,o=!1,i=null,c="crossValue",s="mainValue",l=null,u=1;function d(r){var a="d3fc-"+(o?"canvas":"svg")+".plot-area";if(t||n){var i=null,c=(0,f.pointer)().on("point",(function(e){var t=e.length?g(e[0]):null;i=t?[t.data]:[];var a=t?t.scale:n;p(r,i,a)}));r.select(a).on("measure.nearbyTip",(function(){return p(r,[])})).on("click",(function(){i.length&&Ae(r.node(),i[0],e.settings())})).call(c)}}var p=function(o,i,l){void 0===l&&(l=n);var f=o.select("d3fc-svg.plot-area svg").selectAll("circle.nearbyTip").data(i);f.exit().remove(),f.enter().append("circle").attr("class","nearbyTip").merge(f).attr("r",(function(e){return a?u*Math.sqrt(a(e.size)):10})).attr("transform",(function(e){return"translate("+t(e[c])+","+l(e[s])+")"})).style("stroke","none").style("fill",(function(e){return r&&e.key&&Ie(r(e.key))})),e(f)},g=function(e){var r=function(n){return function(r){return void 0===r[s]||null===r[s]||void 0===r[c]||null===r[c]?null:Math.sqrt(Math.pow(t(r[c])-e.x,2)+Math.pow(n(r[s])-e.y,2))}},a=r(n),o=Ct(i,a,Math.min);if(l){var u=r(l.yScale),f=Ct(l.data,u,Math.min);return a(o)<=u(f)?{data:o,scale:n}:{data:f,scale:l.yScale}}return{data:o,scale:n}};return d.scaleFactor=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],d):u},d.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],d):t},d.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],d):n},d.color=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],d):r},d.size=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length?(a=t[0]?t[0].copy().range([40,4e3]):null,d):a},d.canvas=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],d):o},d.data=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],d):i},d.xValueName=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],d):c},d.yValueName=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],d):s},d.altDataWithScale=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],d):l},(0,f.rebindAll)(d,e),d};function Nt(e,t){var n=function(e,t){var n=Ye(e);return t.map((function(e,t){return Object.keys(e).filter((function(e){return"__ROW_PATH__"!==e})).map((function(r){return{key:r,crossValue:n(e,t),mainValue:e[r],row:e}}))}))}(t,ft(t)),r=Ne(t),a=ct().settings(t).scale(r),o=(0,f.seriesSvgRepeat)().series(Ot(t,r)).orient("horizontal"),i=bt().pad([.1,.1]).padUnit("percent"),c=fe(t).excludeType(C).settingName("crossValues").valueName("crossValue")(n),s=fe(t).settingName("mainValues").valueName("mainValue").orient("vertical").paddingStrategy(i),l=Vt(t,Lt(n)).color(r),u=s(l.data()),d=l.haveSplit()?o:ht(o,t).orient("vertical"),p=de(c,u).axisSplitter(l).plotArea(d);p.yNice&&p.yNice();var g=vt().chart(p).settings(t).xScale(c.scale),_=Mt().settings(t).xScale(c.scale).yScale(u.scale).color(r).data(n);if(l.haveSplit()){var h=s(l.altData());p.altAxis(h),_.data(l.data()).altDataWithScale({yScale:h.scale,data:l.altData()})}var b=l.data();e.datum(b).call(g),e.call(_),e.call(a)}Nt.plugin={name:"Y Line",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0};var zt=Nt,Pt=[d.JFv,d.tJO,d.rZl,d.m_s,d.Hmc,d.P67,d.n31];function jt(e){return e.length>1?(0,d.PKp)().domain(e).range(Pt):null}function Rt(e){var t=e.data&&e.data.length>0?e.data[0]:{},n=[];return Object.keys(t).forEach((function(e){if("__ROW_PATH__"!==e){var t=Me(e);n.includes(t)||n.push(t)}})),jt(n)}function It(e,t){var n=Lt(function(e,t){var n=e.mainValues.length;return t.map((function(e){for(var t=Object.keys(e).filter((function(e){return"__ROW_PATH__"!==e})),r=new Array(t.length/n),a=0;a<t.length/n;a++)r[a]={key:Me(t[a*n]),crossValue:e[t[a*n]],mainValue:e[t[a*n+1]],row:e};return r}))}(t,dt(t))),r=Pe(t),a=Rt(t),o=null;r.domain().length>2&&(o=ut(ot,lt).settings(t).scale(a).color(r));var i=(0,f.seriesSvgRepeat)().series(Ot(t,r)).orient("horizontal"),c=bt().pad([.1,.1]).padUnit("percent"),s=fe(t).settingName("mainValues").settingValue(t.mainValues[0].name).valueName("crossValue").paddingStrategy(c),l=fe(t).settingName("mainValues").settingValue(t.mainValues[1].name).valueName("mainValue").orient("vertical").paddingStrategy(c)(n),u=s(n),d=ht(i,t).orient("vertical"),p=de(u,l).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(d);p.xNice&&p.xNice(),p.yNice&&p.yNice();var g=vt().chart(p).settings(t).xScale(u.scale).yScale(l.scale),_=Mt().settings(t).xScale(u.scale).yScale(l.scale).color(r).data(n);e.datum(n).call(g),e.call(_),o&&e.call(o)}It.plugin={name:"X/Y Line",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Tooltip"]},selectMode:"toggle"};var Ft=It;function Dt(e,t){var n=function(e,t){var n=Ye(e);return t.map((function(e,t){var r={};return Object.keys(e).filter((function(e){return"__ROW_PATH__"!==e})).map((function(a){var o=a.split("|"),i=o[o.length-1],c=r[i]||0,s=c+e[a];return r[i]=s,{key:a,crossValue:n(e,t),mainValue:s,baseValue:c,row:e}}))}))}(t,ft(t)),r=Ne(t),a=ct().settings(t).scale(r),o=(0,f.seriesSvgRepeat)().series(function(e,t){var n=(0,f.seriesSvgArea)();return(n=n.decorate((function(e){e.style("fill",(function(e){return t(e[0].key)})).style("opacity",.5)}))).crossValue((function(e){return e.crossValue})).mainValue((function(e){return e.mainValue})).baseValue((function(e){return e.baseValue}))}(0,r).orient("vertical")),i=(0,f.seriesSvgRepeat)().series(Ot(t,r)).orient("vertical"),c=(0,f.seriesSvgMulti)().series([o,i]),s=fe(t).excludeType(C).settingName("crossValues").valueName("crossValue")(n),l=fe(t).settingName("mainValues").valueName("mainValue").excludeType(O).orient("vertical").include([0]).paddingStrategy(bt()),u=Vt(t,n).color(r),d=l(u.data()),p=u.haveSplit()?c:ht(c,t).orient("vertical"),g=de(s,d).axisSplitter(u).plotArea(p);g.yNice&&g.yNice();var _=vt().chart(g).settings(t).xScale(s.scale),h=Mt().settings(t).xScale(s.scale).yScale(d.scale).color(r).data(n);if(u.haveSplit()){var b=l(u.altData());g.altAxis(b),h.data(u.data()).altDataWithScale({yScale:b.scale,data:u.altData()})}e.datum(u.data()).call(_),e.call(h),e.call(a)}Dt.plugin={name:"Y Area",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0};var Yt=Dt;function Bt(e,t){var n=function(e,t){var n={stack:!1},r=Be(e,t,n).map((function(t){return We(e,t,n)}));return e.mainValues.length>1?r.reduce((function(e,t){return e.concat(t)})):r}(t,ft(t)),r=function(e){var t=e.data&&e.data.length>0?e.data[0]:{};return jt(Object.keys(t).filter((function(e){return"__ROW_PATH__"!==e})))}(t),a=Ne(t),o=st().settings(t).scale(r).color(a),i=(0,f.seriesSvgMulti)().mapping((function(e,t){return e[t]})).series(n.map((function(e){return function(e,t,n,r){var a=(0,f.seriesSvgPoint)().size(100),o=e.colorStyles&&e.colorStyles.opacity;return r&&a.type(r(t)),a.decorate((function(e){e.style("stroke",(function(e){return Re(n(e.colorValue||t))})).style("fill",(function(e){return Ie(n(e.colorValue||t),o)}))})),a.crossValue((function(e){return e.crossValue})).mainValue((function(e){return e.mainValue}))}(t,e.key,a,r)}))),c=bt().pad([.05,.05]).padUnit("percent"),s=fe(t).excludeType(C).settingName("crossValues").valueName("crossValue")(n),l=fe(t).settingName("mainValues").valueName("mainValue").orient("vertical").paddingStrategy(c),u=Vt(t,n).color(a),d=l(u.data()),p=u.haveSplit()?i:ht(i,t).orient("vertical"),g=de(s,d).axisSplitter(u).plotArea(p);g.yNice&&g.yNice();var _=vt().chart(g).settings(t).xScale(s.scale),h=Mt().settings(t).xScale(s.scale).yScale(d.scale).color(a).data(n);if(u.haveSplit()){var b=l(u.altData());g.altAxis(b),h.data(u.data()).altDataWithScale({yScale:b.scale,data:u.altData()})}e.datum(u.data()).call(_),e.call(h),o&&e.call(o)}Bt.plugin={name:"Y Scatter",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0};var Ht=Bt;function Wt(e,t){return Be(e,t,{excludeEmpty:!0}).map((function(t){return function(e,t){var n=Ye(e),r=t.map((function(r,a){return{crossValue:n(r,a),mainValues:e.mainValues.map((function(e){return r[e.name]})),x:r[e.mainValues[0].name],y:r[e.mainValues[1].name],colorValue:e.realValues[2]?r[e.realValues[2]]:void 0,size:e.realValues[3]?r[e.realValues[3]]:void 0,key:t.key,row:r}}));return r.key=t.key,r}(e,t)}))}function Ut(e,t,n,r){var a=qt(t,n,r),o=e.colorStyles.gradient.full;if(a[0]>=0)o=e.colorStyles.gradient.positive;else if(a[1]<=0)o=e.colorStyles.gradient.negative;else{var i=Math.max(-a[0],a[1]);a=[-i,i]}var c=Gt(o);return(0,d.cJy)(c).domain(a)}var qt=function(e,t,n){return n||W().valueName(t).pad([0,0])(e)},Gt=function(e){var t=e.slice(1).map((function(t,n){return(0,d.sXR)(e[n][1],t[1])}));return function(n){var r=e.findIndex((function(t,r){return r<e.length-1&&n<=e[r+1][0]&&n>t[0]}));if(-1===r)return n<=e[0][0]?e[0][1]:e[e.length-1][1];var a=t[r],o=e[r][0],i=e[r+1][0];return a((n-o)/(i-o))}};function Kt(){var e=null;function t(t){var n=_e(t,"div.legend-container",(function(){return t.append("div").attr("class","legend-container legend-color").style("z-index","2")})),r=n.node().getBoundingClientRect(),a=r.width,o=r.height,i=(0,d.tiA)().domain([0,1]).range([0,a]),c=e.copy().nice().domain(),s=(0,f.extentLinear)().pad([.1,.1]).padUnit("percent")(c),l=s[0],u=s[1],p=(0,d.w6H)(l,u,(u-l)/o),g=(0,d.BYU)().domain(s).range([o,0]),_=(0,f.autoBandwidth)((0,f.seriesSvgBar)()).xScale(i).yScale(g).crossValue(0).baseValue((function(e,t){return p[Math.max(0,t-1)]})).mainValue((function(e){return e})).decorate((function(t){t.selectAll("path").style("fill",(function(t){return e(t)}))})),h=c[0]<0&&c[1]>0?0:Math.round((c[1]+c[0])/2),b=[].concat(c,[h]),v=(0,f.axisRight)(g).tickValues(b).tickSizeOuter(0).tickFormat((function(e){return B(e)})),m=_e(n,"svg",(function(){return n.append("svg")})).style("width",a).style("height",o),w=_e(m,"g",(function(){return m.append("g")})).datum(p).call(_),y=Math.abs(w.node().getBBox().x);_e(m,"#legend-axis",(function(){return m.append("g").attr("id","legend-axis")})).attr("transform","translate("+y+")").datum(p).call(v).select(".domain").attr("visibility","hidden")}return t.scale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t}function Xt(e,t){var n=Wt(t,dt(t)),r=Rt(t),a=t.realValues.length<=2||null===t.realValues[2],o=null,i=null;a?(o=Pe(t),i=st().settings(t).scale(r).color(a?o:null)):(o=Ut(t,n,"colorValue"),i=Kt().scale(o));var c=t.realValues[3]?function(e,t,n,r){return(0,d.BYU)().domain(qt(t,n,r))}(0,n,"size").range([10,1e4]):null,s=function(e,t){var n=e[0],r=e[1],a=t[0],o=t[1],i=(o-r)/(a-n),c=o-i*a;return function(e){var t=e.node(),n=Math.min(t.clientWidth,t.clientHeight);return Math.min(o,Math.max(r,i*n+c))}}([600,.1],[1600,1])(e),l=(0,f.seriesCanvasMulti)().mapping((function(e,t){return e[t]})).series(n.map((function(e){return function(e,t,n,r,a,o){void 0===o&&(o=1);var i=(0,f.seriesCanvasPoint)().crossValue((function(e){return e.x})).mainValue((function(e){return e.y}));return n&&i.size((function(e){return Math.round(o*n(e.size))})),a&&i.type(a(t)),i.decorate((function(n,a){var o=r(void 0!==a.colorValue?a.colorValue:t),i=e.colorStyles&&e.colorStyles.opacity;n.strokeStyle=Re(o),n.fillStyle=Ie(o,i)})),i}(t,e.key,c,o,r,s)}))),u=function(){return fe(t).settingName("mainValues").paddingStrategy(bt()).pad([.1,.1])},p=u().settingValue(t.mainValues[0].name).valueName("x")(n),g=u().orient("vertical").settingValue(t.mainValues[1].name).valueName("y")(n),_=pe(p,g).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(ht(l,t).canvas(!0));_.xNice&&_.xNice(),_.yNice&&_.yNice();var h=vt().chart(_).settings(t).xScale(p.scale).yScale(g.scale).canvas(!0),b=Mt().scaleFactor(s).settings(t).canvas(!0).xScale(p.scale).xValueName("x").yValueName("y").yScale(g.scale).color(a&&o).size(c).data(n);e.datum(n).call(h),e.call(b),i&&e.call(i)}Xt.plugin={name:"X/Y Scatter",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Color","Size","Tooltip"]},selectMode:"toggle"};var Jt=Xt;function $t(e,t){var n=function(e,t){var n=Ye(e),r=M(e).excludeType(C).settingName("splitValues")(),a=[];return t.forEach((function(e,t){var o=n(e,t);Object.keys(e).filter((function(e){return"__ROW_PATH__"!==e})).forEach((function(t){var n=function(e){var t=e.split("|");return t.pop(),t.join("|")}(t);a.push({crossValue:o,mainValue:r===L?new Date(n):n,colorValue:e[t],row:e})}))})),a}(t,ft(t)),r=Ut(t,n,"colorValue"),a=function(e,t){var n=(0,f.seriesCanvasHeatmap)();return n.decorate((function(e,n){e.fillStyle=t(n.colorValue)})),(0,f.autoBandwidth)(n).xValue((function(e){return e.crossValue})).yValue((function(e){return e.mainValue})).colorValue((function(e){return e.colorValue})).colorInterpolate(t.interpolator()).widthFraction(1)}(0,r),o=Kt().scale(r),i=fe(t).excludeType(C).settingName("crossValues").valueName("crossValue")(n),c=fe(t).excludeType(C).settingName("splitValues").valueName("mainValue").orient("vertical")(n),s=pe(i,c).plotArea(ht(a,t).canvas(!0));s.xPaddingInner&&(s.xPaddingInner(0),s.xPaddingOuter(0),a.xAlign("right")),s.yPaddingInner&&(s.yPaddingInner(0),s.yPaddingOuter(0),a.yAlign("top"));var l=vt().chart(s).settings(t).xScale(i.scale).yScale(c.scale).canvas(!0),u=Mt().settings(t).canvas(!0).xScale(i.scale).yScale(c.scale).color(r).data(n);e.datum(n).call(l),e.call(o),e.call(u)}$t.plugin={name:"Heatmap",category:"Hierarchial Chart",max_cells:5e4,max_columns:500,render_warning:!0};var Qt=$t;function en(e,t){return Be(e,t,{excludeEmpty:!0}).map((function(t){return function(e,t){var n=Ye(e),r=function(n){return t[n<t.length-1?n+1:n][e.mainValues[0].name]},a=t.map((function(a,o){var i=e.mainValues.length>=1?a[e.mainValues[0].name]:void 0,c=e.mainValues.length>=2?a[e.mainValues[1].name]:r(o);return{crossValue:n(a,o),mainValues:e.mainValues.map((function(e){return a[e.name]})),openValue:i,closeValue:c,highValue:e.mainValues.length>=3?a[e.mainValues[2].name]:Math.max(i,c),lowValue:e.mainValues.length>=4?a[e.mainValues[3].name]:Math.min(i,c),key:t.key,row:a}}));return a.key=t.key,a}(e,t)}))}var tn=function(e){return function(t,n){var r=en(n,dt(n)),a=(0,f.indicatorBollingerBands)().value((function(e){return e.openValue})),o=r.map((function(e){var t=a(e);return e.map((function(e,n){return Object.assign({bollinger:t[n]},e)}))})),i=r.map((function(e){return e.key})).concat(n.hideKeys?n.hideKeys:[]).sort(),c=je().domain(i).settings(n).mapFunction(Fe(1))(),s=ct().settings(n).scale(i.length>1?c:null),l=function(e,t,n){var r=n.domain(),a=je().domain(r).settings(e).defaultColors([e.colorStyles["series-2"]]).mapFunction(Fe(.5))(),o=je().settings(e).domain(r)(),i=t().crossValue((function(e){return e.crossValue})).openValue((function(e){return e.openValue})).highValue((function(e){return e.highValue})).lowValue((function(e){return e.lowValue})).closeValue((function(e){return e.closeValue})).decorate((function(e,t){var r=function(e){return e.closeValue>=e.openValue}(t)?n(t.key):a(t.key);e.fillStyle=r,e.strokeStyle=r})),c=(0,f.seriesCanvasLine)().mainValue((function(e){return e.bollinger.average})).crossValue((function(e){return e.crossValue})).decorate((function(e,t){e.strokeStyle=o(t[0].key)})),s=(0,f.seriesCanvasArea)().mainValue((function(e){return e.bollinger.upper})).baseValue((function(e){return e.bollinger.lower})).crossValue((function(e){return e.crossValue})).decorate((function(e,t){e.fillStyle=Fe(.25)(o(t[0].key))}));return(0,f.seriesCanvasMulti)().series([s,i,c])}(n,e,c),u=(0,f.seriesCanvasMulti)().mapping((function(e,t){return e[t]})).series(o.map((function(){return l}))),d=bt().pad([.1,.1]).padUnit("percent"),p=fe(n).settingName("crossValues").valueName("crossValue")(o),g=fe(n).settingName("mainValues").valueNames(["lowValue","highValue"]).orient("vertical").paddingStrategy(d)(o),_=pe(p,g).plotArea(ht(u,n).orient("vertical").canvas(!0));_.yNice&&_.yNice();var h=vt().chart(_).settings(n).xScale(p.scale).onChange((function(e){var t=o.map((function(t){return t.filter((function(t){return t.crossValue>=e.xDomain[0]&&t.crossValue<=e.xDomain[1]}))}));_.yDomain(g.domainFunction(t))})).canvas(!0),b=Mt().settings(n).xScale(p.scale).yScale(g.scale).yValueName("closeValue").color(c).data(o).canvas(!0);t.datum(o).call(h),t.call(b),t.call(s)}},nn=tn(f.seriesCanvasOhlc);nn.plugin={name:"OHLC",category:"Y Chart",max_cells:3500,max_columns:50,render_warning:!0,initial:{type:"number",count:4,names:["Open","Close","High","Low"]},selectMode:"toggle"};var rn=nn,an=tn(f.seriesCanvasCandlestick);an.plugin={name:"Candlestick",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{type:"number",count:4,names:["Open","Close","High","Low"]},selectMode:"toggle"};var on=an;function cn(e,t){if(e.realValues.length>1&&null!==e.realValues[1]){var n,r=e.realValues[1];return"string"===(null==(n=e.mainValues.find((function(e){return e.name===r})))?void 0:n.type)?ze(e,t.map((function(e){return e.data})).filter((function(e){return e.height>0})).map((function(e){return sn(e)})).reduce((function(e,t){return e.concat(t)}))):Ut(e,null,null,function(e){var t=function(e){return function(t,n){return void 0===t?n:void 0===n?t:e(t,n)}};return e.reduce((function(e,n){return[t(Math.min)(e[0],n[0]),t(Math.max)(e[1],n[1])]}),[void 0,void 0])}(t.map((function(e){return e.extents}))))}}function sn(e,t){return void 0===t&&(t=[]),e.children&&e.children.length>0?e.children.forEach((function(e){return t.concat(sn(e,t))})):e.data.color&&t.push(e.data.color),t}function ln(e){var t={},n=e.realValues.map((function(t){return null===t?null:e.mainValues.find((function(e){return e.name===t}))}));return e.data.forEach((function(r,a){var o=r.__ROW_PATH__;(function(e){var t=[];return Object.keys(e).forEach((function(e){if("__ROW_PATH__"!==e){var n=e.split("|").slice(0,-1).join("|");t.includes(n)||t.push(n)}})),t})(r).forEach((function(i){var c;t[i]||(t[i]=[]),c=t[i],o.forEach((function(t,s){var l=c.find((function(e){return e.name===t}));if(l||(l={name:t,children:[]},c.push(l)),e.realValues.length>1&&null!==e.realValues[1]){var u=s===o.length-1,f=un(u?r:e.agg_paths[a][s+1]||r,e.mainValues[1],i);void 0!==f&&(l.color=f)}if(e.realValues.length>2&&null!==e.realValues[2]){l.tooltip=[];for(var d=2;d<e.realValues.length;++d)l.tooltip.push(un(r,n[d],i))}if(s===o.length-1&&(l.name=o.slice(-1)[0],o.length===e.crossValues.length)){var p=un(r,e.mainValues[0],i);l.size=p>0?p:0}c=l.children}))}))})),Object.entries(t).map((function(t){var n={name:"root",children:t[1]},r=(0,d.bT9)(n).sum((function(e){return e.size})),a=(0,d.uKc)().size([2*Math.PI,r.height+1])(r);return a.each((function(n){n.current=n,n.mainValues=1===e.realValues.length||null===e.realValues[1]&&null===e.realValues[2]?n.value:[n.value,n.data.color].concat(n.data.tooltip||[]).filter((function(e){return void 0!==e})),n.crossValue=n.ancestors().slice(0,-1).reverse().map((function(e){return e.data.name})),n.key=t[0],n.label=we(e.crossValues[n.depth-1<0?0:n.depth-1].type,n.data.name)})),{split:t[0],data:a,extents:fn(e,t)}}))}var un=function(e,t,n){return n.length?e[n+"|"+t.name]:e[t.name]};function fn(e,t){var n=t[0],r=t[1];if(e.realValues.length>1&&null!==e.realValues[1])return[Math.min.apply(Math,e.data.map((function(t){return un(t,e.mainValues[1],n)}))),Math.max.apply(Math,r.map((function(e){return e.color})))]}var dn=function(e){return(0,d.Nb1)().startAngle((function(e){return e.x0})).endAngle((function(e){return e.x1})).padAngle((function(e){return Math.min((e.x1-e.x0)/2,.005)})).padRadius(e).innerRadius((function(t){return Math.max(1,(t.y0-1)*e)})).outerRadius((function(t){return Math.max((t.y0-1)*e,(t.y1-1)*e-1)}))},pn=function(e){return e.y0>=1&&e.x1>e.x0},gn=function(e){return e.y1<=3&&e.y0>=1&&(e.y1-e.y0)*(e.x1-e.x0)>.06};function _n(e,t){var n=(e.x0+e.x1)/2*180/Math.PI;return"rotate("+(n-90)+") translate("+(e.y0-1+(e.y1-1))/2*t+",0) rotate("+(n<180?0:180)+")"}function hn(e,t){var n=this,r=this.getBBox().width;r>t&&function(){for(var a=e.label,o=(0,d.Ys)(n);r>t;)a=a.substring(0,a.length-1),o.text((function(){return a})),r=n.getBBox().width;o.text((function(){return a.substring(0,a.length-3).replace(/\s+$/,"")+"..."}))}()}function bn(){var e=null,t=null,n=null,r=null,a=null,o=function(o){var i=o.selectAll("g.segment").data(n.descendants().slice(1)),c=i.enter().append("g").attr("class","segment");c.append("path"),c.append("text").attr("class","segment").attr("dy","0.35em");var s=c.merge(i),l=s.select("path").attr("fill-opacity",(function(e){return pn(e.current)?1:0})).attr("user-select",(function(e){return pn(e.current)?"initial":"none"})).style("pointer-events",(function(e){return pn(e.current)?"initial":"none"})).attr("d",(function(e){return dn(a)(e.current)}));r&&l.style("fill",(function(e){return r(e.data.color)}));var u=s.select("text").attr("fill-opacity",(function(e){return+gn(e.current)})).attr("transform",(function(e){return _n(e.current,a)})).text((function(e){return e.label})).each((function(e){hn.call(this,e,a)})),f=o.select("text.parent"),p=o.select("circle").attr("r",a).datum(n),g=function(e,t,n,r,a,o,i,c,s){return function(l,u){s.sunburstLevel[c]=l.data.name,l.parent?(n.datum(l.parent),n.style("cursor","pointer"),r.html("&#8682; "+l.label)):(n.datum(e),n.style("cursor","default"),r.html("")),e.each((function(e){return e.target={x0:2*Math.max(0,Math.min(1,(e.x0-l.x0)/(l.x1-l.x0)))*Math.PI,x1:2*Math.max(0,Math.min(1,(e.x1-l.x0)/(l.x1-l.x0)))*Math.PI,y0:Math.max(0,e.y0-l.depth),y1:Math.max(0,e.y1-l.depth)}}));var f=t.transition().duration(u?0:750);a.transition(f).tween("data",(function(e){var t=(0,d.sXR)(e.current,e.target);return function(n){return e.current=t(n)}})).filter((function(e){return+this.getAttribute("fill-opacity")||pn(e.target)})).attr("fill-opacity",(function(e){return pn(e.target)?1:0})).attr("user-select",(function(e){return pn(e.target)?"initial":"none"})).style("pointer-events",(function(e){return pn(e.target)?"initial":"none"})).attrTween("d",(function(e){return function(){return dn(i)(e.current)}})),o.filter((function(e){return+this.getAttribute("fill-opacity")||gn(e.target)})).transition(f).attr("fill-opacity",(function(e){return+gn(e.target)})).attrTween("transform",(function(e){return function(){return _n(e.current,i)}}))}}(n,o,p,f,l,u,a,t,e);if(e.sunburstLevel){var _=n.descendants().find((function(n){return n.data.name===e.sunburstLevel[t]}));_&&g(_,!0)}else e.sunburstLevel={};p.on("click",(function(e){return g(e,!1)})),l.filter((function(e){return e.children})).style("cursor","pointer").on("click",(function(e){return g(e,!1)}))};return o.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.split=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.data=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.color=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o.radius=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],o):a},o}function vn(){var e="element-prefix-unset",t=null,n=null,r=null,a=null,o=null,i=function(i){var c=_e(i,"div.inner-container",(function(){return i.append("div").attr("class","inner-container")})),s=c.node().getBoundingClientRect(),l=s.height,u=s.width-0,f=i.datum(),d=Math.max(1,Math.min(f.length,Math.floor(u/300))),p=Math.ceil(f.length/d);l/p>.75*(o={width:u/Math.max(d,1),height:Math.min(l,Math.max(l/p,u/Math.max(d,1)))}).height&&(o.height=l/p),f.length>1?(c.style("grid-template-columns","repeat("+d+", "+100/d+"%)"),c.style("grid-template-rows","repeat("+p+", "+o.height+"px)")):(c.style("grid-template-columns","repeat(1, 100%)"),c.style("grid-template-rows","repeat(1, 100%)")),(r=c.selectAll("div."+e+"-container").data(f,(function(e){return e.split}))).exit().remove(),n=r.enter().append("div").attr("class",e+"-container"),a=n.append("div").attr("class","title-container").style("text-align","center").attr("display","inline-block").append("text").attr("class","title").style("text-align","left"),t=n.append("svg").append("g").attr("class",e)};return i.elementsPrefix=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.chartContainer=function(){return t},i.chartEnter=function(){return n},i.chartDiv=function(){return r},i.chartTitle=function(){return a},i.containerSize=function(){return o},i}function mn(e,t){if(0!==t.crossValues.length){var n=ln(t),r=cn(t,n),a=vn().elementsPrefix("sunburst");if(e.datum(n).call(a),r){var o,i=t.realValues[1];if("string"===(null==(o=t.mainValues.find((function(e){return e.name===i})))?void 0:o.type)){var c=ct().settings(t).scale(r);e.call(c)}else{var s=Kt().scale(r);e.call(s)}}var l=a.chartContainer(),u=a.chartEnter(),f=a.chartDiv(),p=a.chartTitle(),g=a.containerSize();p.each((function(e,t,n){return(0,d.Ys)(n[t]).text(e.split)})),l.append("circle").attr("fill","none").style("pointer-events","all"),l.append("text").attr("class","parent"),u.merge(f).select("svg").select("g.sunburst").attr("transform","translate("+g.width/2+", "+g.height/2+")").each((function(e){var n=e.split,a=e.data,o=(0,d.Ys)(this),i=this.parentNode.getBoundingClientRect(),c=i.width,s=i.height,l=(Math.min(c,s)-24)/(2*t.crossValues.length);bn().settings(t).split(n).data(a).color(r).radius(l)(o),Te().settings(t)(o.selectAll("g.segment"))}))}else console.warn("Unable to render a chart in the absence of any groups.")}mn.plugin={name:"Sunburst",category:"Hierarchial Chart",max_cells:7500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var wn=mn;function yn(e,t){var n;if(!(e.realValues.length<1||null===e.realValues[1]||void 0===e.realValues[1])){var r=e.realValues[1],a=t.filter((function(e){return e.height>0})).map((function(e){return xn(e)})).reduce((function(e,t){return e.concat(t)}));return"string"===(null==(n=e.mainValues.find((function(e){return e.name===r})))?void 0:n.type)?ze(e,a):Ut(e,null,null,[Math.min.apply(Math,a),Math.max.apply(Math,a)])}}function xn(e,t){return void 0===t&&(t=[]),e.children&&e.children.length>0?e.children.forEach((function(e){return t.concat(xn(e,t))})):e.data.color&&t.push(e.data.color),t}var kn=function(e){return!(!e.target||!e.target.textAttributes)},Vn=function(e,t,n){e.selectAll("text").each((function(e,r){var a=Nn(e,t,n);this.style=a}));var r=An(e);On(r),En(r)},En=function(e){var t=function(e){return e.getBoundingClientRect()},n=[];e.selectAll("text").filter((function(e,t,n){return(0,d.Ys)(n[t]).attr("style")===zn.high})).each((function(e,t,r){return n.push(r[t])})),e.selectAll("text").filter((function(e,t,n){return(0,d.Ys)(n[t]).attr("style")===zn.low})).each((function(e,r,a){var o=a[r];n.filter((function(e){return be("x",t(e),t(o))&&be("y",t(e),t(o),-2)})).forEach((function(){return(0,d.Ys)(o).attr("dy",Number((0,d.Ys)(o).attr("dy"))+14)}))}))},Zn=function(e){return(0,d.Ys)(e).style("opacity",null)},Sn={top:1,mid:.7,lower:0},An=function(e){return e.filter((function(e,t,n){return(0,d.Ys)(n[t]).selectAll("text").attr("style")!==zn.zero}))},Tn=function(e){return e.selectAll("text").each((function(e,t,n){return Cn(n[t])}))},On=function(e){return e.selectAll("text").each((function(e,t,n){return Ln(n[t])}))},Ln=function(e){var t=(0,d.Ys)(e),n=e.getBoundingClientRect();t.attr("dx",0-n.width/2).attr("dy",0+n.height/4)},Cn=function(e){var t=e.parentNode.childNodes[0],n=e.getBBox(),r=t.getBBox();Mn(e,r,n)||(0,d.Ys)(e).attr("style",(0,d.Ys)(e).attr("style"))},Mn=function(e,t,n){var r=Math.min(t.height/n.height,t.width/n.width);if(r<1){var a=parseInt((0,d.Ys)(e).style("font-size")),o=Math.floor(a*r);return a>7&&o>7?((0,d.Ys)(e).style("font-size",o+"px"),Ln(e)):((0,d.Ys)(e).style("font-size",null),(0,d.Ys)(e).style("opacity","0")),!0}return!1},Nn=function(e,t,n){if(!n.filter((function(e){return""!==e})).every((function(t){return e.crossValue.includes(t)})))return zn.zero;switch(e.depth){case t+1:return zn.high;case t+2:return zn.low;default:return zn.zero}},zn={high:"font-size:14px;z-index:5;pointer-events: none;",low:"font-size:8px;opacity:0.7;z-index:4;",zero:"font-size:0px;opacity:0;z-index:4;"},Pn=function(e,t){var n=(0,d.pNI)().size([e,t]).paddingInner((function(e){return 1+2*(e.height-1)}));return n.tile(d.wLP),n};function jn(e,t,n,r,a,o){(function(e,t,n,r,a){var o={x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0},i={width:a.x1-a.x0,height:a.y1-a.y0},c={width:i.width/o.width,height:i.height/o.height};n.each((function(e){var n=(e.x0-o.x)*c.width,a=(e.y0-o.y)*c.height,i=Xn(e)*c.width,s=Jn(e)*c.height,l=function(e,t){return t.every((function(t){return e.crossValue.includes(t)}))}(e,t)&&e.data.name!==t[r-1];e.mapLevel[r]={x0:n,x1:i+n,y0:a,y1:s+a,visible:l,opacity:l?1:0}})),e.mapLevel[r].levelRoot=!0})(e,t,n,r,a),e.mapLevel[r].levelRoot=!0,function(e,t,n,r){var a=Pn(t,n)((0,d.bT9)(e.data).sum((function(e){return e.size}))).descendants(),o=e.descendants();a.forEach((function(e,t){o[t].mapLevel[r].x0=a[t].x0,o[t].mapLevel[r].x1=a[t].x1,o[t].mapLevel[r].y0=a[t].y0,o[t].mapLevel[r].y1=a[t].y1}))}(e,o.node().getBoundingClientRect().width,o.node().getBoundingClientRect().height,r),In(n,r)}var Rn=function(e,t){e.each((function(e,n,r){var a=(0,d.Ys)(r[n]).selectAll("text");e.mapLevel[t].textAttributes={dx:a.attr("dx"),dy:a.attr("dy"),class:a.attr("class"),"font-size":a.style("font-size")}}))};function In(e,t){e.selectAll("text").each((function(e,n,r){var a=(0,d.Ys)(r[n]),o=(0,d.Ys)(r[n]).datum(),i=a.attr("class");o.mapLevel[t].textLockedAt={opacity:Sn[i]}}))}function Fn(e,t,n,r,a,o,i,c,s,l){if(e.children){a.treemapLevel<e.depth?a.treemapRoute.push(e.crossValue):a.treemapRoute.pop(),a.treemapLevel=e.depth;var u=e.crossValue;(!e.mapLevel[a.treemapLevel]||!e.mapLevel[a.treemapLevel].levelRoot)&&jn(e,u,n,a.treemapLevel,c,o),Dn(e,t,n,r,a,o,i,c,a.treemapLevel,u,s,l)}}function Dn(e,t,n,r,a,o,i,c,s,l,u,f,p,g){void 0===p&&(p=500),void 0===g&&(g=!0);var _=e.parent,h=i.transition("main transition").duration(p).ease(d.oSY);n.each((function(e){return e.target=e.mapLevel[s]})),kn(e)||Wn(n,u),n.transition(h).tween("data",(function(e){var t=(0,d.sXR)(e.current,e.target);return function(n){return e.current=t(n)}})).styleTween("opacity",(function(e){return function(){return e.current.opacity}})).attrTween("pointer-events",(function(e){return function(){return e.target.visible?"all":"none"}})),t.transition(h).filter((function(e){return e.target.visible})).styleTween("x",(function(e){return function(){return e.current.x0+"px"}})).styleTween("y",(function(e){return function(){return e.current.y0+"px"}})).styleTween("width",(function(e){return function(){return e.current.x1-e.current.x0+"px"}})).styleTween("height",(function(e){return function(){return e.current.y1-e.current.y0+"px"}})),r.transition(h).filter((function(e){return e.target.visible})).attrTween("x",(function(e){return function(){return e.current.x0+Xn(e.current)/2}})).attrTween("y",(function(e){return function(){return e.current.y0+Jn(e.current)/2}})).end().catch((function(){return Un(n)})).then((function(){kn(e)||(En(b),Tn(b),function(e,t,n){Yn.apply(this,arguments)}(r,i,p),g&&Rn(n,s),Un(n,u,_))})).catch((function(e){console.error("Exception completing promises after main transition",e),Un(n,u,_)})),kn(e)?function(e){e.each((function(e,t,n){(0,d.Ys)(n[t]).selectAll("text").attr("dx",e.target.textAttributes.dx).attr("dy",e.target.textAttributes.dy).attr("style",e.target.textAttributes.style)}))}(n):(r.each((function(e,t,n){return function(e){return(0,d.Ys)(e).style("opacity",Sn[(0,d.Ys)(e).attr("class")])}(n[t])})),Vn(n,s,l));var b=An(n);_?u.hide(!1).text(e.label).onClick((function(){Fn(_,t,n,r,a,o,i,c,u,f);var e=o.node().getRootNode().host.parentElement;Ae(e,_,f)}))():u.hide(!0)()}function Yn(){return(Yn=(0,l.Z)((0,a.Z)().mark((function e(t,n,r){var o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=400),o=n.transition("text fade transition").duration(r).ease(d.oSY),e.next=4,t.transition(o).filter((function(e){return e.target.visible})).tween("data",(function(e,t,n){var r=n[t],a=(0,d.sXR)(Bn(e),Hn(r));return function(t){return e.current.opacity=a(t)}})).styleTween("opacity",(function(e){return function(){return e.current.opacity}})).end().catch((function(e){return console.error("Exception in text fade transition",e)})).then((function(){return t.each((function(e,t,n){return Zn(n[t])}))}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bn=function(e){return e.target.textLockedAt.opacity},Hn=function(e){return Sn[(0,d.Ys)(e).attr("class")]},Wn=function(e,t){t.deactivate(!0),e.each((function(e,t,n){(0,d.Ys)(n[t]).selectAll("rect").style("pointer-events","none")}))},Un=function(e,t){t&&t.deactivate(!1),e.each((function(e,t,n){(0,d.Ys)(n[t]).selectAll("rect").style("pointer-events",null)}))};var qn="leafnode",Gn="branchnode",Kn="rootnode",Xn=function(e){return e.x1-e.x0},Jn=function(e){return e.y1-e.y0},$n=function(e,t){return 0===t.depth?Kn:function(e,t){return t.depth===e}(e,t)?qn:Gn};function Qn(){var e=null,t=null,n=null,r=null,a=null,o=null,i=function(i){o=function(e){var t=null,n=null,r=!0,a=!1,o=_e(e,".parent-controls",(function(){return e.append("div").attr("class","parent-controls").style("display",r?"none":"").html('<button id="goto-parent">Goto parent</button>\n')})),i=function(){o.style("display",r?"none":"").select("#goto-parent").style("pointer-events",a?"none":null).html("\u21ea "+n).on("click",(function(){return t()}))};return i.deactivate=function(){if(!arguments.length)return a;a=arguments.length<=0?void 0:arguments[0];var e=o.select("#goto-parent");return a?e.style("pointer-events","none"):e.style("pointer-events",null),i},i.hide=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.text=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.onClick=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i}(a),o();var c=n.height;e.treemapLevel||(e.treemapLevel=0),e.treemapRoute||(e.treemapRoute=[]),Pn(a.node().getBoundingClientRect().width,a.node().getBoundingClientRect().height)(n);var s=i.selectAll("g").data(n.descendants()),l=s.enter().append("g");l.append("rect"),l.append("text");var u=l.merge(s).sort((function(e,t){return t.depth-e.depth})),f=u.select("rect").attr("class",(function(e){return"treerect "+$n(c,e)})).style("x",(function(e){return e.x0})).style("y",(function(e){return e.y0})).style("width",(function(e){return Xn(e)})).style("height",(function(e){return Jn(e)}));f.style("fill",(function(e){return $n(c,e)===qn?e.data.color?r(e.data.color):t.colorStyles.series:"transparent"}));var d=u.filter((function(e){return 0!==e.value})).select("text").attr("x",(function(e){return e.x0+Xn(e)/2})).attr("y",(function(e){return e.y0+Jn(e)/2})).text((function(e){return e.label})),p=f.filter((function(e){return 0===e.crossValue.length})).datum();(function(e,t){e.each((function(e){e.mapLevel=[],e.mapLevel[0]={x0:e.x0,x1:Xn(e)+e.x0,y0:e.y0,y1:Jn(e)+e.y0,visible:!0,opacity:1}})),t.mapLevel[0].levelRoot=!0,In(e,0)})(u,p),Vn(u,0,[]),Tn(An(u)),Rn(u,0),0===e.treemapRoute.length&&e.treemapRoute.push(p.crossValue),f.filter((function(e){return e.children})).on("click",(function(n,r){return Fn(r,f,u,d,e,a,i,p,o,t)})),function(e,t,n,r,a,o,i,c,s){if(r.treemapLevel>0){var l=i.crossValue;Dn(i,e,t,n,r,a,o,i,0,l,c,s,1,!1),r.treemapRoute.slice(1,r.treemapRoute.length).forEach((function(l){var u=t.filter((function(e){return e.crossValue===l})).datum(),f=u.crossValue;jn(u,f,t,u.depth,i,a),Dn(u,e,t,n,r,a,o,i,u.depth,f,c,s,1,!1)}))}}(f,u,d,e,a,i,p,o,t)};return i.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],i):e},i.data=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.color=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.container=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],i):a},i}function er(e,t){if(0!==t.crossValues.length){t.treemaps||(t.treemaps={});var n=ln(t),r=yn(t,n.map((function(e){return e.data})));r&&this._container.classList.add("has-legend");var a=vn().elementsPrefix("treemap");if(e.datum(n).call(a),r){var o,i=t.realValues[1];if("string"===(null==(o=t.mainValues.find((function(e){return e.name===i})))?void 0:o.type)){var c=ct().settings(t).scale(r);e.call(c)}else{var s=Kt().scale(r);e.call(s)}}var l=a.chartEnter(),u=a.chartDiv();a.chartTitle().each((function(e,t,n){return(0,d.Ys)(n[t]).text(e.split)})),l.merge(u).select("svg").select("g.treemap").each((function(e){var n=e.split,a=e.data,o=(0,d.Ys)(this);t.treemaps[n]||(t.treemaps[n]={}),Qn().settings(t.treemaps[n],t).data(a).container((0,d.Ys)((0,d.Ys)(this.parentNode).node().parentNode)).color(r)(o),Te().settings(t).centered(!0)(o.selectAll("g"))}))}else console.warn("Unable to render a chart in the absence of any groups.")}er.plugin={type:"Treemap",name:"Treemap",category:"Hierarchial Chart",max_cells:5e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var tr,nr,rr=[wt,Tt,zt,Ft,Yt,Ht,Jt,rn,on,er,wn,Qt],ar=function(e,t){if(!t.colorStyles){var n={scheme:[],gradient:{},interpolator:{},grid:{}},a=cr(e);n.series=a("--d3fc-local-series");for(var o=1;;o++){var i="series-"+o,c=a("--d3fc-local-"+i);if(!c)break;n[i]=c,n.scheme.push(c)}n.opacity=or(n.series),n.grid.gridLineColor=a(r||(r=(0,s.Z)(["--d3fc-gridline--color"]))),["full","positive","negative"].forEach((function(e){var t=a("--d3fc-local-"+e+"--gradient");n.gradient[e]=sr(t,n.opacity)})),t.colorStyles=n}},or=function(e){return(0,d.$_Y)(e).opacity},ir=function(e,t){var n=(0,d.$_Y)("#"+e);return n.opacity=t,n+""},cr=function(e){var t=getComputedStyle(e);return function(e){return null==t?void 0:t.getPropertyValue(e)}},sr=function(e,t){var n=(0,h.Q)(e)[0].colorStops;return n.map((function(e,r){return[e.length?e.length.value/100:r/(n.length-1),ir(e.value,t)]})).sort((function(e,t){return e[0]-t[0]}))},lr={initial:{type:"number",count:1},selectMode:"select"},ur=':host .chart{--d3fc-local-full--gradient: var(--d3fc-full--gradient, linear-gradient(#4d342f 0%, #e4521b 22.5%, #feeb65 42.5%, #f0f0f0 50%, #dcedc8 57.5%, #42b3d5 67.5%, #1a237e 100%));--d3fc-local-positive--gradient: var(--d3fc-positive--gradient, linear-gradient(#dcedc8 0%, #42b3d5 35%, #1a237e 100%));--d3fc-local-negative--gradient: var(--d3fc-negative--gradient, linear-gradient(#feeb65 100%, #e4521b 70%, #4d342f 0%))}:host .chart{--d3fc-local-series: var(--d3fc-series, rgba(31, 119, 180, .5));--d3fc-local-series-1: var(--d3fc-series-1, #0366d6);--d3fc-local-series-2: var(--d3fc-series-2, #ff7f0e);--d3fc-local-series-3: var(--d3fc-series-3, #2ca02c);--d3fc-local-series-4: var(--d3fc-series-4, #d62728);--d3fc-local-series-5: var(--d3fc-series-5, #9467bd);--d3fc-local-series-6: var(--d3fc-series-6, #8c564b);--d3fc-local-series-7: var(--d3fc-series-7, #e377c2);--d3fc-local-series-8: var(--d3fc-series-8, #7f7f7f);--d3fc-local-series-9: var(--d3fc-series-9, #bcbd22);--d3fc-local-series-10: var(--d3fc-series-10, #17becf)}:host .chart .series{fill:var(--d3fc-local-series)}:host .chart .series-1{fill:var(--d3fc-local-series-1)}:host .chart .series-2{fill:var(--d3fc-local-series-2)}:host .chart .series-3{fill:var(--d3fc-local-series-3)}:host .chart .series-4{fill:var(--d3fc-local-series-4)}:host .chart .series-5{fill:var(--d3fc-local-series-5)}:host .chart .series-6{fill:var(--d3fc-local-series-6)}:host .chart .series-7{fill:var(--d3fc-local-series-7)}:host .chart .series-8{fill:var(--d3fc-local-series-8)}:host .chart .series-9{fill:var(--d3fc-local-series-9)}:host .chart .series-10{fill:var(--d3fc-local-series-10)}:host{user-select:none}:host .chart{position:absolute;box-sizing:border-box;left:0;top:0;width:100%;height:100%;padding:15px;overflow:hidden}:host .chart.heatmap d3fc-group.cartesian-chart,:host .chart.treemap d3fc-group.cartesian-chart{grid-template-columns:minmax(0em,max-content) auto 1fr auto minmax(0em,max-content);grid-template-rows:minmax(0em,max-content) auto 1fr auto minmax(0em,max-content)}:host .chart .chart-label{display:none}:host .chart.heatmap{padding-right:120px}:host .chart.sunburst{padding:0;font-size:14px}:host .chart.sunburst .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto}:host .chart.sunburst .inner-container div{overflow:hidden}:host .chart.sunburst .inner-container .sunburst-container:not(:only-child) svg{transform:translateY(-27px)}:host .chart.sunburst .inner-container svg{width:100%;height:100%}:host .chart.sunburst .inner-container path{fill:var(--d3fc-series, rgba(31, 119, 180, .5))}:host .chart.sunburst .inner-container text.segment,:host .chart.sunburst .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels, #333333)}:host .chart.sunburst .inner-container div.title-container{margin-top:5px}:host .chart.has-legend{padding-right:120px}:host .chart.treemap .treemap-container{position:relative}:host .chart.treemap .treemap-container:not(:only-child){width:calc(100% - 12px);height:calc(100% - 12px)}:host .chart.treemap .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto}:host .chart.treemap .inner-container div{overflow:hidden}:host .chart.treemap .inner-container svg{width:100%;height:100%}:host .chart.treemap .inner-container .treerect{stroke:var(--d3fc-treedata-axis--lines, var(--d3fc-axis--lines, white));fill:var(--d3fc-series, rgba(31, 119, 180, .5))}:host .chart.treemap .inner-container .treerect:hover{cursor:pointer;stroke:var(--d3fc-treedata--hover-highlight, black);stroke-opacity:1}:host .chart.treemap .inner-container .rootnode{opacity:0;pointer-events:none;z-index:0}:host .chart.treemap .inner-container .branchnode{opacity:0}:host .chart.treemap .inner-container .branchnode:hover{fill-opacity:.1;opacity:1;fill:var(--d3fc-treedata--hover-highlight, black)}:host .chart.treemap .inner-container .leafnode{fill-opacity:.8}:host .chart.treemap .inner-container .leafnode:hover{fill-opacity:.5}:host .chart.treemap .inner-container #hidden{opacity:0;pointer-events:none;z-index:0}:host .chart.treemap .inner-container .top{font-size:14px;z-index:5;pointer-events:none}:host .chart.treemap .inner-container .mid{font-size:8px;opacity:.7;z-index:4}:host .chart.treemap .inner-container .lower{font-size:0px;opacity:0;z-index:4}:host .chart.treemap .inner-container text{fill:var(--d3fc-treedata--labels, #333333)}:host .chart.treemap .inner-container text.title{dominant-baseline:hanging}:host .chart.treemap .inner-container .parent-controls{position:absolute;top:15px;right:auto;left:30px;width:auto;z-index:4;transition:box-shadow 1s}:host .chart.treemap .inner-container .parent-controls:hover{box-shadow:2px 2px 6px #000;transition:box-shadow .2s}:host .chart .x-label{height:1.2em!important;line-height:1em!important}:host .chart .x-label,:host .chart .y-label{color:var(--d3fc-label--color, inherit);font-size:14px}:host .chart d3fc-canvas.plot-area{display:none}:host .chart.xyscatter d3fc-canvas.plot-area,:host .chart.xyline d3fc-canvas.plot-area,:host .chart.ohlc d3fc-canvas.plot-area,:host .chart.candlestick d3fc-canvas.plot-area,:host .chart.heatmap d3fc-canvas.plot-area{display:block}:host .chart .y-axis text,:host .chart .x-axis text{fill:var(--d3fc-axis-ticks--color, #505050);font-size:11px}:host .chart .y-axis path,:host .chart .x-axis path{stroke:var(--d3fc-axis--lines, #b4d2e1)}:host .chart .splitter-label{display:inline-block;margin:0 10px;cursor:pointer}:host .chart .splitter-label:after{margin-left:5px;color:var(--d3fc-axis--lines, #b4d2e1)}:host .chart .splitter-label:hover:after{color:var(--d3fc-axis-ticks--color, #505050)}:host .chart .splitter-label.disabled{cursor:default}:host .chart .splitter-label.disabled:after{color:#5050504d}:host .chart .y-label.left-label .splitter-label:after{font-family:var(--d3fc-y1-label--font-family, var(--button--font-family, inherit));content:var(--d3fc-y1-label--content, "\\1f847")}:host .chart .y-label.right-label .splitter-label:after{font-family:var(--d3fc-y2-label--font-family, var(--button--font-family, inherit));content:var(--d3fc-y2-label--content, "\\1f845")}:host .chart.ybar .y-axis path,:host .chart.yline .y-axis path,:host .chart.xyline .y-axis path,:host .chart.xyline .x-axis path,:host .chart.yarea .y-axis path,:host .chart.yscatter .y-axis path,:host .chart.xyscatter .y-axis path,:host .chart.xyscatter .x-axis path,:host .chart.xbar .x-axis path{visibility:hidden}:host .chart .y-label{white-space:nowrap}:host .chart .nearbyTip{fill:var(--d3fc-series, rgba(31, 119, 180, .5))}:host #dragHandles{position:absolute;top:0px;right:0px;left:auto;pointer-events:none}:host #dragHandles rect{pointer-events:all}:host .label rect{fill:none}:host .legend-container{position:absolute;top:15px;right:15px;left:auto;width:150px;height:280px}:host .legend-container.legend-color{width:90px;height:150px}:host .legend-container[borderbox-on-hover=true]{transition:box-shadow 1s}:host .legend-container[borderbox-on-hover=true]:hover{background-color:var(--d3fc-legend--background, #ffffff);box-shadow:0 2px 4px #0000001a;transition:box-shadow .2s,background-color .2s}:host .legend-container .legend{font-size:8pt;width:100%}:host .legend-container .legend .cell{cursor:pointer}:host .legend-container .legend .cell path{fill:var(--d3fc-series, rgba(31, 119, 180, .5));stroke:var(--d3fc-series, #1f77b4)}:host .legend-container .legend .cell.hidden path{fill:#cccccc80;stroke:#ccc}:host .legend-container .legend .cell.hidden circle{fill:#ccc!important}:host .legend-container text{fill:var(--d3fc-legend--text, #333333)}:host .legend-container .label:hover{fill:#22a0ce}:host .legend-container #legend-axis path{stroke:var(--d3fc-legend--text, #333333)}:host .legend-container .legend-controls{margin-left:12px}:host .legend-container .legend-controls #up-arrow,:host .legend-container .legend-controls #down-arrow{cursor:pointer;color:#1f77b4}:host .legend-container .legend-controls #up-arrow.disabled,:host .legend-container .legend-controls #down-arrow.disabled{cursor:default;color:#333}:host .heatmap .legend-container.legend-color{height:200px}:host .treemap .legend-container.legend-color{height:200px}:host .treemap .legend-container:not(.legend-color){width:100px}:host .zoom-controls{position:absolute;top:10px;left:0;width:100%;text-align:center}:host .zoom-controls button{-webkit-appearance:none;background:var(--plugin--background, #f7f7f7);border:1px solid var(--inactive--color, #cccccc);color:var(--d3fc-label--color, inherit);font-size:12px;padding:8px;opacity:.5;cursor:pointer}:host .zoom-controls button:hover{opacity:1}:host .parent-controls{position:absolute;top:30px;right:145px;width:100%;text-align:right}:host .parent-controls button{-webkit-appearance:none;background:#f7f7f7;border:1px solid #cccccc;padding:10px;opacity:.5;cursor:pointer}:host .parent-controls button:hover{background:#e6e6e6}:host div.tooltip{position:absolute;text-align:left;font-size:12px;font-weight:300;white-space:nowrap;padding:.5em;background:var(--d3fc-tooltip--background, #ffffff);color:var(--d3fc-tooltip--color, black);border:1px solid var(--d3fc-tooltip--border-color, #777777);box-shadow:var(--d3fc-tooltip--box-shadow, none);pointer-events:none}:host div.tooltip ul{margin:0;padding:0;list-style-type:none}\n'+(tr=document.querySelector("head").querySelectorAll("style"),nr=[],tr.forEach((function(e){-1!==e.innerText.indexOf("d3fc-")&&nr.push(e.innerText)})),nr.join("")),fr=["crossValues","mainValues","realValues","splitValues","filter","data","size","colorStyles","agg_paths","treemaps"];function dr(e){customElements.get("perspective-viewer").registerPlugin(e)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=new Set(t.length>0?t:rr.map((function(e){return e.plugin.name}))),rr.forEach((function(e){if(t.has(e.plugin.name)){var n=e.plugin.name.toLowerCase().replace(/[ \t\r\n\/]*/g,""),r="perspective-viewer-d3fc-"+n;customElements.define(r,function(t){function r(){var e;return(e=t.call(this)||this)._chart=null,e._settings=null,e.render_warning=!0,e}(0,i.Z)(r,t);var c=r.prototype;return c.connectedCallback=function(){this._initialized||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML="<style>"+ur+"</style>",this.shadowRoot.innerHTML+='<div id="container" class="chart"></div>',this._container=this.shadowRoot.querySelector(".chart"),this._initialized=!0)},c.render=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,n,r,o,i,c,s,l,f,d,p,g,_,h,b,v,m,w,y;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.createElement("canvas"),n=this.shadowRoot.querySelector("#container"),t.width=n.offsetWidth,t.height=n.offsetHeight,(r=t.getContext("2d")).fillStyle=window.getComputedStyle(this).getPropertyValue("--plugin--background")||"white",r.fillRect(0,0,t.width,t.height),o=window.getComputedStyle(this).getPropertyValue("color"),i=Array.from(this.shadowRoot.querySelectorAll("svg:not(#dragHandles)")),c=(0,u.Z)(i.reverse());case 6:if((s=c()).done){e.next=31;break}for(l=s.value,(f=document.createElement("img")).width=l.parentNode.offsetWidth,f.height=l.parentNode.offsetHeight,(d=l.cloneNode(!0)).hasAttribute("viewBox")||d.setAttribute("viewBox","0 0 "+f.width+" "+f.height),d.setAttribute("xmlns","http://www.w3.org/2000/svg"),p=(0,u.Z)(d.querySelectorAll("text"));!(g=p()).done;)g.value.setAttribute("fill",o);return _=(_=(new XMLSerializer).serializeToString(d)).replace(/[^\x00-\x7F]/g,""),h=new Promise((function(e,t){f.onload=e,f.onerror=t})),e.prev=16,f.src="data:image/svg+xml;base64,"+btoa(_),e.next=20,h;case 20:e.next=28;break;case 22:return e.prev=22,e.t0=e.catch(16),b=new Promise((function(e,t){f.onload=e,f.onerror=t})),f.src="data:image/svg+xml;utf8,"+_,e.next=28,b;case 28:r.drawImage(f,l.parentNode.offsetLeft,l.parentNode.offsetTop,f.width,f.height);case 29:e.next=6;break;case 31:for(v=Array.from(this.shadowRoot.querySelectorAll("canvas")),m=(0,u.Z)(v.reverse());!(w=m()).done;)y=w.value,r.drawImage(y,y.parentNode.offsetLeft,y.parentNode.offsetTop,y.width/window.devicePixelRatio,y.height/window.devicePixelRatio);return e.next=35,new Promise((function(e){return t.toBlob((function(t){return e(t)}))}),"image/png");case 35:return e.abrupt("return",e.sent);case 36:case"end":return e.stop()}}),e,this,[[16,22]])})));return function(){return e.apply(this,arguments)}}(),c.draw=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(t,n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!this.isConnected,e.t0){e.next=7;break}return e.next=4,this.parentElement.save();case 4:return this.config=e.sent,e.next=7,this.update(t,n,r,!0);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),c.update=function(){var t=(0,l.Z)((0,a.Z)().mark((function t(n,r,o,i){var c,s,l,u,f,d,p,g,_,h,b,v,m,w,y,x,k,V,E,Z,S,A=this;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===i&&(i=!1),this.isConnected){t.next=3;break}return t.abrupt("return");case 3:return c=this.parentElement,u=this.config.columns,f="Sunburst"!==e.plugin.name,s=r&&o?n.to_json({end_row:o,end_col:r,leaves_only:f}):r?n.to_json({end_col:r,leaves_only:f}):o?n.to_json({end_row:o,leaves_only:f}):n.to_json({leaves_only:f}),t.next=7,Promise.all([c.getTable().then((function(e){return e.schema(!1)})),n.expression_schema(!1),n.schema(!1),s,n.get_config()]);case 7:return l=t.sent,p=(d=l)[0],g=d[1],_=d[2],h=d[3],b=d[4],v=function(e){var t=p[e];return t||(t=g[e]),t},m=b.columns,w=b.group_by,y=b.split_by,x=b.filter,k=w.length>0?h.reduce((function(e,t){if(t.__ROW_PATH__&&t.__ROW_PATH__.length==w.length)e.agg_paths.push(e.aggs.slice()),e.rows.push(t);else{var n=t.__ROW_PATH__.filter((function(e){return void 0!==e})).length;e.aggs[n]=t,e.aggs=e.aggs.slice(0,n+1)}return e}),{rows:[],aggs:[],agg_paths:[]}):{rows:h},V=function(e,t){return w.length?e:Object.assign({},e,{__ROW_PATH__:[t]})},E=k.rows.map(V),Z={realValues:u,crossValues:w.map((function(e){return{name:e,type:v(e)}})),mainValues:m.map((function(e){return{name:e,type:_[e]}})),splitValues:y.map((function(e){return{name:e,type:v(e)}})),filter:x,data:E,agg_paths:k.agg_paths},this._chart=e,S={set:function(e,t,n){return fr.includes(t)||A._container&&A._container.dispatchEvent(new Event("perspective-plugin-update",{bubbles:!0,composed:!0})),e[t]=n,!0}},this._settings=new Proxy(Object.assign({},this._settings,Z),S),this._settings.splitMainValues&&this._settings.splitMainValues.length>=m.length&&(this._settings.splitMainValues=[]),ar(this._container,this._settings),i&&(this._container.innerHTML=""),this._draw(),t.next=18,new Promise((function(e){return requestAnimationFrame(e)}));case 18:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),c.clear=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._container&&(this._container.innerHTML="");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c._draw=function(){if(this._settings.data&&this.isConnected){var e=(0,d.Ys)(this._container),t="chart "+n;this._settings.size=this._container.getBoundingClientRect(),this._settings.data.length>0?this._chart(e.attr("class",t),this._settings):e.attr("class",t+" disabled")}},c.resize=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isConnected&&this._draw();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.restyle=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){var t,n=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._settings,e.t0=t,!e.t0){e.next=6;break}return delete t.colorStyles,e.next=6,this.draw.apply(this,n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.delete=function(){var e=(0,l.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._container.innerHTML="";case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.getContainer=function(){return this._container},c.save=function(){var e=Object.assign({},this._settings);return fr.forEach((function(t){delete e[t]})),e},c.restore=function(e){for(var t,n={},r=(0,u.Z)(fr);!(t=r()).done;){var a,o=t.value;n[o]=null==(a=this._settings)?void 0:a[o]}this._settings=Object.assign({},n,e),this._draw()},(0,o.Z)(r,[{key:"name",get:function(){return e.plugin.name}},{key:"category",get:function(){return e.plugin.category}},{key:"select_mode",get:function(){return e.plugin.selectMode||"select"}},{key:"min_config_columns",get:function(){var t;return(null==(t=e.plugin.initial)?void 0:t.count)||lr.initial.count}},{key:"config_column_names",get:function(){var t;return(null==(t=e.plugin.initial)?void 0:t.names)||lr.initial.names}},{key:"max_cells",get:function(){return e.plugin.max_cells||4e3},set:function(t){e.plugin.max_cells=t}},{key:"max_columns",get:function(){return e.plugin.max_columns||50},set:function(t){e.plugin.max_columns=t}}]),r}((0,c.Z)(HTMLElement))),customElements.whenDefined("perspective-viewer").then((function(){return dr(r)}))}}))}()},4469:function(e,t,n){var r,a=n(1976),o=n(3219),i=n(8953),c=n(1092),s=n(7791),l=n(8549),u=(n(2219),n(6558)),f=n.n(u),d=(0,c.Z)().mark(G),p=Object.create,g=Object.defineProperty,_=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyNames,b=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,m=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},w=m((function(e,t){t.exports.default={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}})),y=m((function(e,t){var n=w().default;function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(!n.length)return e;var i=n.shift();if(r(e)&&r(i))for(var c in i){var s,l;r(i[c])?(e[c]||Object.assign(e,((s={})[c]={},s)),a(e[c],i[c])):Object.assign(e,((l={})[c]=i[c],l))}return a.apply(void 0,[e].concat(n))}t.exports.get_types=function(){return Object.keys(t.exports.get_config().types)},t.exports.get_type_config=function(e){var n={};if(t.exports.get_config().types[e]&&Object.assign(n,t.exports.get_config().types[e]),n.type){var r=t.exports.get_type_config(n.type);return Object.assign(r,n),r}return n},globalThis.__PERSPECTIVE_CONFIG__=void 0,t.exports.override_config=function(e){globalThis.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),globalThis.__PERSPECTIVE_CONFIG__=a(n,e)},t.exports.get_config=function(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=a(n,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}})),x=(r=y(),function(e,t,n){if(t&&"object"==typeof t||"function"==typeof t)for(var r,a=function(){var a=r.value;!v.call(e,a)&&"default"!==a&&g(e,a,{get:function(){return t[a]},enumerable:!(n=_(t,a))||n.enumerable})},o=(0,l.Z)(h(t));!(r=o()).done;)a();return e}(function(e){return g(e,"__esModule",{value:!0})}(g(null!=r?p(b(r)):{},"default",r&&r.__esModule&&"default"in r?{get:function(){return r.default},enumerable:!0}:{value:r,enumerable:!0})),r));function k(e,t,n,r){var a,o,i,c,s=n[5],l=n[6],u=r[5],f=r[6],d=null==(a=this._ids)||null==(o=a[e.dy])?void 0:o.join("|"),p=e.column_header.join("|");if(null!=(i=this.last_reverse_columns)&&i.has(p)&&null!=(c=this.last_reverse_ids)&&c.has(d)){var g,_,h,b,v,m=null==(g=this.last_reverse_ids)?void 0:g.get(d),w=this.last_reverse_columns.get(p);this._is_old_viewport?(null==(_=this.last_meta)||null==(h=_[w])?void 0:h[m])>e.user?(t.style.setProperty("--pulse--background-color-start",u),t.style.setProperty("--pulse--background-color-end",f),"pulse_neg"===t.style.animationName?t.style.animation="pulse_neg2 0.5s linear":t.style.animation="pulse_neg 0.5s linear"):(null==(b=this.last_meta)||null==(v=b[w])?void 0:v[m])<e.user?(t.style.setProperty("--pulse--background-color-start",s),t.style.setProperty("--pulse--background-color-end",l),"pulse_pos"===t.style.animationName?t.style.animation="pulse_pos2 0.5s linear":t.style.animation="pulse_pos 0.5s linear"):m!==e.dy&&(t.style.animation=""):t.style.animation=""}else t.style.animation=""}function V(e,t){return E.apply(this,arguments)}function E(){return E=(0,s.Z)((0,c.Z)().mark((function e(t,n){var r=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.addEventListener("regular-table-psp-sort",(function(e){r._preserve_focus_state=!0,n.restore({sort:e.detail.sort})}));case 1:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function Z(e,t,n){return S.apply(this,arguments)}function S(){return S=(0,s.Z)((0,c.Z)().mark((function e(t,n,r){var a,o,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.getMeta(r),o=a.column_header[a.column_header.length-1],i=(n.shiftKey?A:T).call(this,o),t.dispatchEvent(new CustomEvent("regular-table-psp-sort",{detail:{sort:i}}));case 2:case"end":return e.stop()}}),e,this)}))),S.apply(this,arguments)}function A(e){for(var t,n=[],r=!1,a=(0,l.Z)(this._config.sort);!(t=a()).done;){var o=t.value,i=o[0],c=o[1];if(i===e){r=!0;var s=O.call(this,e,c);s&&n.push(s)}else n.push(o)}return r||n.push([e,"desc"]),n}function T(e){for(var t,n=(0,l.Z)(this._config.sort);!(t=n()).done;){var r=t.value,a=r[0],o=r[1];if(a===e){var i=O.call(this,e,o);return i?[i]:[]}}return[[e,"desc"]]}function O(e,t){var n=this._config.split_by.length>0?C:L,r=t?n[t]:"desc";if(r)return[e,r]}var L={desc:"asc",asc:void 0},C={desc:"asc",asc:"col desc","col desc":"col asc","col asc":void 0},M=Symbol("Plugin Symbol");function N(e){var t=f()(e),n=function(e){var t=e.rgb(),n=t[0],r=t[1],a=t[2],o=e.set("hsl.h",(e.get("hsl.h")-15)%360).rgb(),i=o[0],c=o[1],s=o[2],l=e.set("hsl.h",(e.get("hsl.h")+15)%360).rgb();return"linear-gradient(to right top,rgb("+i+","+c+","+s+"),rgb("+n+","+r+","+a+") 50%,rgb("+l[0]+","+l[1]+","+l[2]+"))"}(t),r=t.rgb();return[e].concat(r,[n,"rgba("+r[0]+","+r[1]+","+r[2]+",1)","rgba("+r[0]+","+r[1]+","+r[2]+",0)"])}function z(e,t,n){var r,a,o,i,l,u=this,f=void 0!==n,d=document.createElement("perspective-"+(f?"number":"string")+"-column-style"),p=e.getMeta(t),g=p.column_header[p.column_header.length-1],_=this._schema[g];if(l=f?{fg_gradient:n,pos_fg_color:this._pos_fg_color[0],neg_fg_color:this._neg_fg_color[0],number_fg_mode:"color",bg_gradient:n,pos_bg_color:this._pos_bg_color[0],neg_bg_color:this._neg_bg_color[0],number_bg_mode:"disabled"}:{color:this._color[0]},"string"!==_)if("float"===_)l.fixed=2;else{if("integer"!==_)return this._open_column_styles_menu.pop(),void e.draw({preserve_width:!0});l.fixed=0}var h=function(){return d.blur()},b=function(t){var n=t.detail;n.pos_fg_color&&(n.pos_fg_color=N(n.pos_fg_color),n.neg_fg_color=N(n.neg_fg_color)),n.pos_bg_color&&(n.pos_bg_color=N(n.pos_bg_color),n.neg_bg_color=N(n.neg_bg_color)),n.color&&(n.color=N(n.color)),e[M]=e[M]||{},e[M][g]=n,e.draw({preserve_width:!0}),e.parentElement.parentElement.dispatchEvent(new Event("perspective-config-update"))},v=function(){var t=(0,s.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.removeEventListener("regular-table-scroll",h),d.removeEventListener("perspective-column-style-change",b),d.removeEventListener("blur",v),d.destroy(),u._open_column_styles_menu.pop(),t.next=7,e.draw({preserve_width:!0});case 7:e.parentElement.parentElement.dispatchEvent(new Event("perspective-config-update"));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();d.addEventListener("perspective-column-style-change",b),d.addEventListener("blur",v),e.addEventListener("regular-table-scroll",h);var m=e[M]||{},w=Object.assign({},m[g]=m[g]||{});(w.pos_fg_color||w.pos_bg_color)&&(w.pos_fg_color=null==(r=w.pos_fg_color)?void 0:r[0],w.neg_fg_color=null==(a=w.neg_fg_color)?void 0:a[0],w.pos_bg_color=null==(o=w.pos_bg_color)?void 0:o[0],w.neg_bg_color=null==(i=w.neg_bg_color)?void 0:i[0]),w.color&&(w.color=w.color[0]),d.open(t,w,l)}function P(e,t){var n=e[0],r=e[1],a=e[2],o=e[3];function i(e,n){return 255*((1-o)*(t[e]/255)+o*(n/255))}return void 0===t&&(t=[255,255,255]),[i(0,n),i(1,r),i(2,a)]}function j(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t*.299+n*n*.587+r*r*.114)>130?"#161616":"#ffffff"}function R(e){var t=this,n=e._view_cache.config.row_pivots.length-1,r=Array.from(e.children[0].children[0].children),a=e[M]||{};if(r.length>0)for(var o,i=r.splice(r.length-1,1)[0],c=function(){var r,a,i,c=o.value,s=e.getMeta(c),l=null==(r=s.column_header)?void 0:r[(null==(a=s.column_header)?void 0:a.length)-1],u=t._config.sort.find((function(e){return e[0]===l})),f=s.row_header_x===n,d=void 0===s.x;f=f||(s.x+1)%t._config.columns.length==0,c.classList.toggle("psp-header-border",f),c.classList.toggle("psp-header-group",!1),c.classList.toggle("psp-header-leaf",!0),c.classList.toggle("psp-is-top",!1),c.classList.toggle("psp-header-corner",d),c.classList.toggle("psp-header-sort-asc",!!u&&"asc"===u[1]),c.classList.toggle("psp-header-sort-desc",!!u&&"desc"===u[1]),c.classList.toggle("psp-header-sort-col-asc",!!u&&"col asc"===u[1]),c.classList.toggle("psp-header-sort-col-desc",!!u&&"col desc"===u[1]);var p=te.call(t,s),g="integer"===p||"float"===p,_="string"===p;c.classList.toggle("psp-align-right",g),c.classList.toggle("psp-align-left",!g),c.classList.toggle("psp-menu-open",t._open_column_styles_menu[0]===s._virtual_x),c.classList.toggle("psp-menu-enabled",(_||g)&&!d),c.classList.toggle("psp-is-width-override",void 0!==(null==(i=e._column_sizes)?void 0:i.override[s.size_key]))},s=(0,l.Z)(null==i?void 0:i.children);!(o=s()).done;)c();for(var u=[],d=new Set,p=e.children[0],g=0;g<r.length;g++){for(var _=p.rows[g],h=new Set,b=0;b<_.cells.length;b++){var v=_.cells[b];v.style.backgroundColor="";var m=e.getMeta(v),w=m.row_header_x===n||m.x>=0;v.classList.toggle("psp-align-right",!1),v.classList.toggle("psp-align-left",!1),v.classList.toggle("psp-header-group",!0),v.classList.toggle("psp-header-leaf",!1),v.classList.toggle("psp-header-border",w),v.classList.toggle("psp-header-group-corner",void 0===m.x),v.classList.toggle("psp-color-mode-bar",!1),v.classList.toggle("psp-header-sort-asc",!1),v.classList.toggle("psp-header-sort-desc",!1),v.classList.toggle("psp-header-sort-col-asc",!1),v.classList.toggle("psp-header-sort-col-desc",!1);for(var y=_.cells[b],x=b,V=void 0,E=void 0;u[g]&&u[g][x];++x);for(h.add(x),V=x;V<x+y.colSpan;++V)for(E=g;E<g+y.rowSpan;++E)u[E]||(u[E]=[]),u[E][V]=!0;y.classList.toggle("psp-is-top",0===g||!d.has(V))}d=h}for(var Z,S=(0,l.Z)(e.children[0].children[1].children);!(Z=S()).done;)for(var A,T=Z.value,O=function(){var n,r,o=A.value,i=e.getMeta(o),c=null==(n=i.column_header)?void 0:n[(null==(r=i.column_header)?void 0:r.length)-1],s=te.call(t,i),l=a[c],u="integer"===s||"float"===s;if(u){var d,p,g=i.user>0,_=i.user<0;d=void 0!==(null==l?void 0:l.pos_bg_color)?l.pos_bg_color:t._pos_bg_color,p=void 0!==(null==l?void 0:l.neg_bg_color)?l.neg_bg_color:t._neg_bg_color;var h=g?d:_?p:[""].concat(t._plugin_background,[""]),b=h[0],v=h[1],m=h[2],w=h[3];h[4];if(o.style.position="","color"===(null==l?void 0:l.number_bg_mode))o.style.animation="",o.style.backgroundColor=b;else if("gradient"===(null==l?void 0:l.number_bg_mode)){var y=Math.max(0,Math.min(1,Math.abs(i.user/l.bg_gradient))),x=j(P([v,m,w,y],t._plugin_background));o.style.animation="",o.style.color=x,o.style.backgroundColor="rgba("+v+","+m+","+w+","+y+")"}else"pulse"===(null==l?void 0:l.number_bg_mode)?(k.call(t,i,o,d,p),o.style.backgroundColor=""):("disabled"===(null==l?void 0:l.number_bg_mode)||null!=l&&l.number_bg_mode,o.style.animation="",o.style.backgroundColor="");var V=void 0!==(null==l?void 0:l.pos_fg_color)?g?l.pos_fg_color:_?l.neg_fg_color:[""].concat(t._plugin_background,[""]):g?t._pos_fg_color:_?t._neg_fg_color:[""].concat(t._plugin_background,[""]),E=V[0],Z=(V[1],V[2],V[3],V[4]);if("disabled"===(null==l?void 0:l.number_fg_mode))if("color"===(null==l?void 0:l.number_bg_mode)){var S=t._plugin_background,T=j(P([h[1],h[2],h[3],1],S));o.style.color=T}else"gradient"===(null==l?void 0:l.number_bg_mode)||(o.style.color="");else"bar"===(null==l?void 0:l.number_fg_mode)?(o.style.color="",o.style.position="relative",""!==Z&&o.children.length>0&&o.children[0].nodeType===Node.ELEMENT_NODE&&(o.children[0].style.background=Z)):("color"===(null==l?void 0:l.number_fg_mode)||null==l||!l.number_fg_mode)&&(o.style.color=E)}else if("boolean"===s){var O=(!0===i.user?t._pos_fg_color:!1===i.user?t._neg_fg_color:["",0,0,0,""])[0];o.style.backgroundColor="",o.style.color=O}else if("string"===s){var L=void 0!==(null==l?void 0:l.color)?l.color:t._color,C=L[0],M=L[1],N=L[2],z=L[3];L[4];if("foreground"===(null==l?void 0:l.string_color_mode)&&null!==i.user)o.style.color=C,o.style.backgroundColor="","link"===(null==l?void 0:l.format)&&(o.children[0].style.color=C);else if("background"===(null==l?void 0:l.string_color_mode)&&null!==i.user){var R=j(P([M,N,z,1],t._plugin_background));o.style.color=R,o.style.backgroundColor=C}else if("series"===(null==l?void 0:l.string_color_mode)&&null!==i.user){t._series_color_map.has(c)||(t._series_color_map.set(c,new Map),t._series_color_seed.set(c,0));var I=t._series_color_map.get(c);if(!I.has(i.user)){var F=t._series_color_seed.get(c);I.set(i.user,F),t._series_color_seed.set(c,F+1)}var D=I.get(i.user),Y=f()(C).hsl(),B=Y[0],H=Y[1],W=Y[2];B+=150*D%360;var U=f()(B,H,W,"hsl"),q=U.rgb(),G=q[0],K=q[1],X=q[2],J=U.hex(),$=j(P([G,K,X,1],t._plugin_background));o.style.color=$,o.style.backgroundColor=J}else o.style.backgroundColor="",o.style.color=""}else o.style.backgroundColor="",o.style.color="";o.classList.toggle("psp-bool-type","boolean"===s&&null!==i.user);var Q="TH"===o.tagName;if(Q){var ee,ne,re=null!=typeof i.value&&null!=typeof i.value&&(null==(ee=i.value)||null==(ne=ee.toString())?void 0:ne.trim().length)>0,ae=i.row_header_x>=t._config.group_by.length,oe=e.getMeta({dx:0,dy:i.y-i.y0+1}),ie=oe&&oe.row_header&&void 0!==oe.row_header[i.row_header_x+1];o.classList.toggle("psp-tree-label",re&&!ae),o.classList.toggle("psp-tree-label-expand",re&&!ae&&!ie),o.classList.toggle("psp-tree-label-collapse",re&&!ae&&ie),o.classList.toggle("psp-tree-leaf",re&&ae)}o.classList.toggle("psp-align-right",!Q&&u),o.classList.toggle("psp-align-left",Q||!u),o.classList.toggle("psp-color-mode-bar","bar"===(null==l?void 0:l.number_fg_mode)&&u)},L=(0,l.Z)(T.children);!(A=L()).done;)O()}function I(e,t){return F.apply(this,arguments)}function F(){return F=(0,s.Z)((0,c.Z)().mark((function e(t,n){var r,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getMeta(n.target),a=n.target.classList.contains("psp-tree-label-collapse"),n.shiftKey&&a?this._view.set_depth(r.row_header.filter((function(e){return void 0!==e})).length-2):n.shiftKey?this._view.set_depth(r.row_header.filter((function(e){return void 0!==e})).length-1):a?this._view.collapse(r.y):this._view.expand(r.y),e.next=4,this._view.num_rows();case 4:return this._num_rows=e.sent,e.next=7,this._view.num_columns();case 7:this._num_columns=e.sent,t.draw();case 9:case"end":return e.stop()}}),e,this)}))),F.apply(this,arguments)}function D(e,t){return Y.apply(this,arguments)}function Y(){return Y=(0,s.Z)((0,c.Z)().mark((function e(t,n){var r,a,o,i,s,l,u,f,d,p,g;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===n.which){e.next=2;break}return e.abrupt("return");case 2:if("A"!==(r=n.target).tagName){e.next=5;break}return e.abrupt("return");case 5:if("TD"===r.tagName||"TH"===r.tagName){e.next=10;break}if(r=r.parentElement,t.contains(r)){e.next=8;break}return e.abrupt("return");case 8:e.next=5;break;case 10:if(!r.classList.contains("psp-tree-label")){e.next=13;break}return I.call(this,t,n),n.stopImmediatePropagation(),e.abrupt("return");case 13:if(a=r.getBoundingClientRect(),!(r.classList.contains("psp-menu-enabled")&&n.clientY-a.top>16)){e.next=31;break}if(s=t.getMeta(r),l=null==(o=s.column_header)?void 0:o[(null==(i=s.column_header)?void 0:i.length)-1],u=this._schema[l],this._open_column_styles_menu.unshift(s._virtual_x),"string"!==u){e.next=20;break}t.draw({preserve_width:!0}),z.call(this,t,r),e.next=28;break;case 20:return e.next=22,this._view.get_min_max(l);case 22:f=e.sent,d=f[0],p=f[1],t.draw({preserve_width:!0}),(g=Math.max(Math.abs(d),Math.abs(p)))>1&&(g=Math.round(100*g)/100),z.call(this,t,r,g);case 28:n.preventDefault(),n.stopImmediatePropagation(),e.next=32;break;case 31:r.classList.contains("psp-header-leaf")&&!r.classList.contains("psp-header-corner")&&(Z.call(this,t,n,r),n.stopImmediatePropagation());case 32:case"end":return e.stop()}}),e,this)}))),Y.apply(this,arguments)}function B(e,t){if(1===t.which){for(var n=t.target;"TD"!==n.tagName&&"TH"!==n.tagName;)if(n=n.parentElement,!e.contains(n))return;(n.classList.contains("psp-tree-label")&&t.offsetX<26||n.classList.contains("psp-header-leaf")&&!n.classList.contains("psp-header-corner"))&&t.stopImmediatePropagation()}}var H={},W={datetime:Intl.DateTimeFormat,date:Intl.DateTimeFormat,integer:Intl.NumberFormat,float:Intl.NumberFormat,boolean:function(){function e(){}return e.prototype.format=function(e){return e?"check":"close"},e}()},U=H;function q(e,t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=!1),null===t)return"-";var a=e[e.length-1],o=r&&this._table_schema[a]||this._schema[a]||"string",i=n[a],c="integer"===o||"float"===o;if(c&&"bar"===(null==i?void 0:i.number_fg_mode)){var s=Math.max(0,Math.min(.95,.95*Math.abs(t/i.fg_gradient))),l=this._div_factory.get(),u=t>=0?"left":"right";return l.setAttribute("style","width:"+(100*s).toFixed(2)+"%;position:absolute;"+u+":0;height:80%;top:10%;pointer-events:none;"),l}if("link"===(null==i?void 0:i.format)&&"string"===o){var f=document.createElement("a");return f.setAttribute("href",t),f.setAttribute("target","_blank"),f.textContent=t,f}if("bold"===(null==i?void 0:i.format)&&"string"===o){var d=document.createElement("b");return d.textContent=t,d}if("italics"===(null==i?void 0:i.format)&&"string"===o){var p=document.createElement("i");return p.textContent=t,p}var g=c&&i&&void 0!==i.fixed,_=g?""+o+i.fixed:o;if(void 0===H[_]){var h=(0,x.get_type_config)(o);if(g){var b={minimumFractionDigits:i.fixed,maximumFractionDigits:i.fixed};H[_]=new W[o]("en-us",b)}else W[o]?H[_]=new W[o]("en-us",h.format):H[_]=!1}return H[_]?H[_].format(t):t}function G(e,t,n){var r,a,o,i,s=this;return(0,c.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:void 0===e&&(e=[]),r=n[M],a=(0,c.Z)().mark((function e(){var n,a,o;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.value,n=["TOTAL"].concat(n),a=n[n.length-1],n=n.slice(0,n.length-1).fill(""),o=q.call(s,[t[n.length-1]],a,r,!0),(n=o instanceof HTMLElement?n.concat(o):n.concat({toString:function(){return o}})).length=t.length+1,e.next=9,n;case 9:case"end":return e.stop()}}),e)})),o=(0,l.Z)(e);case 4:if((i=o()).done){u.next=8;break}return u.delegateYield(a(),"t0",6);case 6:u.next=4;break;case 8:case"end":return u.stop()}}),d)}function K(){var e,t,n,r,a;return function(){var o=(0,s.Z)((0,c.Z)().mark((function o(i,s,l,u,f){var d,p,g,_,h,b,v,m,w,y,x,k,V=this;return(0,c.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(h={},!(u-s>0&&f-l>0)){o.next=13;break}return this._is_old_viewport=(null==(d=this._last_window)?void 0:d.start_row)===l&&(null==(p=this._last_window)?void 0:p.end_row)===f&&(null==(g=this._last_window)?void 0:g.start_col)===s&&(null==(_=this._last_window)?void 0:_.end_col)===u,b={start_row:l,start_col:s,end_row:f,end_col:u,id:!0},o.next=6,this._view.to_columns(b);case 6:h=o.sent,this._last_window=b,this._ids=h.__ID__,this._reverse_columns=this._column_paths.slice(s,u).reduce((function(e,t,n){return e.set(t,n),e}),new Map),this._reverse_ids=this._ids.reduce((function(e,t,n){return e.set(null==t?void 0:t.join("|"),n),e}),new Map),o.next=14;break;case 13:this._div_factory.clear();case 14:for(v=[],m=[],w=[],y=[],x=function(e){var t=V._column_paths[e],n=t.split("|"),r=h[t]||new Array(f-l).fill(null);v.push(r.map((function(e){return q.call(V,n,e,i[M])}))),m.push(r),w.push(n),y.push(t)},k=s;k<Math.min(u,this._column_paths.length);++k)x(k);return o.abrupt("return",(u-s>0&&f-l>0&&(this.last_column_paths=t,this.last_meta=e,this.last_ids=n,this.last_reverse_ids=r,this.last_reverse_columns=a,t=y,e=m,n=this._ids,r=this._reverse_ids,a=this._reverse_columns),{num_rows:this._num_rows,num_columns:this._column_paths.length,row_headers:Array.from(G.call(this,h.__ROW_PATH__,this._config.group_by,i)),column_headers:w,data:v,metadata:m}));case 18:case"end":return o.stop()}}),o,this)})));return function(e,t,n,r,a){return o.apply(this,arguments)}}()}function X(e,t,n){var r=window.getComputedStyle(e).getPropertyValue(t).trim();return r.length>0?r:n}var J=function(){function e(e){this._name=e,this._elements=[],this._index=0}var t=e.prototype;return t.clear=function(){this._index=0},t.get=function(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));var e=this._elements[this._index];return this._index+=1,e},e}();function $(e,t){return f().mix(e,"rgb("+t[0]+","+t[1]+","+t[2]+")",.5).hex()}function Q(e,t,n,r){return ee.apply(this,arguments)}function ee(){return ee=(0,s.Z)((0,c.Z)().mark((function e(t,n,r,a){var o,i,s,u,d,p,g,_,h,b,v,m,w,y,x,k,V,E,Z,S,A,T,O,L,C,M,z;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a={}),e.next=3,r.get_config();case 3:return i=e.sent,s=i.expressions.map((function(e){return e[1]})),e.next=7,Promise.all([n.schema(),n.validate_expressions(s),r.num_rows(),r.schema(),r.expression_schema(),r.column_paths()]);case 7:for(u=e.sent,d=u[0],p=u[1],g=u[2],_=u[3],h=u[4],b=u[5],v=f()(X(t,"--plugin--background","#FFFFFF")).rgb(),m=N(X(t,"--rt-pos-cell--color","#338DCD")),w=N(X(t,"--rt-neg-cell--color","#FF5942")),y=N($(m[0],v)),x=N($(w[0],v)),k=N(X(t,"--active--color","#ff0000")),V=Object.assign({},_,h),E=Object.assign({},d,p.expression_schema),Z=b.filter((function(e){return"__ROW_PATH__"!==e&&"__ID__"!==e})),S=[],A=[],T=(0,l.Z)(Z);!(O=T()).done;)L=O.value,C=L.split("|"),M=C[C.length-1],A.push(V[M]),S.push(!!d[M]);return z=Object.assign(a,{_view:r,_table:n,_table_schema:E,_config:i,_num_rows:g,_schema:V,_ids:[],_open_column_styles_menu:[],_plugin_background:v,_color:k,_pos_fg_color:m,_neg_fg_color:w,_pos_bg_color:y,_neg_bg_color:x,_column_paths:Z,_column_types:A,_is_editable:S,_row_header_types:i.group_by.map((function(e){return E[e]})),_series_color_map:new Map,_series_color_seed:new Map,get_psp_type:te}),e.abrupt("return",(z._div_factory=z._div_factory||new J("div"),t.setDataListener(K().bind(z,t),{virtual_mode:(null==(o=window.getComputedStyle(t).getPropertyValue("--datagrid-virtual-mode"))?void 0:o.trim())||"both"}),z));case 28:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}function ne(e,t){return re.apply(this,arguments)}function re(){return re=(0,s.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.addStyleListener(R.bind(n,t)),t.addEventListener("mousedown",D.bind(n,t)),t.addEventListener("click",B.bind(n,t));case 1:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}function ae(e,t,n){return oe.apply(this,arguments)}function oe(){return oe=(0,s.Z)((0,c.Z)().mark((function e(t,n,r){var a,o,i,s,l,u,f,d,p,g,_,h,b,v,m;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t._view,o=t._config,i=o.group_by,s=o.split_by,u=(l=n>=0?n:0)+1,e.next=7,a.to_json({start_row:l,end_row:u});case 7:return f=e.sent,d=f.map((function(e){return e.__ROW_PATH__}))[0]||[],p=i.map((function(e,t){var n=d[t];return n?[e,"==",n]:void 0})).filter((function(e){return e})),g=i.length>0?r+1:r,_=Object.keys(f[0])[g],h={row:f[0]},b=[],_&&(v=_.split("|"),h.column_names=[v[v.length-1]],b=s.map((function(e,t){var n=v[t];return n?[e,"==",n]:void 0})).filter((function(e){return e})).filter((function(e){return"__ROW_PATH__"!==e[2]}))),m=o.filter.concat(p).concat(b),e.abrupt("return",(h.config={filter:m},h));case 17:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}var ie=new WeakMap;function ce(e,t,n){return se.apply(this,arguments)}function se(){return se=(0,s.Z)((0,c.Z)().mark((function e(t,n,r){var a,o,i,s,l,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getMeta(r.target),n.hasAttribute("selectable")&&!r.handled&&1===r.which&&a){e.next=3;break}return e.abrupt("return");case 3:if(o=this._ids[a.y-a.y0],!(a&&a.y>=0)){e.next=19;break}if(i=ie.get(t),s=!!i&&i.reduce((function(e,t,n){return e&&t===o[n]}),!0),l=!!i&&o.length===i.length&&s,u=[],!l){e.next=10;break}ie.delete(t),e.next=15;break;case 10:return ie.set(t,o),e.next=13,ae(this,a.y,a.x);case 13:u=(u=e.sent).config.filter;case 15:return e.next=17,t.draw({preserve_width:!0});case 17:r.handled=!0,n.dispatchEvent(new CustomEvent("perspective-select",{bubbles:!0,composed:!0,detail:{selected:!l,config:{filter:u}}}));case 19:case"end":return e.stop()}}),e,this)}))),se.apply(this,arguments)}function le(e,t){var n=this;if(t.hasAttribute("selectable")){for(var r,a=ie.has(e),o=ie.get(e),i=(0,l.Z)(e.querySelectorAll("td"));!(r=i()).done;){var c=r.value;a?function(){var t=e.getMeta(c),r=n._ids[t.y-t.y0],a=o.reduce((function(e,t,n){return e&&t===r[n]}),!0);c.classList.toggle("psp-row-selected",r.length===o.length&&a),c.classList.toggle("psp-row-subselected",r.length!==o.length&&a)}():(c.classList.toggle("psp-row-selected",!1),c.classList.toggle("psp-row-subselected",!1))}for(var s,u=function(){var t=s.value,r=e.getMeta(t),i=n._ids[r.y-r.y0];if(!a||i[r.row_header_x])t.classList.toggle("psp-row-selected",!1),t.classList.toggle("psp-row-subselected",!1);else{var c=o.reduce((function(e,t,n){return e&&t===i[n]}),!0);t.classList.toggle("psp-row-selected",i.length===o.length&&c),t.classList.toggle("psp-row-subselected",i.length!==o.length&&c)}},f=(0,l.Z)(e.querySelectorAll("tbody th"));!(s=f()).done;)u()}}function ue(e,t){e.addStyleListener(le.bind(this,e,t)),e.addEventListener("mousedown",ce.bind(this,e,t))}function fe(e){return de.apply(this,arguments)}function de(){return de=(0,s.Z)((0,c.Z)().mark((function e(t){var n,r,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(ie.delete(t),n=(0,l.Z)(t.querySelectorAll("td,th"));!(r=n()).done;)(a=r.value).classList.toggle("psp-row-selected",!1),a.classList.toggle("psp-row-subselected",!1);case 2:case"end":return e.stop()}}),e)}))),de.apply(this,arguments)}function pe(e,t,n){return ge.apply(this,arguments)}function ge(){return ge=(0,s.Z)((0,c.Z)().mark((function e(t,n,r){var a,o,i,s,l,u,f;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.getMeta(r.target)){e.next=3;break}return e.abrupt("return");case 3:return o=a.x,i=a.y,e.next=7,ae(this,i,o);case 7:s=e.sent,l=s.row,u=s.column_names,f=s.config,n.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{row:l,column_names:u,config:f}}));case 12:case"end":return e.stop()}}),e,this)}))),ge.apply(this,arguments)}function _e(e,t){e.addEventListener("click",pe.bind(this,e,t))}var he=new WeakMap;function be(){if(this.isContentEditable){var e=document.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(this),t.setEnd(e.endContainer,e.endOffset),t.toString().length}return this.target.selectionStart}function ve(e,t,n){var r=e.getMeta(n),a=t._schema[t._column_paths[r.x]];if(r){var o,i=n.textContent,c=t._ids[r.y-r.y0];if("float"===a||"integer"===a){if(i=parseFloat(i.replace(/,/g,"")),isNaN(i))return!1}else if("date"===a||"datetime"===a){if(i=Date.parse(i),isNaN(i))return!1}else"boolean"===a&&(i="check"!==i&&("close"===i||null));var s=((o={__INDEX__:c})[t._column_paths[r.x]]=i,o);return t._table.update([s],{port_id:t._edit_port}),!0}}function me(e,t){void 0===t&&(t=!1);var n=0===this._config.group_by.length&&0===this._config.split_by.length,r=e.hasAttribute("selectable"),a=t||!!e.children[0]._is_edit_mode;return n&&!r&&a}var we=function(e){var t;return(0,s.Z)((0,c.Z)().mark((function n(){var r,a,o,i,s=arguments;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t1=!!t,!n.t1){n.next=5;break}return n.next=4,t;case 4:n.t1=n.sent;case 5:if(n.t0=n.t1,!n.t0){n.next=8;break}n.t0=!!t;case 8:if(!n.t0){n.next=10;break}return n.abrupt("return");case 10:for(a=s.length,o=new Array(a),i=0;i<a;i++)o[i]=s[i];return t=new Promise((function(e){return r=e})),n.next=14,e.apply(this,o);case 14:t=void 0,r();case 16:case"end":return n.stop()}}),n,this)})))}(function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t,n,r,a){var o,i,s,l,u,f,d,p,g,_;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.getMeta(n),i=this._column_paths.length,s=this._num_rows,l=he.get(t)){e.next=3;break}return e.abrupt("return");case 3:o.x+r<i&&0<=o.x+r&&(l.x=o.x+r),o.y+a<s&&0<=o.y+a&&(l.y=o.y+a),u=Math.max(o.x0-10,0),f=Math.min(o.x0+10,i),d=Math.max(o.y0-5,0),p=Math.min(o.y0+10,s),g=o.x0+r,_=o.y0+a;case 5:if(!(!xe(t)&&g>=u&&g<f&&_>=d&&_<p)){e.next=13;break}return e.next=8,t.scrollToCell(g,_,i,s);case 8:he.set(t,l),g+=r,_+=a;case 11:e.next=5;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}());function ye(e,t){var n=e[M]||{},r=me.call(this,t);e.parentElement.classList.toggle("edit-mode-allowed",me.call(this,t,!0));for(var a,o=(0,l.Z)(e.querySelectorAll("td"));!(a=o()).done;){var i=a.value,c=e.getMeta(i),s=this.get_psp_type(c);if(r&&this._is_editable[c.x]){var u,f=c.column_header[c.column_header.length-1];"string"===s&&"link"===(null==(u=n[f])?void 0:u.format)?(i.toggleAttribute("contenteditable",!1),i.classList.toggle("boolean-editable",!1)):"boolean"===s?(i.toggleAttribute("contenteditable",!1),i.classList.toggle("boolean-editable",null!==c.user)):(r!==i.hasAttribute("contenteditable")&&i.toggleAttribute("contenteditable",r),i.classList.toggle("boolean-editable",!1))}else i.toggleAttribute("contenteditable",!1),i.classList.toggle("boolean-editable",!1)}}var xe=function(e){var t=e.querySelectorAll("td"),n=he.get(e);if(n){for(var r,a=(0,l.Z)(t);!(r=a()).done;){var o=r.value,i=e.getMeta(o);if(i.x===n.x&&i.y===n.y)return document.activeElement!==o&&o.focus({preventScroll:!0}),!0}document.activeElement!==document.body&&e.contains(document.activeElement)&&document.activeElement.blur()}};function ke(e,t,n){if(me.call(this,t)){var r=document.activeElement;switch(n.target.classList.remove("psp-error"),n.keyCode){case 13:n.preventDefault(),n.shiftKey?we.call(this,e,r,0,-1):we.call(this,e,r,0,1);break;case 37:0==be.call(r)&&(n.preventDefault(),we.call(this,e,r,-1,0));break;case 38:n.preventDefault(),we.call(this,e,r,0,-1);break;case 39:be.call(r)==r.textContent.length&&(n.preventDefault(),we.call(this,e,r,1,0));break;case 40:n.preventDefault(),we.call(this,e,r,0,1)}}}function Ve(e,t,n){if(me.call(this,t)&&he.has(e)){n.target.classList.remove("psp-error");var r=he.get(e);he.delete(e),r.content!==n.target.textContent&&(ve(e,this,n.target)||(n.target.textContent=r.content,n.target.classList.add("psp-error"),n.target.focus()))}}function Ee(e,t,n){var r=e.getMeta(n.target);if(r){var a={x:r.x,y:r.y,content:n.target.textContent};he.set(e,a)}}function Ze(e,t,n){var r=e.getMeta(n.target);if(void 0!==(null==r?void 0:r.x)){var a=me.call(this,t),o=this._is_editable[r.x],i="boolean"===this.get_psp_type(r),c="-"===n.target.textContent;a&&o&&i&&!c&&ve(e,this,n.target)}}function Se(e,t){return Ae.apply(this,arguments)}function Ae(){return Ae=(0,s.Z)((0,c.Z)().mark((function e(t,n){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getEditPort();case 2:this._edit_port=e.sent,t.addStyleListener(ye.bind(this,t,n)),t.addStyleListener(xe.bind(this,t,n)),t.addEventListener("click",Ze.bind(this,t,n)),t.addEventListener("focusin",Ee.bind(this,t,n)),t.addEventListener("focusout",Ve.bind(this,t,n)),t.addEventListener("keydown",ke.bind(this,t,n));case 9:case"end":return e.stop()}}),e,this)}))),Ae.apply(this,arguments)}var Te=function(e){function t(){var t;return(t=e.call(this)||this).datagrid=document.createElement("regular-table"),t.datagrid.formatters=U,t._is_scroll_lock=!0,t}(0,o.Z)(t,e);var n=t.prototype;return n.connectedCallback=function(){var e=this;this._toolbar||(this._toolbar=document.createElement("perspective-viewer-datagrid-toolbar"),this._toolbar.setAttribute("slot","plugin-settings"),this._toolbar.attachShadow({mode:"open"}),this._toolbar.shadowRoot.innerHTML='\n                <style>\n                    :host{position:relative;display:block}:host #container{position:absolute;display:flex;flex-direction:column;justify-content:stretch;align-items:stretch;top:0;left:0;right:0;bottom:0}:host #toolbar{display:flex;align-items:center;height:36px}:host #slot-container{flex:1;position:relative}#scroll_lock.lock-scroll:before{content:var(--toolbar-scroll-lock-active--content)}#scroll_lock:before{content:var(--toolbar-scroll-lock--content)}#select_mode:before{content:"highlight_alt"}#edit_mode:before{content:var(--toolbar-edit-mode--content)}#edit_mode.editable:before{content:var(--toolbar-edit-mode-active--content)}:host(.aggregated) #toolbar #edit_mode{display:none}.button:before{color:var(--inactive--color, #ccc);line-height:36px;font-size:14px;font-family:var(--button--font-family, "Material Icons Outlined");vertical-align:bottom;margin:0 11px}.button.editable:before,.button.lock-scroll:before{color:inherit}.button{user-select:none;width:36px;box-sizing:border-box}.button>span{display:none;margin:0;padding:0}.button:hover{opacity:1;display:flex;align-items:center;color:inherit;cursor:pointer;min-width:105px;background-color:#0000000d}.button:hover:before{margin:0 6px 0 11px}.button:hover>span{display:contents;font-size:12px;font-weight:300;line-height:36px}\n\n                </style>\n                <div id="toolbar">\n                    <span id="scroll_lock" class="lock-scroll button"><span>Align Scroll</span></span>\n                    <span id="edit_mode" class="button"><span>Read Only</span></span>\n                </div>\n            ',this._scroll_lock=this._toolbar.shadowRoot.querySelector("#scroll_lock"),this._scroll_lock.addEventListener("click",(function(){return e._toggle_scroll_lock()})),this._edit_mode=this._toolbar.shadowRoot.querySelector("#edit_mode"),this._edit_mode.addEventListener("click",(function(){e._toggle_edit_mode(),e.datagrid.draw(),e.parentElement.dispatchEvent(new Event("perspective-config-update"))}))),this.parentElement.appendChild(this._toolbar)},n.disconnectedCallback=function(){this._toolbar.parentElement.removeChild(this._toolbar)},n._toggle_edit_mode=function(e){void 0===e&&(e=void 0),void 0===e&&(e=!this._is_edit_mode),this._is_edit_mode=e,this.classList.toggle("editable",e),void 0!==this._edit_mode&&(this._edit_mode.classList.toggle("editable",e),this._edit_mode.children[0].textContent=e?"Editable":"Read Only")},n._toggle_scroll_lock=function(e){void 0===e&&(e=void 0),void 0===e&&(e=!this._is_scroll_lock),this._is_scroll_lock=e,this.classList.toggle("sub-cell-scroll-enabled",!e),void 0!==this._scroll_lock&&(this._scroll_lock.classList.toggle("lock-scroll",e),this._scroll_lock.children[0].textContent=e?"Align Scroll":"Free Scroll")},n.activate=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parentElement,e.next=3,n.getTable(!0);case 3:if(r=e.sent,!this._initialized){e.next=9;break}return e.next=7,Q(this.datagrid,r,t,this.model);case 7:e.next=24;break;case 9:return this.innerHTML="",this.appendChild(this.datagrid),e.next=13,Q(this.datagrid,r,t);case 13:return this.model=e.sent,ne(this.datagrid,this.model),e.next=17,ue.call(this.model,this.datagrid,n);case 17:return e.next=19,_e.call(this.model,this.datagrid,n);case 19:return e.next=21,Se.call(this.model,this.datagrid,n);case 21:return e.next=23,V.call(this.model,this.datagrid,n);case 23:this._initialized=!0;case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.draw=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t){var n,r,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.parentElement,!e.t0){e.next=4;break}return e.next=4,this.activate(t);case 4:if(this.isConnected&&null!=this.offsetParent){e.next=6;break}return e.abrupt("return");case 6:return n=this._save_column_size_overrides(),r=this.parentElement,a=this.datagrid.draw({invalid_columns:!0}),this.model._preserve_focus_state?this.model._preserve_focus_state=!1:(this.datagrid.scrollTop=0,this.datagrid.scrollLeft=0,fe(this.datagrid,r),this.datagrid._resetAutoSize()),this._restore_column_size_overrides(n),e.next=11,a;case 11:this._toolbar.classList.toggle("aggregated",this.model._config.group_by.length>0||this.model._config.split_by.length>0);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.update=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.num_rows();case 2:return this.model._num_rows=e.sent,e.next=5,this.datagrid.draw();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.resize=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!this.isConnected||null==this.offsetParent,e.t0){e.next=6;break}if(e.t1=this._initialized,!e.t1){e.next=6;break}return e.next=6,this.datagrid.draw();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.clear=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.datagrid._resetAutoSize(),this.datagrid.clear();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.save=function(){if(this.datagrid){for(var e=this.datagrid,t={columns:{},scroll_lock:!!this._is_scroll_lock,editable:!!this._is_edit_mode},n=0,r=Object.keys(e[M]||{});n<r.length;n++){var a,o,i,c,s=r[n],l=Object.assign({},e[M][s]);(null!=l&&l.pos_fg_color||null!=l&&l.pos_bg_color)&&(l.pos_fg_color=null==(a=l.pos_fg_color)?void 0:a[0],l.neg_fg_color=null==(o=l.neg_fg_color)?void 0:o[0],l.pos_bg_color=null==(i=l.pos_bg_color)?void 0:i[0],l.neg_bg_color=null==(c=l.neg_bg_color)?void 0:c[0]),null!=l&&l.color&&(l.color=l.color[0]),t.columns[s]=l}for(var u=this._save_column_size_overrides(),f=0,d=Object.keys(u||{});f<d.length;f++){var p=d[f];t.columns[p]||(t.columns[p]={}),t.columns[p].column_size_override=u[p]}return JSON.parse(JSON.stringify(t))}return{}},n.restore=function(e){var t={};if((e=JSON.parse(JSON.stringify(e))).columns)for(var n=0,r=Object.keys(e.columns);n<r.length;n++){var a=r[n],o=e.columns[a];void 0!==o.column_size_override&&(t[a]=o.column_size_override,delete o.column_size_override),null!=o&&o.pos_fg_color&&(o.pos_fg_color=N(o.pos_fg_color),o.neg_fg_color=N(o.neg_fg_color)),null!=o&&o.pos_bg_color&&(o.pos_bg_color=N(o.pos_bg_color),o.neg_bg_color=N(o.neg_bg_color)),null!=o&&o.color&&(o.color=N(o.color)),0===Object.keys(o).length&&delete e.columns[a]}"editable"in e&&this._toggle_edit_mode(e.editable),"scroll_lock"in e&&this._toggle_scroll_lock(e.scroll_lock);var i=this.datagrid;try{i._resetAutoSize()}catch(c){}this._restore_column_size_overrides(t,!0),i[M]=e.columns},n.restyle=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.draw(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.delete=function(){this.datagrid.table_model&&this.datagrid._resetAutoSize(),this.datagrid.clear()},n._save_column_size_overrides=function(){if(!this._initialized)return[];if(this._cached_column_sizes){var e=this._cached_column_sizes;return this._cached_column_sizes=void 0,e}for(var t=this.datagrid._column_sizes.override,n=this.model._config,r=n.group_by,a=(n.columns,(null==r?void 0:r.length)>0?r.length+1:0),o={},i=0,c=Object.keys(t);i<c.length;i++){if(void 0!==t[e=c[i]]){var s=e-a;s>-1?o[this.model._column_paths[s]]=t[e]:-1===s&&(o.__ROW_PATH__=t[e])}}return o},n._restore_column_size_overrides=function(e,t){if(void 0===t&&(t=!1),this._initialized){t&&(this._cached_column_sizes=e);for(var n={},r=this.model._config,a=r.group_by,o=(r.columns,(null==a?void 0:a.length)>0?a.length+1:0),i=0,c=Object.keys(e);i<c.length;i++){var s=c[i];if("__ROW_PATH__"===s)n[o-1]=e[s];else n[this.model._column_paths.indexOf(s)+o]=e[s]}this.datagrid._column_sizes.override=n}},(0,a.Z)(t,[{key:"name",get:function(){return"Datagrid"}},{key:"category",get:function(){return"Basic"}},{key:"select_mode",get:function(){return"toggle"}},{key:"min_config_columns",get:function(){}},{key:"config_column_names",get:function(){}}]),t}((0,i.Z)(HTMLElement));customElements.define("perspective-viewer-datagrid",Te),customElements.whenDefined("perspective-viewer").then((function(){customElements.get("perspective-viewer").registerPlugin("perspective-viewer-datagrid")})),function(){var e=document.createElement("style");e.textContent='regular-table{padding:0;margin:12px 0 0 12px;scrollbar-color:transparent transparent;scrollbar-width:thin;outline:none}regular-table:hover{scrollbar-color:rgba(0,0,0,.3) transparent}.sub-cell-scroll-enabled regular-table table tbody td,.sub-cell-scroll-enabled regular-table table thead th:not(.rt-group-corner){transform:translate(var(--regular-table--transform-x, 0px))}.sub-cell-scroll-enabled regular-table table tbody{transform:translateY(var(--regular-table--transform-y, 0px))}.sub-cell-scroll-enabled regular-table table tbody tr:first-child td,.sub-cell-scroll-enabled regular-table table tbody tr:first-child th{clip-path:polygon(0 var(--regular-table--clip-y, 0),0 200%,200% 200%,200% var(--regular-table--clip-y, 0))}.sub-cell-scroll-enabled regular-table table thead th.rt-group-corner{background:var(--plugin--background, white);z-index:1}.sub-cell-scroll-enabled regular-table table tbody tr td:first-of-type{clip-path:polygon(var(--regular-table--clip-x, 0) 0,var(--regular-table--clip-x, 0) 200%,200% 200%,200% 0)}.sub-cell-scroll-enabled regular-table table tbody tr:first-child td:first-of-type{clip-path:polygon(var(--regular-table--clip-x, 0) var(--regular-table--clip-y, 0),var(--regular-table--clip-x, 0) 200%,200% 200%,200% var(--regular-table--clip-y, 0))}regular-table{font-family:inherit}regular-table div[tabindex]{outline:none}regular-table>div{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden}regular-table th{text-align:center}regular-table thead tr:not(:last-child) th{overflow:hidden;max-width:0px}regular-table thead tr:last-child .rt-float,regular-table tbody .rt-float{text-align:right}regular-table thead .rt-integer,regular-table tbody .rt-integer{text-align:right}regular-table tbody th{text-align:left}regular-table span.rt-tree-container{display:flex;align-items:center;height:100%}regular-table thead .rt-string,regular-table tbody .rt-string,regular-table thead .rt-date,regular-table tbody .rt-date,regular-table thead .rt-datetime,regular-table tbody .rt-datetime{text-align:left}regular-table thead tr:last-child th{border-bottom:1px solid #eaedef}regular-table tbody tr:first-child td,regular-table tbody tr:first-child th{border-top:1px solid transparent!important}regular-table th{position:relative}regular-table tr th span.rt-tree-group{margin-left:5px;margin-right:15px;border-left:1px solid #eee;height:100%}regular-table td,regular-table th{white-space:nowrap;font-size:12px;padding:0 5px;height:19px}regular-table tr:hover td{background:#eee;opacity:1}regular-table tr:hover{color:#333}regular-table table *{box-sizing:border-box}regular-table table{position:absolute;overflow:hidden;color:#666;outline:none}regular-table span.rt-row-header-icon{color:#aaa;padding-right:4px;font-family:var(--button--font-family, "Material Icons")}regular-table span.rt-column-header-icon{font-size:10px;padding-left:3px;display:inline-block;width:10px;font-family:var(--button--font-family, "Material Icons")}regular-table span.rt-row-header-icon:hover{color:#1a7da1;text-shadow:0px 0px 3px #1a7da1}regular-table .rt-selected td{background-color:#eee}regular-table .rt-cell-clip{overflow:hidden;text-overflow:ellipsis}regular-table td span.rt-group-name,regular-table th span.rt-group-name{margin-right:-5px;padding-right:5px;padding-left:8px;flex:1;height:100%}regular-table th span.rt-group-name{text-align:left}regular-table td th span.rt-group-leaf,regular-table th span.rt-group-leaf{margin-left:16px;height:100%}regular-table .rt-column-resize{height:100%;width:10px;position:absolute;top:0;right:0;cursor:col-resize}regular-table a{color:var(--rt-pos-cell--color)}regular-table a:visited{color:var(--active--color)}regular-table::-webkit-scrollbar,regular-table::-webkit-scrollbar-corner{background-color:transparent;height:12px;width:12px}regular-table::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#0000;border-radius:5px}regular-table::-webkit-scrollbar-thumb:horizontal{border-bottom:2px solid transparent;border-top:2px solid transparent}regular-table::-webkit-scrollbar-thumb:vertical{border-left:2px solid transparent;border-right:2px solid transparent}regular-table:hover::-webkit-scrollbar-thumb{background-color:#00000026}regular-table::-webkit-scrollbar-thumb:hover{background-color:#0000004d}.psp-header-border:not(.psp-is-top):not(.psp-header-leaf){box-shadow:1px 0 var(--inactive--color, #eaedef)}.psp-header-group{box-shadow:0 10px 0 -9px var(--inactive--color, #eaedef)}.psp-is-top{box-shadow:5px 4px 0 -4px var(--inactive--color, #eaedef)}.psp-is-top.psp-header-group:not(.psp-header-group-corner){box-shadow:5px 4px 0 -4px var(--inactive--color, #eaedef),0 10px 0 -9px var(--inactive--color, #eaedef)}.psp-header-border.psp-header-group:not(.psp-is-top):not(.psp-header-group-corner){box-shadow:1px 0 var(--inactive--color, #eaedef),0 10px 0 -9px var(--inactive--color, #eaedef)}.psp-header-leaf.psp-header-border{box-shadow:5px -4px 0 -4px var(--inactive--color, #eaedef)}tr:only-child th{box-shadow:none!important}regular-table tbody tr:hover th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover td:not(.psp-row-selected):not(.psp-row-subselected){border-color:var(--rt-hover--border-color, #c5c9d080)!important;background-color:transparent;box-shadow:0 1px 0 var(--rt-hover--border-color, #c5c9d080),0 3px #0000000d,0 5px #00000003}regular-table tbody tr:hover+tr th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr td:not(.psp-row-selected):not(.psp-row-subselected){border-top-color:transparent}regular-table tbody tr th:first-child:not(:empty),regular-table tbody tr th:first-child:empty+th:not(:empty),regular-table tbody tr th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr td:first-child{border-left-width:1px;border-left-color:transparent}regular-table tbody tr th:last-child,regular-table tbody tr td:last-child{border-right-width:1px;border-right-color:transparent}regular-table tbody tr:hover{color:#161616}regular-table tbody tr:hover th:first-child:not(:empty),regular-table tbody tr:hover th:first-child:empty+th:not(:empty),regular-table tbody tr:hover th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr:hover td:first-child{border-left-color:var(--rt-hover--border-color, #c5c9d080)!important}regular-table tbody tr:hover th:last-child,regular-table tbody tr:hover td:last-child{border-right-color:var(--rt-hover--border-color, #c5c9d080)!important}perspective-viewer[settings] regular-table .psp-header-leaf{height:36px;vertical-align:top;padding-top:2px}perspective-viewer[settings] regular-table .psp-header-leaf:not(.psp-header-corner):before{font-family:var(--button--font-family, inherit);content:var(--column-style-open-button--content, var(--config-button-icon--content, "\\1f527"));position:absolute;width:calc(100% - 8px);left:5px;bottom:0px;color:var(--inactive--color, #b4b7be)}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:not(.psp-header-corner):before{color:inherit;cursor:pointer}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner){pointer-events:none}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner):before{content:var(--column-style-close-button--content, "X")}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:hover:before{color:#338dcd}perspective-viewer[settings] regular-table .psp-header-leaf .rt-column-resize{height:18px}.psp-row-selected,:hover .psp-row-selected,:hover th.psp-tree-leaf.psp-row-selected,:hover th.psp-tree-label.psp-row-selected{color:#fff!important;background-color:#ea7319!important;border-color:#ea7319!important}.psp-row-selected.psp-tree-label:not(:hover):before{color:#fff}.psp-row-subselected,:hover .psp-row-subselected,:hover th.psp-tree-leaf.psp-row-subselected,:hover th.psp-tree-label.psp-row-subselected{background:rgba(234,115,25,.2)!important}.psp-error{color:red}td:focus{outline:#666;outline-style:dotted;outline-width:1px}perspective-viewer.dragging regular-table{pointer-events:none}.psp-header-border:last-child{border-right-width:0px}.psp-header-sort-desc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-desc--content, "\\2193")}.psp-header-sort-asc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-asc--content, "\\2191")}.psp-header-sort-col-desc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-col-desc--content, "\\2190")}.psp-header-sort-col-asc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-col-asc--content, "\\2192")}tbody th:last-of-type{border-right:1px solid #eaedef;overflow:hidden;text-overflow:ellipsis}tbody th:empty{background-image:linear-gradient(to right,transparent 9px,#eee 10px,transparent 11px);background-repeat:no-repeat;min-width:20px;max-width:20px;pointer-events:none}.psp-tree-label{max-width:0px;min-width:0px}.psp-tree-label:before{color:#ccc;font-family:var(--button--font-family, inherit);padding-right:11px;vertical-align:-1px}.psp-tree-label-expand:before{content:var(--tree-label-expand--content, "+")}.psp-tree-label-collapse:before{content:var(--tree-label-collapse--content, "-")}.psp-tree-label:hover:before{color:#338dcd;text-shadow:0px 0px 5px #338dcd}regular-table thead tr:last-child th{border-bottom-width:1px;border-bottom-color:var(--inactive--color, #eaedef)}.psp-tree-leaf{padding-left:24px}.psp-align-right{text-align:right}.psp-align-left{text-align:left}.psp-positive:not(:focus){color:var(--rt-pos-cell--color, #338dcd)}.psp-negative:not(:focus){color:var(--rt-neg-cell--color, #ff5942)}regular-table table tbody td{min-width:52px!important}.psp-is-width-override .rt-column-resize,.rt-column-resize:hover{border:1px dashed #999;border-bottom-width:0px;border-left-width:0px}.psp-bool-type{font-family:var(--button--font-family, "Material Icons")}.boolean-editable{cursor:pointer}regular-table table{user-select:none;color:#161616;border-collapse:separate}regular-table table th{font-weight:400}regular-table table td,regular-table table th{border-color:#eaedef;height:23px}regular-table table .psp-header-group{text-overflow:ellipsis}regular-table table .psp-header-leaf{border-bottom-width:0px}regular-table table td,regular-table table th.psp-tree-label,regular-table table th.psp-tree-label,regular-table table th.psp-tree-leaf,regular-table table tbody tr:first-child th{border-style:solid;border-width:0px;border-top-width:1px}regular-table table tbody th:empty{background-position:0px -10px}@keyframes pulse_pos{0%{background-color:var(--pulse--background-color-start, rgba(0, 128, 255, .5))}to{background-color:var(--pulse--background-color-end, rgba(0, 128, 255, 0))}}@keyframes pulse_pos2{0%{background-color:var(--pulse--background-color-start, rgba(0, 128, 255, .5))}to{background-color:var(--pulse--background-color-end, rgba(0, 128, 255, 0))}}@keyframes pulse_neg{0%{background-color:var(--pulse--background-color-start, rgba(255, 25, 0, .5))}to{background-color:var(--pulse--background-color-end, rgba(255, 25, 0, 0))}}@keyframes pulse_neg2{0%{background-color:var(--pulse--background-color-start, rgba(255, 25, 0, .5))}to{background-color:var(--pulse--background-color-end, rgba(255, 25, 0, 0))}}\n',document.head.insertBefore(e,document.head.firstChild)}()},1820:function(e,t,n){n.d(t,{ZP:function(){return ee}});var r=n(3219),a=n(1092),o=n(7791),i=n(8549),c=n(6782);var s=n.p+"3d1f100a500dd595.wasm",l=Object.create,u=Object.defineProperty,f=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,_=function(e){return u(e,"__esModule",{value:!0})},h=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},b=function(e){return function(e,t,n){if(t&&"object"==typeof t||"function"==typeof t)for(var r,a=function(){var a=r.value;!g.call(e,a)&&"default"!==a&&u(e,a,{get:function(){return t[a]},enumerable:!(n=f(t,a))||n.enumerable})},o=(0,i.Z)(d(t));!(r=o()).done;)a();return e}(_(u(null!=e?l(p(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},v=h((function(e,t){t.exports.default={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}})),m=h((function(e,t){var n=v().default;function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(!n.length)return e;var i=n.shift();if(r(e)&&r(i))for(var c in i){var s,l;r(i[c])?(e[c]||Object.assign(e,((s={})[c]={},s)),a(e[c],i[c])):Object.assign(e,((l={})[c]=i[c],l))}return a.apply(void 0,[e].concat(n))}t.exports.get_types=function(){return Object.keys(t.exports.get_config().types)},t.exports.get_type_config=function(e){var n={};if(t.exports.get_config().types[e]&&Object.assign(n,t.exports.get_config().types[e]),n.type){var r=t.exports.get_type_config(n.type);return Object.assign(r,n),r}return n},globalThis.__PERSPECTIVE_CONFIG__=void 0,t.exports.override_config=function(e){globalThis.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),globalThis.__PERSPECTIVE_CONFIG__=a(n,e)},t.exports.get_config=function(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=a(n,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}})),w={};!function(e,t){for(var n in _(e),t)u(e,n,{get:t[n],enumerable:!0})}(w,{COLUMN_SEPARATOR_STRING:function(){return N},CONFIG_ALIASES:function(){return x},CONFIG_VALID_KEYS:function(){return k},DATA_TYPES:function(){return y},FILTER_OPERATORS:function(){return T},SORT_ORDERS:function(){return Z},SORT_ORDER_IDS:function(){return S},TYPE_AGGREGATES:function(){return A},TYPE_FILTERS:function(){return z}});var y={integer:"integer",float:"float",string:"string",boolean:"boolean",date:"date",datetime:"datetime",object:"object"},x={row_pivot:"group_by","row-pivot":"group_by","row-pivots":"group_by",col_pivot:"split_by",col_pivots:"split_by",column_pivot:"split_by","column-pivot":"split_by","column-pivots":"split_by",filters:"filter",sorts:"sort"},k=["viewport","group_by","split_by","aggregates","columns","filter","sort","computed_columns","expressions","group_by_depth","split_by_depth","filter_op"],V=["any","avg","abs sum","count","distinct count","dominant","first by index","last by index","last minus first","last","high","join","low","high minus low","mean","median","pct sum parent","pct sum grand total","stddev","sum","sum abs","sum not null","unique","var"],E=["any","count","distinct count","distinct leaf","dominant","first by index","join","last by index","last","unique"],Z=["none","asc","desc","col asc","col desc","asc abs","desc abs","col asc abs","col desc abs"],S=[2,0,1,0,1,3,4,3,4],A={string:E,float:V,integer:V,boolean:["any","count","distinct count","distinct leaf","dominant","first by index","last by index","last","unique"],datetime:E,date:E},T={lessThan:"<",greaterThan:">",equals:"==",lessThanOrEquals:"<=",greaterThanOrEquals:">=",doesNotEqual:"!=",isNull:"is null",isNotNull:"is not null",isIn:"in",isNotIn:"not in",contains:"contains",bitwiseAnd:"&",bitwiseOr:"|",and:"and",or:"or",beginsWith:"begins with",endsWith:"ends with"},O=[T.bitwiseAnd,T.bitwiseOr,T.equals,T.doesNotEqual,T.or,T.and,T.isNull,T.isNotNull],L=[T.lessThan,T.greaterThan,T.equals,T.lessThanOrEquals,T.greaterThanOrEquals,T.doesNotEqual,T.isNull,T.isNotNull],C=[T.equals,T.contains,T.doesNotEqual,T.isIn,T.isNotIn,T.beginsWith,T.endsWith,T.isNull,T.isNotNull],M=[T.lessThan,T.greaterThan,T.equals,T.lessThanOrEquals,T.greaterThanOrEquals,T.doesNotEqual,T.isNull,T.isNotNull],N="|",z={string:C,float:L,integer:L,boolean:O,datetime:M,date:M},P=b(m()),j=new WeakMap,R=0;function I(e,t){return function(){for(var n,r=function(){},a=Array.prototype.slice.call(arguments,0,arguments.length),o=a.length-1;o>=0;o--)"function"==typeof a[o]&&(n=a.splice(o,1)[0]);var i=j.get(n);j.delete(n);var c={cmd:t||"view_method",name:this._name,method:e,args:a,subscribe:!0,callback_id:i};this._worker.post(c,n,r),this._worker.unsubscribe(t,n)}}function F(e,t){return function(){for(var n,r=function(){},a=Array.prototype.slice.call(arguments,0,arguments.length),o=a.length-1;o>=0;o--)"function"==typeof a[o]&&(n=a.splice(o,1)[0]);R++,j.set(n,R);var i={cmd:t||"view_method",name:this._name,method:e,args:a,subscribe:!0,callback_id:R};this._worker.post(i,n,r,!0)}}function D(e,t){return function(){var n=Array.prototype.slice.call(arguments,0,arguments.length);return new Promise(function(r,a){var o={cmd:t||"view_method",name:this._name,method:e,args:n,subscribe:!1};this._worker.post(o,r,a)}.bind(this))}}function Y(e,t,n){var r=this;return new Promise((function(a,o){var i;r._worker=e,r._name=Math.random()+"",r._worker.post({cmd:"view",view_name:r._name,table_name:t,config:n},(function(){a(r)}),o),!0===r._worker._initialized&&(null==(i=r._worker._features)||!i.wait_for_response)&&a(r)}))}function B(e){var t=e;do{for(var n,r=(0,i.Z)(Object.getOwnPropertyNames(t));!(n=r()).done;){var a=n.value,o=e[a];"constructor"!==a&&"function"==typeof o&&(e[a]=o.bind(e))}}while(t=t!==Object&&Object.getPrototypeOf(t))}function H(e,t,n){var r=this;return new Promise((function(a,o){var i;r._worker=e,r._name=n.name||Math.random()+"",B(r),t.to_arrow?(r._worker.post({cmd:"table",name:r._name,args:[],options:n||{}}),t.to_arrow().then((function(e){r._worker.post({cmd:"table",name:r._name,args:[e],options:n||{}},(function(){t.on_update((function(e){r.update(e.delta)}),{mode:"row"}),a(r)}),o)}))):r._worker.post({cmd:"table",name:r._name,args:[t],options:n||{}},(function(){a(r)}),o),!0===r._worker._initialized&&(null==(i=r._worker._features)||!i.wait_for_response)&&a(r)}))}function W(e,t){this._worker=e,this._name=t}Y.prototype,Y.prototype.get_config=D("get_config"),Y.prototype.get_min_max=D("get_min_max"),Y.prototype.to_json=D("to_json"),Y.prototype.to_arrow=D("to_arrow"),Y.prototype.to_columns=D("to_columns"),Y.prototype.to_csv=D("to_csv"),Y.prototype.schema=D("schema"),Y.prototype.expression_schema=D("expression_schema"),Y.prototype.column_paths=D("column_paths"),Y.prototype.num_columns=D("num_columns"),Y.prototype.num_rows=D("num_rows"),Y.prototype.set_depth=D("set_depth"),Y.prototype.get_row_expanded=D("get_row_expanded"),Y.prototype.expand=D("expand"),Y.prototype.collapse=D("collapse"),Y.prototype.delete=D("delete"),Y.prototype.col_to_js_typed_array=D("col_to_js_typed_array"),Y.prototype.on_update=F("on_update","view_method"),Y.prototype.remove_update=I("remove_update","view_method"),Y.prototype.on_delete=F("on_delete","view_method"),Y.prototype.remove_delete=I("remove_delete","view_method"),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var a,o,i=0|t,c=Math.max(i>=0?i:r-Math.abs(i),0);for(;c<r;){if((a=n[c])===(o=e)||"number"==typeof a&&"number"==typeof o&&isNaN(a)&&isNaN(o))return!0;c++}return!1}}),H.prototype.type="table",W.prototype=H.prototype,H.prototype.view=function(e){return new Y(this._worker,this._name,e)},H.prototype.get_index=D("get_index","table_method"),H.prototype.get_limit=D("get_limit","table_method"),H.prototype.make_port=D("make_port","table_method"),H.prototype.remove_port=D("remove_port","table_method"),H.prototype.schema=D("schema","table_method"),H.prototype.validate_expressions=D("validate_expressions","table_method"),H.prototype.is_valid_filter=D("is_valid_filter","table_method"),H.prototype.size=D("size","table_method"),H.prototype.columns=D("columns","table_method"),H.prototype.clear=D("clear","table_method"),H.prototype.replace=D("replace","table_method"),H.prototype.delete=D("delete","table_method"),H.prototype.on_delete=F("on_delete","table_method"),H.prototype.remove=D("remove","table_method"),H.prototype.remove_delete=I("remove_delete","table_method"),H.prototype.update=function(e,t){var n=this;return new Promise((function(r,a){n._worker.post({name:n._name,cmd:"table_method",method:"update",args:[e,t||{}]},r,a,!1)}))},H.prototype.execute=function(e){this._worker.post({cmd:"table_execute",name:this._name,f:e.toString()})};var U=function(){function e(){this._initialized=!1,this._worker={initialized:{value:!1},transferable:!1,msg_id:0,handlers:{},messages:[]},B(this)}var t=e.prototype;return t.unsubscribe=function(e,t){for(var n=0,r=Object.keys(this._worker.handlers);n<r.length;n++){var a=r[n];this._worker.handlers[a].resolve===t&&delete this._worker.handlers[a]}},t.post=function(e,t,n,r){var a=this;void 0===r&&(r=!1),++this._worker.msg_id,(t||n)&&(this._worker.handlers[this._worker.msg_id]={resolve:t,reject:n,keep_alive:r}),e.id=this._worker.msg_id,this._worker.initialized.value?this.send(e):this._worker.messages.push((function(){var n;a.send(e),("table"===e.cmd||"view"===e.cmd)&&(null==(n=a._features)||!n.wait_for_response)&&t&&t()}))},t.memory_usage=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){t.post({cmd:"memory_usage"},e,n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.initialize_profile_thread=function(){var e=this;this._worker.initialized.value?this.send({id:-1,cmd:"init_profile_thread"}):this._worker.messages.push((function(){return e.send({id:-1,cmd:"init_profile_thread"})}))},t.send=function(){throw new Error("send() not implemented")},t.open_table=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new W(this,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._handle=function(e){if(!this._worker.initialized.value){var t;if(!this._initialized&&"undefined"!=typeof document&&document&&void 0!==typeof window&&window){try{var n=document.createEvent("Event");n.initEvent("perspective-ready",!1,!0),window.dispatchEvent(n)}catch(u){}this._initialized=!0}var r=this._worker.messages;if(this._worker.initialized.value=!0,this._worker.messages=[],null!=(t=e.data)&&t.data){this._features={};for(var a,o=(0,i.Z)(e.data.data);!(a=o()).done;){var c=a.value;this._features[c]=!0}}if(r)for(var s in r)r.hasOwnProperty(s)&&r[s]()}if(e.data.id){var l=this._worker.handlers[e.data.id];l&&(e.data.error?l.reject(e.data.error):l.resolve(e.data.data),l.keep_alive||delete this._worker.handlers[e.data.id])}},t.table=function(e,t){return new H(this,e,t||{})},t.terminate=function(){this._worker.terminate(),this._worker=void 0},e}(),q=function(e){function t(t){var n;(n=e.call(this)||this)._ws=t,n._ws.binaryType="arraybuffer",n._full_binary,n._total_chunk_length=0,n._pending_binary_length=0,n._ws.onopen=function(){n.send({id:-1,cmd:"init"})};return setTimeout((function e(){n._ws.send("ping"),setTimeout(e,3e4)}),3e4),n._ws.onmessage=function(e){if("pong"!==e.data)if(n._pending_binary){var t=e.data;if(n._full_binary.set(new Uint8Array(t),n._total_chunk_length),n._total_chunk_length+=t.byteLength,n._total_chunk_length!==n._pending_binary_length)return;t=n._full_binary.buffer;var r={data:{id:n._pending_binary,data:t}};if(void 0!==n._pending_port_id){var a={port_id:n._pending_port_id,delta:t};r.data.data=a}n._handle(r),delete n._pending_binary,delete n._pending_binary_length,delete n._pending_port_id,n._total_chunk_length=0,n._full_binary=null}else(e=JSON.parse(e.data)).binary_length?(n._pending_binary=e.id,n._pending_binary_length=e.binary_length,e.data&&void 0!==e.data.port_id&&(n._pending_port_id=e.data.port_id),n._full_binary=new Uint8Array(n._pending_binary_length)):n._handle({data:e})},n}(0,r.Z)(t,e);var n=t.prototype;return n.send=function(e){if(e.args&&e.args.length>0&&e.args[0]instanceof ArrayBuffer&&void 0!==e.args[0].byteLength){var t=e;return e.binary_length=e.args[0].byteLength,this._ws.send(JSON.stringify(t)),void this._ws.send(e.args[0])}this._ws.send(JSON.stringify(e))},n.terminate=function(){var e=this;return new Promise((function(t){e._ws.onclose=t,e._ws.close()}))},t}(U),G=b(m());function K(e){return 559903==new Uint32Array(e.slice(0,4))[0]}var X,J=function(){return X||(X=new(function(){function e(){}var t=e.prototype;return t.worker=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Worker(n.p+"perspective.worker.js");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.wasm=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,o,i,l,u,f,d,p,g,_,h,b;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s;case 2:if(t=e.sent,n=[],r=0,o=new c.Q1((function(e){e&&(r+=e.byteLength,n.push(e))})),!(t.buffer&&t.buffer instanceof ArrayBuffer)){e.next=10;break}console.warn('Perspective has been compiled in "inline" mode.  While Perspective\'s runtime performance is not affected, you may see smaller assets size and faster engine initial load time using "@finos/perspective-webpack-plugin" to build your application.\nhttps://perspective.finos.org/docs/md/js.html'),K(t.buffer)?o.push(t,!0):(r=t.byteLength,n=[t]),e.next=28;break;case 10:if(!(t instanceof ArrayBuffer)){e.next=14;break}r=t.byteLength,n=[new Uint8Array(t)],e.next=28;break;case 14:return e.next=16,fetch(t);case 16:i=e.sent.body.getReader(),l=0;case 18:return e.next=20,i.read();case 20:if(u=e.sent,f=u.value,!(d=u.done)){e.next=25;break}return e.abrupt("break",28);case 25:0===l&&K(f.buffer)||1===l?(l=1,o.push(f,d)):(l=2,r+=f.byteLength,n.push(f));case 26:e.next=18;break;case 28:for(p=0,g=new Uint8Array(r),_=0,h=n;_<h.length;_++)b=h[_],g.set(b,p),p+=b.byteLength;return e.abrupt("return",(this._wasm=g.buffer,this._wasm));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}())),X},$=function(e){function t(t){var n;return t&&(0,G.override_config)(t),(n=e.call(this)||this).register(),n}(0,r.Z)(t,e);var n=t.prototype;return n.register=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={cmd:"init",config:(0,P.get_config)()},"undefined"!=typeof WebAssembly){e.next=3;break}throw new Error("WebAssembly not supported.");case 3:return e.next=5,Promise.all([J().worker(),J().wasm()]);case 5:for(o in r=e.sent,t=r[0],n.buffer=r[1],this._worker)t[o]=this._worker[o];this._worker=t,this._worker.addEventListener("message",this._handle.bind(this)),this._worker.postMessage(n),this._detect_transferable();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.send=function(e){this._worker.transferable&&e.args&&e.args[0]instanceof ArrayBuffer?this._worker.postMessage(e,[e.args[0]]):this._worker.postMessage(e)},n.terminate=function(){this._worker.terminate(),this._worker=void 0},n._detect_transferable=function(){var e=new ArrayBuffer(1);this._worker.postMessage(e,[e]),this._worker.transferable=0===e.byteLength,this._worker.transferable?console.debug("Transferable support detected"):console.warn("Transferable support not detected")},t}(U),Q=function(){var e,t;return{getInstance:function(n){void 0===e&&(e=new $(n));var r=JSON.stringify(n);if(t&&r!==t)throw new Error("Configuration object for shared_worker() has changed - this is probably a bug in your application.");return t=r,e}}}();P.get_type_config;var ee=Object.assign({override:function(e){return J().set(e)},worker:function(e){return new $(e)},websocket:function(e){return void 0===e&&(e=window.location.origin.replace("http","ws")),new q(new WebSocket(e))},shared_worker:function(e){return Q.getInstance(e)}},Object.keys(w))},9382:function(e,t,n){var r=n(7169),a=n(8549),o=n(1092),i=n(7791),c=n(1976),s=n(3219),l=n(8953),u=window.ClipboardItem,f=n(2710);function d(){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.j();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return _.apply(this,arguments)}function _(){return(_=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(641).then(n.bind(n,3071));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h,b=window.ResizeObserver,v=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});v.decode();var m=null;function w(){return null!==m&&m.buffer===h.memory.buffer||(m=new Uint8Array(h.memory.buffer)),m}function y(e,t){return v.decode(w().subarray(e,e+t))}var x=new Array(32).fill(void 0);x.push(void 0,null,!0,!1);var k=x.length;function V(e){k===x.length&&x.push(x.length+1);var t=k;return k=x[t],x[t]=e,t}function E(e){return x[e]}var Z=0,S=new TextEncoder("utf-8"),A="function"==typeof S.encodeInto?function(e,t){return S.encodeInto(e,t)}:function(e,t){var n=S.encode(e);return t.set(n),{read:e.length,written:n.length}};function T(e,t,n){if(void 0===n){var r=S.encode(e),a=t(r.length);return w().subarray(a,a+r.length).set(r),Z=r.length,a}for(var o=e.length,i=t(o),c=w(),s=0;s<o;s++){var l=e.charCodeAt(s);if(l>127)break;c[i+s]=l}if(s!==o){0!==s&&(e=e.slice(s)),i=n(i,o,o=s+3*e.length);var u=w().subarray(i+s,i+o);s+=A(e,u).written}return Z=s,i}var O=null;function L(){return null!==O&&O.buffer===h.memory.buffer||(O=new Int32Array(h.memory.buffer)),O}function C(e){var t=E(e);return function(e){e<36||(x[e]=k,k=e)}(e),t}function M(e){return null==e}var N=null;function z(){return null!==N&&N.buffer===h.memory.buffer||(N=new Float64Array(h.memory.buffer)),N}function P(e,t,n,r){var a={a:e,b:t,cnt:1,dtor:n},o=function(){a.cnt++;var e=a.a;a.a=0;try{for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return r.apply(void 0,[e,a.b].concat(n))}finally{0==--a.cnt?h.__wbindgen_export_2.get(a.dtor)(e,a.b):a.a=e}};return o.original=a,o}function j(e,t){h.__wbindgen_export_3(e,t)}function R(e,t,n,r){var a={a:e,b:t,cnt:1,dtor:n},o=function(){a.cnt++;try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(void 0,[a.a,a.b].concat(t))}finally{0==--a.cnt&&(h.__wbindgen_export_2.get(a.dtor)(a.a,a.b),a.a=0)}};return o.original=a,o}function I(e,t,n,r,a){return C(h.__wbindgen_export_4(e,t,V(n),V(r),V(a)))}function F(e,t,n){h.__wbindgen_export_5(e,t,V(n))}function D(e,t,n){h.__wbindgen_export_6(e,t,V(n))}function Y(e,t,n){return C(h.__wbindgen_export_7(e,t,V(n)))}function B(e,t,n){h.__wbindgen_export_8(e,t,V(n))}function H(e,t,n){h.__wbindgen_export_9(e,t,V(n))}function W(e,t,n){return C(h.__wbindgen_export_10(e,t,V(n)))}function U(e,t){h.__wbindgen_export_11(e,t)}function q(e,t,n){h.__wbindgen_export_12(e,t,V(n))}var G=32;function K(e,t,n){try{h.__wbindgen_export_13(e,t,function(e){if(1==G)throw new Error("out of js stack");return x[--G]=e,G}(n))}finally{x[G++]=void 0}}var X=null;function J(){return null!==X&&X.buffer===h.memory.buffer||(X=new Uint32Array(h.memory.buffer)),X}function $(e,t){try{return e.apply(this,t)}catch(n){h.__wbindgen_export_14(V(n))}}function Q(e,t){for(var n=J().subarray(e/4,e/4+t),r=[],a=0;a<n.length;a++)r.push(C(n[a]));return r}function ee(){try{var e=h.__wbindgen_add_to_stack_pointer(-16);h.get_exprtk_commands(e);var t=L()[e/4+0],n=L()[e/4+1],r=Q(t,n).slice();return h.__wbindgen_export_15(t,4*n),r}finally{h.__wbindgen_add_to_stack_pointer(16)}}function te(e,t,n,r){h.__wbindgen_export_16(e,t,V(n),V(r))}var ne=function(){t.__wrap=function(e){var n=Object.create(t.prototype);return n.ptr=e,n};var e=t.prototype;function t(e){var n=h.copydropdownmenuelement_new(V(e));return t.__wrap(n)}return e.__destroy_into_raw=function(){var e=this.ptr;return this.ptr=0,e},e.free=function(){var e=this.__destroy_into_raw();h.__wbg_copydropdownmenuelement_free(e)},e.open=function(e){h.copydropdownmenuelement_open(this.ptr,V(e))},e.hide=function(){h.copydropdownmenuelement_hide(this.ptr)},e.unsafe_set_model=function(e){h.copydropdownmenuelement_unsafe_set_model(this.ptr,e)},e.connected_callback=function(){h.copydropdownmenuelement_connected_callback(this.ptr)},t}(),re=function(){t.__wrap=function(e){var n=Object.create(t.prototype);return n.ptr=e,n};var e=t.prototype;function t(e){var n=h.exportdropdownmenuelement_new(V(e));return t.__wrap(n)}return e.__destroy_into_raw=function(){var e=this.ptr;return this.ptr=0,e},e.free=function(){var e=this.__destroy_into_raw();h.__wbg_exportdropdownmenuelement_free(e)},e.open=function(e){h.exportdropdownmenuelement_open(this.ptr,V(e))},e.hide=function(){h.exportdropdownmenuelement_hide(this.ptr)},e.unsafe_set_model=function(e){h.exportdropdownmenuelement_unsafe_set_model(this.ptr,e)},e.connected_callback=function(){h.exportdropdownmenuelement_connected_callback(this.ptr)},t}(),ae=function(){t.__wrap=function(e){var n=Object.create(t.prototype);return n.ptr=e,n};var e=t.prototype;function t(e,n,r){var a=h.perspectivenumbercolumnstyleelement_new(V(e),V(n),V(r));return t.__wrap(a)}return e.__destroy_into_raw=function(){var e=this.ptr;return this.ptr=0,e},e.free=function(){var e=this.__destroy_into_raw();h.__wbg_perspectivenumbercolumnstyleelement_free(e)},e.reset=function(e,t){h.perspectivenumbercolumnstyleelement_reset(this.ptr,V(e),V(t))},e.open=function(e){h.perspectivenumbercolumnstyleelement_open(this.ptr,V(e))},e.close=function(){h.perspectivenumbercolumnstyleelement_close(this.ptr)},e.destroy=function(){var e=this.__destroy_into_raw();h.perspectivenumbercolumnstyleelement_destroy(e)},e.connected_callback=function(){h.perspectivenumbercolumnstyleelement_connected_callback(this.ptr)},t}(),oe=function(){t.__wrap=function(e){var n=Object.create(t.prototype);return n.ptr=e,n};var e=t.prototype;function t(e,n,r){var a=h.perspectivestringcolumnstyleelement_new(V(e),V(n),V(r));return t.__wrap(a)}return e.__destroy_into_raw=function(){var e=this.ptr;return this.ptr=0,e},e.free=function(){var e=this.__destroy_into_raw();h.__wbg_perspectivestringcolumnstyleelement_free(e)},e.reset=function(e){h.perspectivestringcolumnstyleelement_reset(this.ptr,V(e))},e.open=function(e){h.perspectivestringcolumnstyleelement_open(this.ptr,V(e))},e.close=function(){h.perspectivestringcolumnstyleelement_close(this.ptr)},e.destroy=function(){var e=this.__destroy_into_raw();h.perspectivestringcolumnstyleelement_destroy(e)},e.connected_callback=function(){h.perspectivestringcolumnstyleelement_connected_callback(this.ptr)},t}(),ie=function(){t.__wrap=function(e){var n=Object.create(t.prototype);return n.ptr=e,n};var e=t.prototype;function t(e){var n=h.perspectiveviewerelement_new(V(e));return t.__wrap(n)}return e.__destroy_into_raw=function(){var e=this.ptr;return this.ptr=0,e},e.free=function(){var e=this.__destroy_into_raw();h.__wbg_perspectiveviewerelement_free(e)},e.connected_callback=function(){h.perspectiveviewerelement_connected_callback(this.ptr)},e.js_load=function(e){return C(h.perspectiveviewerelement_js_load(this.ptr,V(e)))},e.js_delete=function(){return C(h.perspectiveviewerelement_js_delete(this.ptr))},e.js_get_view=function(){return C(h.perspectiveviewerelement_js_get_view(this.ptr))},e.js_get_table=function(e){return C(h.perspectiveviewerelement_js_get_table(this.ptr,e))},e.js_flush=function(){return C(h.perspectiveviewerelement_js_flush(this.ptr))},e.js_restore=function(e){return C(h.perspectiveviewerelement_js_restore(this.ptr,V(e)))},e.js_save=function(e){var t=M(e)?0:T(e,h.__wbindgen_export_0,h.__wbindgen_export_1),n=Z;return C(h.perspectiveviewerelement_js_save(this.ptr,t,n))},e.js_download=function(e){return C(h.perspectiveviewerelement_js_download(this.ptr,e))},e.js_copy=function(e){return C(h.perspectiveviewerelement_js_copy(this.ptr,e))},e.js_reset=function(e){return C(h.perspectiveviewerelement_js_reset(this.ptr,V(e)))},e.js_resize=function(e){return C(h.perspectiveviewerelement_js_resize(this.ptr,e))},e.js_set_auto_size=function(e){h.perspectiveviewerelement_js_set_auto_size(this.ptr,e)},e.js_get_edit_port=function(){return h.perspectiveviewerelement_js_get_edit_port(this.ptr)},e.js_restyle_element=function(){return C(h.perspectiveviewerelement_js_restyle_element(this.ptr))},e.js_reset_themes=function(e){var t=M(e)?0:function(e,t){for(var n=t(4*e.length),r=J(),a=0;a<e.length;a++)r[n/4+a]=V(e[a]);return Z=e.length,n}(e,h.__wbindgen_export_0),n=Z;return C(h.perspectiveviewerelement_js_reset_themes(this.ptr,t,n))},e.js_set_throttle=function(e){h.perspectiveviewerelement_js_set_throttle(this.ptr,!M(e),M(e)?0:e)},e.js_toggle_config=function(e){return C(h.perspectiveviewerelement_js_toggle_config(this.ptr,M(e)?16777215:e?1:0))},e.js_get_all_plugins=function(){return C(h.perspectiveviewerelement_js_get_all_plugins(this.ptr))},e.js_get_plugin=function(e){var t=M(e)?0:T(e,h.__wbindgen_export_0,h.__wbindgen_export_1),n=Z;return C(h.perspectiveviewerelement_js_get_plugin(this.ptr,t,n))},e.js_unsafe_get_model=function(){return h.perspectiveviewerelement_js_unsafe_get_model(this.ptr)},t}();function ce(e,t){return se.apply(this,arguments)}function se(){return(se=(0,i.Z)((0,o.Z)().mark((function e(t,n){var r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("function"==typeof Response&&t instanceof Response)){e.next=23;break}if("function"!=typeof WebAssembly.instantiateStreaming){e.next=15;break}return e.prev=2,e.next=5,WebAssembly.instantiateStreaming(t,n);case 5:case 20:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),"application/wasm"==t.headers.get("Content-Type")){e.next=14;break}console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e.t0),e.next=15;break;case 14:throw e.t0;case 15:return e.next=17,t.arrayBuffer();case 17:return r=e.sent,e.next=20,WebAssembly.instantiate(r,n);case 23:return e.next=25,WebAssembly.instantiate(t,n);case 25:if(!((a=e.sent)instanceof WebAssembly.Instance)){e.next=30;break}return e.abrupt("return",{instance:a,module:t});case 30:return e.abrupt("return",a);case 31:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function le(e){return ue.apply(this,arguments)}function ue(){return ue=(0,i.Z)((0,o.Z)().mark((function e(t){var r,a,i,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=new URL(n(9851),n.b)),(r={}).wbg={},r.wbg.__wbindgen_json_parse=function(e,t){return V(JSON.parse(y(e,t)))},r.wbg.__wbindgen_json_serialize=function(e,t){var n=E(t),r=T(JSON.stringify(void 0===n?null:n),h.__wbindgen_export_0,h.__wbindgen_export_1),a=Z;L()[e/4+1]=a,L()[e/4+0]=r},r.wbg.__wbindgen_object_drop_ref=function(e){C(e)},r.wbg.__wbindgen_object_clone_ref=function(e){return V(E(e))},r.wbg.__wbindgen_jsval_eq=function(e,t){return E(e)===E(t)},r.wbg.__wbindgen_cb_drop=function(e){var t=C(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},r.wbg.__wbindgen_string_new=function(e,t){return V(y(e,t))},r.wbg.__wbg_restore_f1fbc066c9637e24=function(e,t){E(e).restore(E(t))},r.wbg.__wbg_numrows_dfd6ed430e0147ff=function(){return $((function(e){return V(E(e).num_rows())}),arguments)},r.wbg.__wbg_register_1a0bbab9f7619662=function(e,t){E(e).register(C(t))},r.wbg.__wbg_setMonarchTokensProvider_1fa51a80d68f1ac1=function(e,t,n,r){E(e).setMonarchTokensProvider(y(t,n),C(r))},r.wbg.__wbg_setLanguageConfiguration_d6c86e31029d9ef5=function(e,t,n,r){E(e).setLanguageConfiguration(y(t,n),C(r))},r.wbg.__wbg_registerCompletionItemProvider_61ecf83f366d2e16=function(e,t,n,r){E(e).registerCompletionItemProvider(y(t,n),C(r))},r.wbg.__wbg_delete_cd3c8d59be8fee68=function(){return $((function(e){return V(E(e).delete())}),arguments)},r.wbg.__wbg_monacomodule_9d24db234e2e1549=function(){return V(g())},r.wbg.__wbg_schema_b1cd087318fe451d=function(){return $((function(e){return V(E(e).schema())}),arguments)},r.wbg.__wbg_default_3edfeada4cfc405b=function(){return V(d())},r.wbg.__wbg_restyle_d98bfa634bd438a3=function(){return $((function(e,t){return V(E(e).restyle(E(t)))}),arguments)},r.wbg.__wbg_size_ea3857b7b9c01a01=function(){return $((function(e){return V(E(e).size())}),arguments)},r.wbg.__wbg_toarrow_e23fb00f4ad5e9f8=function(){return $((function(e){return V(E(e).to_arrow())}),arguments)},r.wbg.__wbg_schema_ad095ebcdb4dd76f=function(){return $((function(e){return V(E(e).schema())}),arguments)},r.wbg.__wbg_tocolumns_d45b3454003d346b=function(){return $((function(e){return V(E(e).to_columns())}),arguments)},r.wbg.__wbg_columns_b15d8d6c4a353055=function(){return $((function(e){return V(E(e).columns())}),arguments)},r.wbg.__wbg_numcolumns_6a8d86bb12e88692=function(){return $((function(e){return V(E(e).num_columns())}),arguments)},r.wbg.__wbg_makeport_8c752476acd3fe27=function(){return $((function(e){return V(E(e).make_port())}),arguments)},r.wbg.__wbg_draw_f7001e36a5451367=function(){return $((function(e,t,n,r,a,o,i){return V(E(e).draw(E(t),0===n?void 0:r>>>0,0===a?void 0:o>>>0,0!==i))}),arguments)},r.wbg.__wbg_validateexpressions_eca5656ca2844419=function(){return $((function(e,t){return V(E(e).validate_expressions(C(t)))}),arguments)},r.wbg.__wbg_update_b0b2df3342b63ce2=function(){return $((function(e,t,n,r,a,o,i){return V(E(e).update(E(t),0===n?void 0:r>>>0,0===a?void 0:o>>>0,0!==i))}),arguments)},r.wbg.__wbg_tocsv_2ec429ab1e0bb451=function(){return $((function(e,t){return V(E(e).to_csv(C(t)))}),arguments)},r.wbg.__wbg_resize_8a11e82f499e6d89=function(){return $((function(e){return V(E(e).resize())}),arguments)},r.wbg.__wbg_view_e3b1f5dab63015c7=function(){return $((function(e,t){return V(E(e).view(E(t)))}),arguments)},r.wbg.__wbindgen_is_null=function(e){return null===E(e)},r.wbg.__wbg_lineNumber_6b2a1c0159871238=function(e){return E(e).lineNumber},r.wbg.__wbg_column_885264f87b0a4a0b=function(e){return E(e).column},r.wbg.__wbg_findTokenIndexAtOffset_847b202bf8c16c65=function(e,t){return E(e).findTokenIndexAtOffset(t>>>0)},r.wbg.__wbg_getClassName_5bc865fe97705383=function(e,t){return V(E(e).getClassName(t>>>0))},r.wbg.__wbg_triggerKind_9e780becc9ed4ce7=function(e){return E(e).triggerKind},r.wbg.__wbg_delete_55c2b041a4419d5d=function(e){E(e).delete()},r.wbg.__wbg_setrenderwarning_2b6ccbc5a0b49b4f=function(e,t){E(e).render_warning=0!==t},r.wbg.__wbg_new_fa9aa30b261aba73=function(e){return V(new u(E(e)))},r.wbg.__wbg_editor_91084c85a69a3fde=function(e){return V(E(e).editor)},r.wbg.__wbg_languages_aca44d3eda97078c=function(e){return V(E(e).languages)},r.wbg.__wbg_create_806f286d290f99c8=function(e,t,n){return V(E(e).create(C(t),C(n)))},r.wbg.__wbg_defineTheme_c4f18cdd46a4014d=function(e,t,n,r){E(e).defineTheme(y(t,n),C(r))},r.wbg.__wbg_setTheme_7cb365ba1d2ad549=function(e,t,n){E(e).setTheme(y(t,n))},r.wbg.__wbg_setModelMarkers_f49dfc56a0816242=function(e,t,n,r,a){E(e).setModelMarkers(E(t),y(n,r),E(a))},r.wbg.__wbg_layout_901473f7828d2488=function(e,t){E(e).layout(E(t))},r.wbg.__wbg_getModel_4ba1a741bc1eaaff=function(e){return V(E(e).getModel())},r.wbg.__wbg_getValue_e8d4002de327ab32=function(e){return V(E(e).getValue())},r.wbg.__wbg_setValue_464f1cd5da0d99d4=function(e,t,n){E(e).setValue(y(t,n))},r.wbg.__wbg_setPosition_53889da2861e22f4=function(e,t){E(e).setPosition(E(t))},r.wbg.__wbg_addCommand_0087418877d24153=function(e,t,n){E(e).addCommand(t>>>0,E(n))},r.wbg.__wbg_focus_d1521065885d8ced=function(e){E(e).focus()},r.wbg.__wbg_onDidChangeContent_333bdbf90ce64b26=function(e,t){E(e).onDidChangeContent(E(t))},r.wbg.__wbg_getLineTokens_6c81bc0a3f533604=function(e,t){return V(E(e).getLineTokens(t>>>0))},r.wbg.__wbg_onupdate_b8cf42908fc20235=function(e,t){E(e).on_update(E(t))},r.wbg.__wbg_removeupdate_77fe2a7740d00e48=function(e,t){E(e).remove_update(E(t))},r.wbg.__wbg_errors_20c512f8dca36c8d=function(e){return V(E(e).errors)},r.wbg.__wbg_expressionschema_7a07dfdf1c19fa1f=function(e){return V(E(e).expression_schema)},r.wbg.__wbg_expressionalias_c0691678ddeeed2e=function(e){return V(E(e).expression_alias)},r.wbg.__wbg_name_4e59ce156796a1db=function(e,t){var n=T(E(t).name,h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z;L()[e/4+1]=r,L()[e/4+0]=n},r.wbg.__wbg_category_3b675f446e35f445=function(e,t){var n=E(t).category,r=M(n)?0:T(n,h.__wbindgen_export_0,h.__wbindgen_export_1),a=Z;L()[e/4+1]=a,L()[e/4+0]=r},r.wbg.__wbg_maxcolumns_41c0acb329b63f5a=function(e,t){var n=E(t).max_columns;L()[e/4+1]=M(n)?0:n,L()[e/4+0]=!M(n)},r.wbg.__wbg_maxcells_240ed21a2cc23a45=function(e,t){var n=E(t).max_cells;L()[e/4+1]=M(n)?0:n,L()[e/4+0]=!M(n)},r.wbg.__wbg_renderwarning_28b6ae4b73e78f68=function(e){var t=E(e).render_warning;return M(t)?16777215:t?1:0},r.wbg.__wbg_selectmode_2d072add5bfb5e92=function(e){return V(E(e).select_mode)},r.wbg.__wbg_minconfigcolumns_fc8660538ce7232d=function(e,t){var n=E(t).min_config_columns;L()[e/4+1]=M(n)?0:n,L()[e/4+0]=!M(n)},r.wbg.__wbg_configcolumnnames_1a26628997420d20=function(e){var t=E(e).config_column_names;return M(t)?0:V(t)},r.wbg.__wbg_save_5742b4ec09ae0d34=function(e){return V(E(e).save())},r.wbg.__wbg_new_fcda59553629199d=function(e){return V(new b(E(e)))},r.wbg.__wbg_observe_86c9286ddb2080e3=function(e,t){E(e).observe(E(t))},r.wbg.__wbg_unobserve_6d276eada6182ea1=function(e,t){E(e).unobserve(E(t))},r.wbg.__wbg_contentRect_3f8cd97f6e2969a6=function(e){return V(E(e).contentRect)},r.wbg.__wbg_listenerid_25425097ae5fdb72=function(e,t){var n=E(t).__yew_listener_id;L()[e/4+1]=M(n)?0:n,L()[e/4+0]=!M(n)},r.wbg.__wbg_setlistenerid_007d4751f70f0e32=function(e,t){E(e).__yew_listener_id=t>>>0},r.wbg.__wbg_setsubtreeid_6966527169be2ec4=function(e,t){E(e).__yew_subtree_id=t>>>0},r.wbg.__wbg_setcachekey_a9744e4c550ca52b=function(e,t){E(e).__yew_subtree_cache_key=t>>>0},r.wbg.__wbg_subtreeid_05e7e8ba671b1a4e=function(e,t){var n=E(t).__yew_subtree_id;L()[e/4+1]=M(n)?0:n,L()[e/4+0]=!M(n)},r.wbg.__wbg_cachekey_57f0ac7b26342cf7=function(e,t){var n=E(t).__yew_subtree_cache_key;L()[e/4+1]=M(n)?0:n,L()[e/4+0]=!M(n)},r.wbg.__wbg_new_693216e109162396=function(){return V(new Error)},r.wbg.__wbg_stack_0ddaca5d1abfb52f=function(e,t){var n=T(E(t).stack,h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z;L()[e/4+1]=r,L()[e/4+0]=n},r.wbg.__wbg_error_09919627ac0992f5=function(e,t){try{console.error(y(e,t))}finally{h.__wbindgen_export_15(e,t)}},r.wbg.__wbindgen_is_undefined=function(e){return void 0===E(e)},r.wbg.__wbindgen_number_new=function(e){return V(e)},r.wbg.__wbg_warn_2aa0e7178e1d35f6=function(e,t){var n,r=Q(e,t).slice();h.__wbindgen_export_15(e,4*t),(n=console).warn.apply(n,r)},r.wbg.__wbg_newwithu8arraysequence_fdc7895dacd60d21=function(){return $((function(e){return V(new Blob(E(e)))}),arguments)},r.wbg.__wbg_newwithstrsequenceandoptions_becd1cf522768c06=function(){return $((function(e,t){return V(new Blob(E(e),E(t)))}),arguments)},r.wbg.__wbg_write_10adfe8afa301d18=function(e,t){return V(E(e).write(E(t)))},r.wbg.__wbg_length_294c22a18ede524b=function(e){return E(e).length},r.wbg.__wbg_item_8eca8b8cdf63f525=function(e,t){var n=E(e).item(t>>>0);return M(n)?0:V(n)},r.wbg.__wbg_length_d2057dfdd5fdecf4=function(e){return E(e).length},r.wbg.__wbg_getPropertyValue_937a708feb88202f=function(){return $((function(e,t,n,r){var a=T(E(t).getPropertyValue(y(n,r)),h.__wbindgen_export_0,h.__wbindgen_export_1),o=Z;L()[e/4+1]=o,L()[e/4+0]=a}),arguments)},r.wbg.__wbg_item_dfcc92ceae8b4304=function(e,t,n){var r=T(E(t).item(n>>>0),h.__wbindgen_export_0,h.__wbindgen_export_1),a=Z;L()[e/4+1]=a,L()[e/4+0]=r},r.wbg.__wbg_setProperty_dccccce3a52c26db=function(){return $((function(e,t,n,r,a){E(e).setProperty(y(t,n),y(r,a))}),arguments)},r.wbg.__wbg_instanceof_CssStyleRule_e93e1152e50f8d9b=function(e){return E(e)instanceof CSSStyleRule},r.wbg.__wbg_selectorText_56b42d9cf7c91aa1=function(e,t){var n=T(E(t).selectorText,h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z;L()[e/4+1]=r,L()[e/4+0]=n},r.wbg.__wbg_style_dbd768c92c03ab2c=function(e){return V(E(e).style)},r.wbg.__wbg_cssRules_b1206f989651c44d=function(){return $((function(e){return V(E(e).cssRules)}),arguments)},r.wbg.__wbg_new_3af016a292a0ea38=function(){return $((function(e,t){return V(new CustomEvent(y(e,t)))}),arguments)},r.wbg.__wbg_newwitheventinitdict_183544aa2c542424=function(){return $((function(e,t,n){return V(new CustomEvent(y(e,t),E(n)))}),arguments)},r.wbg.__wbg_setDragImage_97e7f5b52f6e9f92=function(e,t,n,r){E(e).setDragImage(E(t),n,r)},r.wbg.__wbg_readyState_be8f2b804adc7ff6=function(e,t){var n=T(E(t).readyState,h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z;L()[e/4+1]=r,L()[e/4+0]=n},r.wbg.__wbg_body_525168d9e773c3f8=function(e){var t=E(e).body;return M(t)?0:V(t)},r.wbg.__wbg_styleSheets_a23fea89b8b91939=function(e){return V(E(e).styleSheets)},r.wbg.__wbg_fonts_62f407546d8daeb4=function(e){return V(E(e).fonts)},r.wbg.__wbg_createElement_ac65a6ce60c4812c=function(){return $((function(e,t,n){return V(E(e).createElement(y(t,n)))}),arguments)},r.wbg.__wbg_createElementNS_267edeea0c97331c=function(){return $((function(e,t,n,r,a){return V(E(e).createElementNS(0===t?void 0:y(t,n),y(r,a)))}),arguments)},r.wbg.__wbg_createTextNode_442392ad92e75695=function(e,t,n){return V(E(e).createTextNode(y(t,n)))},r.wbg.__wbg_width_a04d387a0e0ffe94=function(e){return E(e).width},r.wbg.__wbg_height_f7c5c956730ab37a=function(e){return E(e).height},r.wbg.__wbg_width_4a83a800a544b73a=function(e){return E(e).width},r.wbg.__wbg_height_76d64c7ff32eb400=function(e){return E(e).height},r.wbg.__wbg_top_22e7024d271b5677=function(e){return E(e).top},r.wbg.__wbg_left_f2f24ba3851b8295=function(e){return E(e).left},r.wbg.__wbg_get_dc5a3f4246f4363e=function(e,t,n,r){var a=E(t)[y(n,r)],o=M(a)?0:T(a,h.__wbindgen_export_0,h.__wbindgen_export_1),i=Z;L()[e/4+1]=i,L()[e/4+0]=o},r.wbg.__wbg_set_6bc5ebabff049b08=function(){return $((function(e,t,n,r,a){E(e)[y(t,n)]=y(r,a)}),arguments)},r.wbg.__wbg_delete_bdb7962606ab7ffc=function(e,t,n){delete E(e)[y(t,n)]},r.wbg.__wbg_add_3b4cecc512643e9f=function(){return $((function(e,t,n){E(e).add(y(t,n))}),arguments)},r.wbg.__wbg_remove_c15603553c81dc31=function(){return $((function(e,t,n){E(e).remove(y(t,n))}),arguments)},r.wbg.__wbg_dataTransfer_7916d51ea966dcb4=function(e){var t=E(e).dataTransfer;return M(t)?0:V(t)},r.wbg.__wbg_instanceof_Element_8143882371652178=function(e){return E(e)instanceof Element},r.wbg.__wbg_namespaceURI_f65a7a956acf4bc5=function(e,t){var n=E(t).namespaceURI,r=M(n)?0:T(n,h.__wbindgen_export_0,h.__wbindgen_export_1),a=Z;L()[e/4+1]=a,L()[e/4+0]=r},r.wbg.__wbg_classList_bbb57a7d3cc23c85=function(e){return V(E(e).classList)},r.wbg.__wbg_scrollTop_03d79a099b9a21e7=function(e){return E(e).scrollTop},r.wbg.__wbg_setscrollTop_b9abc042a6938811=function(e,t){E(e).scrollTop=t},r.wbg.__wbg_clientWidth_acc83939b1545b91=function(e){return E(e).clientWidth},r.wbg.__wbg_clientHeight_95c707ac8248c652=function(e){return E(e).clientHeight},r.wbg.__wbg_children_283b5c3c4312d771=function(e){return V(E(e).children)},r.wbg.__wbg_attachShadow_f0d8083616f120aa=function(){return $((function(e,t){return V(E(e).attachShadow(E(t)))}),arguments)},r.wbg.__wbg_getAttribute_0754c52f6bcda842=function(e,t,n,r){var a=E(t).getAttribute(y(n,r)),o=M(a)?0:T(a,h.__wbindgen_export_0,h.__wbindgen_export_1),i=Z;L()[e/4+1]=i,L()[e/4+0]=o},r.wbg.__wbg_getBoundingClientRect_dbd899b7c945c55d=function(e){return V(E(e).getBoundingClientRect())},r.wbg.__wbg_hasAttribute_4c5fc91198e862c3=function(e,t,n){return E(e).hasAttribute(y(t,n))},r.wbg.__wbg_matches_7e22d2c3664b9d8d=function(){return $((function(e,t,n){return E(e).matches(y(t,n))}),arguments)},r.wbg.__wbg_removeAttribute_16e5bf3866aa53e8=function(){return $((function(e,t,n){E(e).removeAttribute(y(t,n))}),arguments)},r.wbg.__wbg_setAttribute_27ca65e30a1c3c4a=function(){return $((function(e,t,n,r,a){E(e).setAttribute(y(t,n),y(r,a))}),arguments)},r.wbg.__wbg_toggleAttribute_8cf952af952c2cc5=function(){return $((function(e,t,n,r){return E(e).toggleAttribute(y(t,n),0!==r)}),arguments)},r.wbg.__wbg_target_2dfa485f32a6d005=function(e){var t=E(e).target;return M(t)?0:V(t)},r.wbg.__wbg_cancelBubble_185bb624c1c2e4ee=function(e){return E(e).cancelBubble},r.wbg.__wbg_composedPath_85cb5c926bd8d924=function(e){return V(E(e).composedPath())},r.wbg.__wbg_preventDefault_7c4d18eb2bb1a26a=function(e){E(e).preventDefault()},r.wbg.__wbg_stopPropagation_11ccdc30c46ad19a=function(e){E(e).stopPropagation()},r.wbg.__wbg_addEventListener_936431894dca4639=function(){return $((function(e,t,n,r){E(e).addEventListener(y(t,n),E(r))}),arguments)},r.wbg.__wbg_addEventListener_6d9a78a5d277bdaf=function(){return $((function(e,t,n,r,a){E(e).addEventListener(y(t,n),E(r),E(a))}),arguments)},r.wbg.__wbg_dispatchEvent_bacbc3eeb0d17fcd=function(){return $((function(e,t){return E(e).dispatchEvent(E(t))}),arguments)},r.wbg.__wbg_removeEventListener_6e1e9e37bdc74923=function(){return $((function(e,t,n,r){E(e).removeEventListener(y(t,n),E(r))}),arguments)},r.wbg.__wbg_instanceof_FontFace_095633da5a60e4d1=function(e){return E(e)instanceof FontFace},r.wbg.__wbg_family_8b33871beb47388b=function(e,t){var n=T(E(t).family,h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z;L()[e/4+1]=r,L()[e/4+0]=n},r.wbg.__wbg_weight_cb1f0ded9c3fcd29=function(e,t){var n=T(E(t).weight,h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z;L()[e/4+1]=r,L()[e/4+0]=n},r.wbg.__wbg_loaded_b07b4ee5c31f9abc=function(){return $((function(e){return V(E(e).loaded)}),arguments)},r.wbg.__wbg_values_705706cce046e96c=function(e){return V(E(e).values())},r.wbg.__wbg_next_c7f69285044a0543=function(){return $((function(e){return V(E(e).next())}),arguments)},r.wbg.__wbg_item_5a5f92bba46832d3=function(e,t){var n=E(e).item(t>>>0);return M(n)?0:V(n)},r.wbg.__wbg_dataset_7f3bc0a0cd4f7382=function(e){return V(E(e).dataset)},r.wbg.__wbg_style_25309daade79abb3=function(e){return V(E(e).style)},r.wbg.__wbg_offsetParent_21a2a48c194cfe05=function(e){var t=E(e).offsetParent;return M(t)?0:V(t)},r.wbg.__wbg_offsetWidth_7dd96a3df070d552=function(e){return E(e).offsetWidth},r.wbg.__wbg_offsetHeight_fe07e4498698e768=function(e){return E(e).offsetHeight},r.wbg.__wbg_blur_b336d41728268f5a=function(){return $((function(e){E(e).blur()}),arguments)},r.wbg.__wbg_click_a22518ab89bfd9b8=function(e){E(e).click()},r.wbg.__wbg_focus_2fac919cca20d33b=function(){return $((function(e){E(e).focus()}),arguments)},r.wbg.__wbg_checked_dc000202a8fa9328=function(e){return E(e).checked},r.wbg.__wbg_setchecked_dc7daac77dc0e73e=function(e,t){E(e).checked=0!==t},r.wbg.__wbg_value_f4c762446c572119=function(e,t){var n=T(E(t).value,h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z;L()[e/4+1]=r,L()[e/4+0]=n},r.wbg.__wbg_setvalue_65a652cfd99c8a4a=function(e,t,n){E(e).value=y(t,n)},r.wbg.__wbg_value_265001c20fda4531=function(e,t){var n=T(E(t).value,h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z;L()[e/4+1]=r,L()[e/4+0]=n},r.wbg.__wbg_setvalue_a46eeb72562081c1=function(e,t,n){E(e).value=y(t,n)},r.wbg.__wbg_value_d8dfe9a459c6ea2a=function(e,t){var n=T(E(t).value,h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z;L()[e/4+1]=r,L()[e/4+0]=n},r.wbg.__wbg_setvalue_b1b2f2945b1cb6ef=function(e,t,n){E(e).value=y(t,n)},r.wbg.__wbg_keyCode_218ac9c01e06b3d5=function(e){return E(e).keyCode},r.wbg.__wbg_clientX_5bbce6c078e1510e=function(e){return E(e).clientX},r.wbg.__wbg_clientY_af6c4369507b54f0=function(e){return E(e).clientY},r.wbg.__wbg_shiftKey_257c3f6b1ca35555=function(e){return E(e).shiftKey},r.wbg.__wbg_relatedTarget_c63203073e65b8de=function(e){var t=E(e).relatedTarget;return M(t)?0:V(t)},r.wbg.__wbg_clipboard_a304e2b83d0400c6=function(e){return V(E(e).clipboard)},r.wbg.__wbg_isConnected_021a4fb42a3d7537=function(e){return E(e).isConnected},r.wbg.__wbg_parentNode_e1dd029be06cee39=function(e){var t=E(e).parentNode;return M(t)?0:V(t)},r.wbg.__wbg_parentElement_b8943ca3eef7678d=function(e){var t=E(e).parentElement;return M(t)?0:V(t)},r.wbg.__wbg_lastChild_60bd092ff114802e=function(e){var t=E(e).lastChild;return M(t)?0:V(t)},r.wbg.__wbg_setnodeValue_ef88f21c4f2101f5=function(e,t,n){E(e).nodeValue=0===t?void 0:y(t,n)},r.wbg.__wbg_appendChild_6ed236bb79c198df=function(){return $((function(e,t){return V(E(e).appendChild(E(t)))}),arguments)},r.wbg.__wbg_contains_11705db278357c60=function(e,t){return E(e).contains(E(t))},r.wbg.__wbg_insertBefore_7159f24556965e30=function(){return $((function(e,t,n){return V(E(e).insertBefore(E(t),E(n)))}),arguments)},r.wbg.__wbg_removeChild_f633f19eb895b696=function(){return $((function(e,t){return V(E(e).removeChild(E(t)))}),arguments)},r.wbg.__wbg_now_44a034aa2e1d73dd=function(e){return E(e).now()},r.wbg.__wbg_instanceof_ShadowRoot_17fc69013b5c44c6=function(e){return E(e)instanceof ShadowRoot},r.wbg.__wbg_host_786667ae381479f7=function(e){return V(E(e).host)},r.wbg.__wbg_length_568451d1cca15a65=function(e){return E(e).length},r.wbg.__wbg_item_48316bfa2c39d796=function(e,t){var n=E(e).item(t>>>0);return M(n)?0:V(n)},r.wbg.__wbg_createObjectURL_a97d76bcc0a4968c=function(){return $((function(e,t){var n=T(URL.createObjectURL(E(t)),h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z;L()[e/4+1]=r,L()[e/4+0]=n}),arguments)},r.wbg.__wbg_instanceof_Window_11e25482011fc506=function(e){return E(e)instanceof Window},r.wbg.__wbg_document_5aff8cd83ef968f5=function(e){var t=E(e).document;return M(t)?0:V(t)},r.wbg.__wbg_navigator_5c90643c2a2b6cda=function(e){return V(E(e).navigator)},r.wbg.__wbg_innerWidth_8c5001da2fdd6a9e=function(){return $((function(e){return V(E(e).innerWidth)}),arguments)},r.wbg.__wbg_innerHeight_03d3f1d9eb5f7034=function(){return $((function(e){return V(E(e).innerHeight)}),arguments)},r.wbg.__wbg_performance_9d1ecf711183e1d5=function(e){var t=E(e).performance;return M(t)?0:V(t)},r.wbg.__wbg_getComputedStyle_344a4d9212ebf966=function(){return $((function(e,t){var n=E(e).getComputedStyle(E(t));return M(n)?0:V(n)}),arguments)},r.wbg.__wbg_requestAnimationFrame_1fb079d39e1b8a26=function(){return $((function(e,t){return E(e).requestAnimationFrame(E(t))}),arguments)},r.wbg.__wbg_setTimeout_ce28a603906ebcbb=function(){return $((function(e,t,n){return E(e).setTimeout(E(t),n)}),arguments)},r.wbg.__wbg_error_d95afd6217cfd219=function(e){console.error(E(e))},r.wbg.__wbg_error_0147c5cf9d9745cf=function(e,t,n){console.error(E(e),E(t),E(n))},r.wbg.__wbg_log_9a99fb1af846153b=function(e){console.log(E(e))},r.wbg.__wbg_warn_b39e749f1dc02058=function(e){console.warn(E(e))},r.wbg.__wbg_self_bb69a836a72ec6e9=function(){return $((function(){return V(self.self)}),arguments)},r.wbg.__wbg_window_3304fc4b414c9693=function(){return $((function(){return V(window.window)}),arguments)},r.wbg.__wbg_globalThis_e0d21cabc6630763=function(){return $((function(){return V(globalThis.globalThis)}),arguments)},r.wbg.__wbg_global_8463719227271676=function(){return $((function(){return V(n.g.global)}),arguments)},r.wbg.__wbg_newnoargs_9fdd8f3961dd1bee=function(e,t){return V(new Function(y(e,t)))},r.wbg.__wbg_new_515b65a8e7699d00=function(){return V(new Array)},r.wbg.__wbg_get_b7bbf50adcc94294=function(e,t){return V(E(e)[t>>>0])},r.wbg.__wbg_length_555f836564bf148d=function(e){return E(e).length},r.wbg.__wbg_push_b7f68478f81d358b=function(e,t){return E(e).push(E(t))},r.wbg.__wbg_instanceof_ArrayBuffer_1ae2a91a8421001f=function(e){return E(e)instanceof ArrayBuffer},r.wbg.__wbg_slice_3563f88f39165260=function(e,t,n){return V(E(e).slice(t>>>0,n>>>0))},r.wbg.__wbg_instanceof_Error_2ef86611e2afab04=function(e){return E(e)instanceof Error},r.wbg.__wbg_message_e440fbd911a845a2=function(e){return V(E(e).message)},r.wbg.__wbg_call_ba36642bd901572b=function(){return $((function(e,t){return V(E(e).call(E(t)))}),arguments)},r.wbg.__wbg_call_3fc07b7d5fc9022d=function(){return $((function(e,t,n){return V(E(e).call(E(t),E(n)))}),arguments)},r.wbg.__wbg_getTimezoneOffset_baab8599eeb15f06=function(e){return E(e).getTimezoneOffset()},r.wbg.__wbg_new_f994c74215dcdb52=function(e){return V(new Date(E(e)))},r.wbg.__wbg_is_a973b4c0e9019083=function(e,t){return Object.is(E(e),E(t))},r.wbg.__wbg_keys_a56f3f1587eb77e9=function(e){return V(Object.keys(E(e)))},r.wbg.__wbg_new_edbe38a4e21329dd=function(){return V(new Object)},r.wbg.__wbg_get_800098c980b31ea2=function(){return $((function(e,t){return V(Reflect.get(E(e),E(t)))}),arguments)},r.wbg.__wbg_has_9fa0c068863afd36=function(){return $((function(e,t){return Reflect.has(E(e),E(t))}),arguments)},r.wbg.__wbg_set_73349fc4814e0fc6=function(){return $((function(e,t,n){return Reflect.set(E(e),E(t),E(n))}),arguments)},r.wbg.__wbg_buffer_9e184d6f785de5ed=function(e){return V(E(e).buffer)},r.wbg.__wbg_stringify_08a99e601b91c4a7=function(){return $((function(e){return V(JSON.stringify(E(e)))}),arguments)},r.wbg.__wbg_new_c143a4f563f78c4e=function(e,t){try{var n={a:e,b:t},r=new Promise((function(e,t){var r=n.a;n.a=0;try{return te(r,n.b,e,t)}finally{n.a=r}}));return V(r)}finally{n.a=n.b=0}},r.wbg.__wbg_resolve_cae3d8f752f5db88=function(e){return V(Promise.resolve(E(e)))},r.wbg.__wbg_then_c2361a9d5c9a4fcb=function(e,t){return V(E(e).then(E(t)))},r.wbg.__wbg_then_6c9a4bf55755f9b8=function(e,t,n){return V(E(e).then(E(t),E(n)))},r.wbg.__wbg_newwithbyteoffsetandlength_e57ad1f2ce812c03=function(e,t,n){return V(new Uint8Array(E(e),t>>>0,n>>>0))},r.wbg.__wbg_new_e8101319e4cf95fc=function(e){return V(new Uint8Array(E(e)))},r.wbg.__wbg_buffer_1c5918a4ab656ff7=function(e){return V(E(e).buffer)},r.wbg.__wbg_length_2d56cb37075fcfb1=function(e){return E(e).length},r.wbg.__wbg_byteLength_e0515bc94cfc5dee=function(e){return E(e).byteLength},r.wbg.__wbg_byteOffset_77eec84716a2e737=function(e){return E(e).byteOffset},r.wbg.__wbg_set_e8ae7b27314e8b98=function(e,t,n){E(e).set(E(t),n>>>0)},r.wbg.__wbindgen_number_get=function(e,t){var n=E(t),r="number"==typeof n?n:void 0;z()[e/8+1]=M(r)?0:r,L()[e/4+0]=!M(r)},r.wbg.__wbindgen_is_string=function(e){return"string"==typeof E(e)},r.wbg.__wbindgen_string_get=function(e,t){var n=E(t),r="string"==typeof n?n:void 0,a=M(r)?0:T(r,h.__wbindgen_export_0,h.__wbindgen_export_1),o=Z;L()[e/4+1]=o,L()[e/4+0]=a},r.wbg.__wbindgen_boolean_get=function(e){var t=E(e);return"boolean"==typeof t?t?1:0:2},r.wbg.__wbindgen_throw=function(e,t){throw new Error(y(e,t))},r.wbg.__wbindgen_rethrow=function(e){throw C(e)},r.wbg.__wbindgen_memory=function(){return V(h.memory)},r.wbg.__wbindgen_closure_wrapper3374=function(e,t,n){return V(P(e,t,28,j))},r.wbg.__wbindgen_closure_wrapper3376=function(e,t,n){return V(R(e,t,36,I))},r.wbg.__wbindgen_closure_wrapper3378=function(e,t,n){return V(R(e,t,30,F))},r.wbg.__wbindgen_closure_wrapper3380=function(e,t,n){return V(P(e,t,32,D))},r.wbg.__wbindgen_closure_wrapper3382=function(e,t,n){return V(P(e,t,26,Y))},r.wbg.__wbindgen_closure_wrapper3384=function(e,t,n){return V(R(e,t,40,B))},r.wbg.__wbindgen_closure_wrapper3386=function(e,t,n){return V(P(e,t,38,H))},r.wbg.__wbindgen_closure_wrapper3388=function(e,t,n){return V(R(e,t,34,W))},r.wbg.__wbindgen_closure_wrapper10772=function(e,t,n){return V(P(e,t,2387,U))},r.wbg.__wbindgen_closure_wrapper10814=function(e,t,n){return V(P(e,t,2391,q))},r.wbg.__wbindgen_closure_wrapper10895=function(e,t,n){return V(P(e,t,2409,K))},("string"==typeof t||"function"==typeof Request&&t instanceof Request||"function"==typeof URL&&t instanceof URL)&&(t=fetch(t)),e.t0=ce,e.next=263,t;case 263:return e.t1=e.sent,e.t2=r,e.next=267,(0,e.t0)(e.t1,e.t2);case 267:return a=e.sent,i=a.instance,c=a.module,h=i.exports,le.__wbindgen_wasm_module=c,e.abrupt("return",h);case 273:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}var fe=le,de=n(6782),pe=n(9851),ge=(n(5238),function(e){function t(){return e.call(this)||this}(0,s.Z)(t,e);var n=t.prototype;return n.update=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.draw(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.draw=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.style.backgroundColor="#fff",e.next=3,t.to_csv();case 3:n=e.sent,"margin:0;overflow:scroll;position:absolute;width:100%;height:100%",this.innerHTML="<pre style='margin:0;overflow:scroll;position:absolute;width:100%;height:100%'>"+n+"</pre>";case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.clear=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.innerHTML="";case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.resize=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.restyle=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.save=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.restore=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.delete=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),(0,c.Z)(t,[{key:"name",get:function(){return"Debug"}},{key:"select_mode",get:function(){return"select"}},{key:"min_config_columns",get:function(){}},{key:"config_column_names",get:function(){}}]),t}((0,l.Z)(HTMLElement)));function _e(e){return 559903==new Uint32Array(e.slice(0,4))[0]}function he(){return(he=(0,i.Z)((0,o.Z)().mark((function e(){var t,n,r,a,i,c,s,l,u,f,d,p,g,_,h;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe;case 2:if(t=e.sent,n=[],r=0,a=new de.Q1((function(e){e&&(r+=e.byteLength,n.push(e))})),!(t instanceof URL||"string"==typeof t)){e.next=23;break}return e.next=9,fetch(t.toString());case 9:i=e.sent.body.getReader(),c=0;case 11:return e.next=13,i.read();case 13:if(s=e.sent,l=s.value,!(u=s.done)){e.next=18;break}return e.abrupt("break",21);case 18:0===c&&_e(l.buffer)||1===c?(c=1,a.push(l,u)):(c=2,r+=l.byteLength,n.push(l));case 19:e.next=11;break;case 21:e.next=24;break;case 23:t instanceof Uint8Array?_e(t.buffer)?a.push(t,!0):(r=t.byteLength,n=[t]):(f=new Uint8Array(t),_e(t)?a.push(f,!0):(r=f.byteLength,n=[f]));case 24:for(d=0,p=new Uint8Array(r),g=0,_=n;g<_.length;g++)h=_[g],p.set(h,d),d+=h.byteLength;return e.next=28,fe(p);case 28:return e.abrupt("return",e.sent);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.createElement("perspective-viewer-plugin").constructor===HTMLElement&&window.customElements.define("perspective-viewer-plugin",ge),window.addEventListener("unhandledrejection",(function(e){var t;"View method cancelled"===(null==(t=e.reason)?void 0:t.message)&&e.preventDefault()}));var be=function(){return he.apply(this,arguments)}(),ve=function(e){function t(){var t;return(t=e.call(this)||this).load_wasm(),t}(0,s.Z)(t,e);var n=t.prototype;return n.load_wasm=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be;case 2:this.instance||(this.instance=new ie(this));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.connectedCallback=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:this.instance.connected_callback();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.registerPlugin=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be;case 2:n=void 0,r=void 0,n=T(t,h.__wbindgen_export_0,h.__wbindgen_export_1),r=Z,h.register_plugin(n,r);case 3:case"end":return e.stop()}var n,r}),e)})));return function(t){return e.apply(this,arguments)}}(),n.load=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_load(Promise.resolve(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.notifyResize=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!1),e.next=3,this.load_wasm();case 3:return e.next=5,this.instance.js_resize(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setAutoSize=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!0),e.next=3,this.load_wasm();case 3:return e.next=5,this.instance.js_set_auto_size(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getTable=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_get_table(!!t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getView=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_get_view();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.restore=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_restore(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.save=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_save(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.flush=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_flush();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.reset=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!1),e.next=3,this.load_wasm();case 3:return e.next=5,this.instance.js_reset(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.delete=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_delete();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.download=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_download(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.copy=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_copy(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.restyleElement=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_restyle_element();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.resetThemes=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_reset_themes(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getEditPort=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_get_edit_port();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setThrottle=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_set_throttle(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.toggleConfig=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_toggle_config(t);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPlugin=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_get_plugin(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getAllPlugins=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_get_all_plugins();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.unsafe_get_model=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load_wasm();case 2:return e.next=4,this.instance.js_unsafe_get_model();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.getExprtkCommands=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be;case 2:return e.abrupt("return",ee());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t}((0,l.Z)(HTMLElement));function me(e,t){return function(n,r){for(var o,i=0,c=(0,a.Z)(t);!(o=c()).done;){var s=o.value;if(s in n){if(i++>0)throw new Error('Duplicate "'+e+'" fields');n[e]=n[s],s!==e&&(delete n[s],r.warn&&console.warn('Deprecated perspective attribute "'+s+'" renamed "'+e+'"'))}}return n}}document.createElement("perspective-viewer").constructor===HTMLElement&&window.customElements.define("perspective-viewer",ve);me("group_by",["group_by","row_pivots","row-pivot","row-pivots","row_pivot"]),me("split_by",["split_by","column_pivots","column-pivot","column-pivots","column_pivot","col_pivots","col-pivot","col-pivots","col_pivot"]),me("filter",["filter","filters"]);var we=function(e){function t(){return e.call(this)||this}(0,s.Z)(t,e);var n=t.prototype;return n.open=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t,n,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.instance?this.instance.reset(n,r):this.instance=new ae(this,n,r),this.instance.open(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.destroy=function(){this.instance.destroy()},t}((0,l.Z)(HTMLElement));document.createElement("perspective-number-column-style").constructor===HTMLElement&&window.customElements.define("perspective-number-column-style",we);var ye=function(e){function t(){return e.call(this)||this}(0,s.Z)(t,e);var n=t.prototype;return n.open=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t,n,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.instance?this.instance.reset(n):this.instance=new oe(this,n,r),this.instance.open(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.destroy=function(){this.instance.destroy()},t}((0,l.Z)(HTMLElement));document.createElement("perspective-string-column-style").constructor===HTMLElement&&window.customElements.define("perspective-string-column-style",ye);var xe=function(e){function t(){var t;return(t=e.call(this)||this).instance=new re((0,r.Z)(t)),t}(0,s.Z)(t,e);var n=t.prototype;return n.open=function(e){this.instance.open(e)},n.unsafe_set_model=function(e){this.instance.unsafe_set_model(e)},t}((0,l.Z)(HTMLElement));document.createElement("perspective-export-menu").constructor===HTMLElement&&window.customElements.define("perspective-export-menu",xe);var ke=function(e){function t(){var t;return(t=e.call(this)||this).instance=new ne((0,r.Z)(t)),t}(0,s.Z)(t,e);var n=t.prototype;return n.open=function(e){this.instance.open(e)},n.unsafe_set_model=function(e){this.instance.unsafe_set_model(e)},t}((0,l.Z)(HTMLElement));document.createElement("perspective-copy-menu").constructor===HTMLElement&&window.customElements.define("perspective-copy-menu",ke)},9851:function(e,t,n){e.exports=n.p+"164dea9f71e6d689.wasm"}}]);
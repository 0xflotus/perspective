(self.webpackChunk_finos_perspective_docs=self.webpackChunk_finos_perspective_docs||[]).push([[195],{1262:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7294),o=n.n(r),a=n(2389);function i(e){let{children:t,fallback:n}=e;return(0,a.Z)()?o().createElement(o().Fragment,null,t?.()):n??null}},3062:function(e,t,n){"use strict";n.r(t),n.d(t,{PerspectiveViewerDemo:function(){return V}});var r=n(5239),o=(n(8963),n(4469),n(8429),n(2949)),a=n(7294),i=n.n(a),l=n(6010),s=n(1262),c=["AAPL.N","MSFT.N","AMZN.N","GOOGL.N","FB.N","TSLA.N","BABA.N","TSM.N","V.N","NVDA.N","JPM.N","JNJ.N","WMT.N","UNH.N","MA.N","BAC.N","DIS.N","ASML.N","ADBE.N","CMCSA.N","NKE.N","XOM.N","TM.N","KO.N","ORCL.N","NFLX.N"],u=["Homer","Marge","Bart","Lisa","Maggie","Barney","Ned","Moe"],d=0;function g(){for(var e=0,t=0;0===e;)e=Math.random();for(;0===t;)t=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*t)}function _(){return d%=1e3,{name:c[Math.floor(Math.random()*c.length)],client:u[Math.floor(Math.random()*u.length)],lastUpdate:new Date,chg:10*g(),bid:5*g()+95,ask:5*g()+105,vol:5*g()+105,id:d++}}const p={sparkgrid:{plugin:"Datagrid",plugin_config:{columns:{chg:{bg_gradient:16.5,number_bg_mode:"gradient"},"chg (+)":{fg_gradient:15.83,number_fg_mode:"bar"},"chg (-)":{fg_gradient:14.58,number_fg_mode:"bar"}},editable:!1,scroll_lock:!0},settings:!0,group_by:["name"],split_by:["client"],columns:["chg (-)","chg","chg (+)"],filter:[],sort:[["chg","desc"]],expressions:['//chg (-)\nif("chg"<0){"chg"}else{0}','//chg (+)\nif("chg">0){"chg"}else{0}'],aggregates:{"chg (+)":"avg",chg:"avg","chg (-)":"avg"}},datagrid:{plugin:"datagrid",columns:["ask","bid","chg"],sort:[["name","desc"],["lastUpdate","desc"]],aggregates:{name:"last",lastUpdate:"last"},group_by:["name","lastUpdate"],split_by:["client"],plugin_config:{}},"x bar":{columns:["chg"],plugin:"X Bar",sort:[["chg","asc"]],group_by:["name"],split_by:["client"]},"y line":{plugin:"Y Line",group_by:["lastUpdate"],split_by:[],sort:[["lastUpdate","desc"]],split_by:["client"],columns:["bid"],aggregates:{bid:"avg",chg:"avg",name:"last"}},"xy scatter":{plugin:"X/Y Scatter",group_by:["name"],split_by:[],columns:["bid","ask","chg","vol"],aggregates:{bid:"avg",ask:"avg",vol:"avg"},sort:[]},treemap:{plugin:"Treemap",group_by:["name","client"],split_by:[],columns:["bid","chg"],aggregates:{bid:"sum",chg:"sum",name:"last"},sort:[["name","desc"],["chg","desc"]]},heatmap:{columns:["vol"],plugin:"Heatmap",sort:[["vol","asc"]],group_by:["name"],split_by:["client"]}};var h="heroBannerViewer_f_ls",f="container_G6kv",b="visButtons_WVUn",m="visButton_uyAq",y="visButtonActive_J9UB",w="freqSlider_bTfl";const v=r.ZP.shared_worker();let x,k,S=100,A=!0;async function C(e,t){void 0===x&&(x=await async function(){for(var e=[],t=0;t<1e3;t++)e.push(_());var n=v.table(e,{index:"id"});return setTimeout((async function(){P(await n)})),n}()),void 0!==k&&k!==t&&(k.delete(),k=void 0),void 0===k&&(k=t,k.load(x)),N(t,"sparkgrid",{theme:"dark"===e?"Material Dark":"Material Light"})}function E(e){let t;return e.name===e.selected&&(t=y),i().createElement("div",{onMouseOver:e.onHover,className:(0,l.Z)(m,t),id:e.name},e.name)}function V(){const{colorMode:e}=(0,o.I)(),[t,n]=(0,a.useState)("sparkgrid"),[r,c]=(0,a.useState)(S),u=(0,a.useRef)(),d=(0,a.useCallback)((e=>{console.log("WIP"),n(e.target.getAttribute("id")),N(u.current,`${e.target.getAttribute("id")}`)}),[u]),g=(0,a.useCallback)((e=>{S=-1.8*e.target.value+190,c(S)}),[r]);return(0,a.useEffect)((()=>(A=!1,C(e,u.current),()=>{A=!0})),[u,e]),i().createElement("div",{className:(0,l.Z)(f)},i().createElement("perspective-viewer",{ref:u,class:(0,l.Z)("nosuperstore",h)}),i().createElement("div",{className:(0,l.Z)(b)},i().createElement(s.Z,null,(()=>Object.keys(p).map((e=>i().createElement(E,{name:e,id:e,key:e,selected:t,onHover:d})))))),i().createElement("input",{id:"velocity",type:"range",className:(0,l.Z)(w),defaultValue:5/-9*(r-190),onInput:g}))}function P(e){A||190===S||document.documentElement.clientHeight-window.scrollY>0&&e.update([_(),_(),_()]);setTimeout((()=>P(e)),S)}function N(e,t,n){void 0===n&&(n={}),e.restore({...p[t],...n})}},6109:function(e,t){t.Z=[{name:"Default",config:{}},{name:"Group By 1",config:{group_by:["Sub-Category"]},aggregates:"dominant"},{name:"Group By 2",config:{group_by:["Category","Sub-Category"]}},{name:"Split By",config:{split_by:["Category"],columns:["Sales","Quantity","Discount","Profit"]}},{name:"Split By 2",config:{split_by:["Category","Sub-Category"],columns:["Sales","Quantity","Discount","Profit"]}},{name:"Both",config:{group_by:["Region"],split_by:["Category"],columns:["Sales","Quantity","Discount","Profit"]}},{name:"Both 2",config:{group_by:["Region","State"],split_by:["Category","Sub-Category"],columns:["Sales","Quantity","Discount","Profit"]}},{name:"Background Row And Split By",config:{group_by:["State"],split_by:["Sub-Category"],columns:["Profit"],sort:[["Profit","col asc"]],plugin_config:{columns:{Profit:{number_color_mode:"background"}}}}},{name:"Gradient Row And Split By",config:{group_by:["State"],split_by:["Sub-Category"],columns:["Profit"],sort:[["Profit","col asc"]],plugin_config:{columns:{Profit:{number_color_mode:"gradient",gradient:1600}}}}},{name:"Background Row And Split By",config:{group_by:["State"],split_by:["Sub-Category"],columns:["Sales"],aggregates:{Sales:"avg"},plugin_config:{columns:{Sales:{number_color_mode:"bar",gradient:600}}}}},{name:"Foreground Colors",config:{columns:["Category","Sales","Discount","Profit","Sub-Category","Order Date"],plugin_config:{columns:{Profit:{pos_color:"#32cd82",neg_color:"#f50fed"},Sales:{pos_color:"#780aff",neg_color:"#f5ac0f"},Discount:{pos_color:"#f5ac0f",neg_color:"#780aff"}}},sort:[["Sub-Category","desc"]]}},{name:"Background Colors",config:{plugin:"Datagrid",plugin_config:{columns:{Discount:{neg_bg_color:"#780aff",number_bg_mode:"color",number_fg_mode:"disabled",pos_bg_color:"#f5ac0f"},Profit:{neg_bg_color:"#f50fed",number_bg_mode:"color",number_fg_mode:"disabled",pos_bg_color:"#32cd82"},Sales:{neg_bg_color:"#f5ac0f",number_bg_mode:"color",number_fg_mode:"disabled",pos_bg_color:"#780aff"}},editable:!1,scroll_lock:!0},columns:["Category","Sales","Discount","Profit","Sub-Category","Order Date"],sort:[["Sub-Category","desc"]]}},{name:"Gradient Colors",config:{columns:["Category","Sales","Discount","Profit","Sub-Category","Order Date"],plugin_config:{columns:{Profit:{number_color_mode:"gradient",gradient:600,pos_color:"#32cd82",neg_color:"#f50fed"},Sales:{number_color_mode:"gradient",gradient:2268,pos_color:"#780aff",neg_color:"#f5ac0f"},Discount:{number_color_mode:"gradient",gradient:.8,pos_color:"#f5ac0f",neg_color:"#780aff"}}},sort:[["Sub-Category","desc"]]}},{name:"Bar Colors",config:{columns:["Category","Sales","Discount","Profit","Sub-Category","Order Date"],plugin_config:{columns:{Profit:{number_color_mode:"bar",gradient:600,pos_color:"#32cd82",neg_color:"#f50fed"},Sales:{number_color_mode:"bar",gradient:2268,pos_color:"#780aff",neg_color:"#f5ac0f"},Discount:{number_color_mode:"bar",gradient:.8,pos_color:"#f5ac0f",neg_color:"#780aff"}}},sort:[["Sub-Category","desc"]]}},{name:"Thermometer",config:{group_by:["State"],columns:["Profit (-)","Profit","Profit (+)"],plugin_config:{columns:{"Profit (-)":{number_color_mode:"bar",gradient:1e4},Profit:{number_color_mode:"gradient",gradient:1e4},"Profit (+)":{number_color_mode:"bar",gradient:1e4}}},expressions:['//Profit (-)\nif("Profit"<0){"Profit"}else{0}','//Profit (+)\nif("Profit">0){"Profit"}else{0}']}},{name:"Y Bar",config:{plugin:"Y Bar",group_by:["Sub-Category"],columns:["Sales"]}},{name:"Y Bar, Sorted Desc By Y-Axis",config:{plugin:"Y Bar",group_by:["Sub-Category"],columns:["Sales"],sort:[["Sales","desc"]]}},{name:"Y Bar - Row And Split By",config:{plugin:"Y Bar",group_by:["Sub-Category"],split_by:["Ship Mode"],columns:["Sales"]}},{name:"Y Bar - Group By 2 Sorted",config:{plugin:"Y Bar",group_by:["Category","Sub-Category"],columns:["Sales"],sort:[["Sales","desc"]]}},{name:"Y Bar - Group By 2 And Split By Sorted",config:{plugin:"Y Bar",group_by:["Category","Sub-Category"],split_by:["Category"],columns:["Sales"],sort:[["Sales","desc"]]}},{name:"Y Bar - Group By 2 And 2 Split By Sorted",config:{plugin:"Y Bar",group_by:["Category","Sub-Category"],split_by:["Category","Region"],columns:["Sales"],sort:[["Sales","desc"]]}},{name:"Y Bar - Group By 2 And 2 Split By Sorted 2",config:{plugin:"Y Bar",group_by:["State"],split_by:["Profit (-/+)"],columns:["Profit"],expressions:['//Profit (-/+)\nif("Profit"<0){1}else{0}'],sort:[["Profit","desc"]]},viewport:{width:600,height:450}},{name:"Y Bar Multi Axis",config:{plugin:"Y Bar",group_by:["Sub-Category"],columns:["Quantity","Sales"],aggregates:{Sales:"avg"},sort:[["Sales","desc"]]}},{name:"Y Bar Multi Axis - SPlit",config:{plugin:"Y Bar",group_by:["Sub-Category"],columns:["Quantity","Sales"],sort:[["Sales","desc"]],aggregates:{Sales:"avg"},plugin_config:{splitMainValues:["Sales"]}}},{name:"X Bar",config:{plugin:"X Bar",group_by:["Sub-Category"],columns:["Sales"]}},{name:"X Bar",config:{plugin:"X Bar",group_by:["Sub-Category"],columns:["Quantity","Profit"]}},{name:"X Bar, Sorted Desc By X-Axis",config:{plugin:"X Bar",group_by:["Sub-Category"],columns:["Sales"],sort:[["Sales","asc"]]}},{name:"X Bar - Row And Split By",config:{plugin:"X Bar",group_by:["Sub-Category"],split_by:["Region"],columns:["Sales"]}},{name:"X Bar - Row And Split By",config:{plugin:"X Bar",group_by:["Sub-Category"],split_by:["Region"],columns:["Sales"],sort:[["Sales","asc"]]}},{name:"Y Line - Datetime Axis",config:{plugin:"Y Line",group_by:["Order Date"],columns:["Sales"]}},{name:"Y Line - Datetime Axis",config:{plugin:"Y Line",group_by:["Order Date"],split_by:["Segment"],columns:["Sales"]}},{name:"Y Line - Datetime Axis Computed",config:{plugin:"Y Line",group_by:["bucket(\"Order Date\", 'M')"],expressions:["bucket(\"Order Date\", 'M')"],columns:["Sales"]}},{name:"Y Line - Datetime Axis",config:{plugin:"Y Line",group_by:["bucket(\"Order Date\", 'M')"],split_by:["bucket(\"Order Date\", 'Y')"],expressions:["bucket(\"Order Date\", 'M')","bucket(\"Order Date\", 'Y')"],columns:["Sales"]}},{name:"Y Line - Datetime Axis And Split By",config:{plugin:"Y Line",group_by:["bucket(\"Order Date\", 'M')"],split_by:["Region"],expressions:["bucket(\"Order Date\", 'M')"],columns:["Sales"]}},{name:"Y Line - Category Axis",config:{plugin:"Y Line",group_by:["State"],columns:["Sales"]},viewport:{width:600,height:450}},{name:"Y Line - Category Axis",config:{plugin:"Y Line",group_by:["State"],columns:["Sales"],sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Line - Row and Split By",config:{plugin:"Y Line",group_by:["State"],split_by:["Segment"],columns:["Sales"],sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Line - Multi Axis Split",config:{plugin:"Y Line",group_by:["State"],columns:["Sales","Profit"],plugin_config:{splitMainValues:["Sales"]},sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Line - Multi Axis Split",config:{plugin:"Y Line",group_by:["State"],split_by:["Segment"],columns:["Sales","Profit"],plugin_config:{splitMainValues:["Sales"]},sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Area - Datetime Axis Computed",config:{plugin:"Y Area",group_by:["bucket(\"Order Date\", 'M')"],expressions:["bucket(\"Order Date\", 'M')"],columns:["Sales"]}},{name:"Y Area - Datetime Axis",config:{plugin:"Y Area",group_by:["bucket(\"Order Date\", 'M')"],split_by:["bucket(\"Order Date\", 'Y')"],expressions:["bucket(\"Order Date\", 'M')","bucket(\"Order Date\", 'Y')"],columns:["Sales"]}},{name:"Y Area - Datetime Axis And Split By",config:{plugin:"Y Area",group_by:["bucket(\"Order Date\", 'M')"],split_by:["Region"],expressions:["bucket(\"Order Date\", 'M')"],columns:["Sales"]}},{name:"Y Area - Category Axis",config:{plugin:"Y Area",group_by:["State"],columns:["Sales"]},viewport:{width:600,height:450}},{name:"Y Area - Row and Split By",config:{plugin:"Y Area",group_by:["State"],split_by:["Ship Mode"],columns:["Sales"]},viewport:{width:600,height:450}},{name:"Y Area - 2 Group By",config:{plugin:"Y Area",group_by:["Region","State"],columns:["Sales"],sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Area - Row and Split By",config:{plugin:"Y Area",group_by:["Region","State"],split_by:["Region"],columns:["Sales"],sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"Y Area - Row and Split By 2",config:{plugin:"Y Area",group_by:["Region","State"],split_by:["Ship Mode"],columns:["Sales"],sort:[["Sales","desc"]]},viewport:{width:600,height:450}},{name:"X/Y Scatter",config:{plugin:"X/Y Scatter",group_by:["City"],columns:["Sales","Quantity"],aggregates:{Sales:"avg",Profit:"avg",Quantity:"avg"}}},{name:"X/Y Scatter - Split By",config:{plugin:"X/Y Scatter",group_by:["City"],split_by:["Region"],columns:["Sales","Quantity"],aggregates:{Sales:"avg",Profit:"avg",Quantity:"avg"}}},{name:"X/Y Scatter - Color By Float",config:{plugin:"X/Y Scatter",group_by:["State"],columns:["Sales","Quantity","Profit"],aggregates:{Sales:"avg",Profit:"avg",Quantity:"avg"},sort:[["Profit","desc"]]}},{name:"X/Y Scatter - Bubble",config:{plugin:"X/Y Scatter",group_by:["Sub-Category"],columns:["Sales","Quantity",null,"Profit"],aggregates:{Sales:"avg",Profit:"avg",Quantity:"avg"}},viewport:{width:600,height:450}},{name:"X/Y Scatter - Bubble",config:{plugin:"X/Y Scatter",group_by:["Sub-Category"],split_by:["Category"],columns:["Sales","Quantity",null,"Profit"],aggregates:{Sales:"avg",Profit:"avg",Quantity:"avg"}},viewport:{width:600,height:450}},{name:"X/Y Scatter - Bubble",config:{plugin:"X/Y Scatter",group_by:["Sub-Category"],columns:["Sales","Quantity","Profit","Row ID"],sort:[["Profit","desc"]],aggregates:{Sales:"avg",Profit:"sum",Quantity:"avg","Row ID":"avg"}},viewport:{width:600,height:450}},{name:"X/Y Scatter - Category Y Axis",config:{plugin:"X/Y Scatter",columns:["Profit","State",null,"Quantity"],group_by:["City"],aggregates:{State:"dominant"}},viewport:{width:600,height:450}},{name:"X/Y Scatter - Category Y Axis And Size And Color",config:{plugin:"X/Y Scatter",columns:["State","Sub-Category","Quantity","Sales",null],group_by:["State","Sub-Category"],aggregates:{State:"dominant","Sub-Category":"dominant",Profit:"low"}},viewport:{width:600,height:450}},{name:"X/Y Line",config:{columns:["Sales","Profit"],plugin:"X/Y Line",aggregates:{"Order Date":"dominant",Sales:"avg",Profit:"avg"},group_by:["State"],sort:[["Profit","desc"],["Sales","desc"]],split_by:["Region"]}},{name:"Treemap",config:{plugin:"Treemap",group_by:["Sub-Category"],columns:["Sales"]}},{name:"Treemap - 2 Group By",config:{plugin:"Treemap",group_by:["Category","Sub-Category","Segment"],columns:["Sales"]}},{name:"Treemap - Float Color",config:{plugin:"Treemap",group_by:["Category","Sub-Category"],columns:["Sales","Quantity"],sort:[["Quantity","desc"]]}},{name:"Treemap - Category Color",config:{plugin:"Treemap",group_by:["Category","Sub-Category"],columns:["Sales","Category"],aggregates:{Category:"dominant"}}},{name:"Treemap - Row And Split By Float Color",config:{plugin:"Treemap",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Quantity"],sort:[["Quantity","desc"]]},viewport:{width:800,height:600}},{name:"Treemap - Row And Split By Category Color",config:{plugin:"Treemap",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Region"],aggregates:{Region:"dominant"}},viewport:{width:800,height:600}},{name:"Treemap - Row And Split By Category Color 2",config:{plugin:"Treemap",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Category"],aggregates:{Category:"dominant"}},viewport:{width:800,height:600}},{name:"Sunburst",config:{plugin:"Sunburst",group_by:["Sub-Category"],columns:["Sales"]}},{name:"Sunburst - 2 Group By",config:{plugin:"Sunburst",group_by:["Category","Sub-Category","Segment"],columns:["Sales"]}},{name:"Sunburst - Float Color",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],columns:["Quantity","Sales"],sort:[["Quantity","desc"]]}},{name:"Sunburst - Category Color",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],columns:["Sales","Category"],aggregates:{Category:"dominant"}}},{name:"Sunburst - Row And Split By",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales"]},viewport:{width:600,height:450}},{name:"Sunburst - Row And Split By Float Color",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Quantity"]},viewport:{width:600,height:450}},{name:"Sunburst - Row And Split By Category Color",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Region"],aggregates:{Region:"dominant"}},viewport:{width:600,height:450}},{name:"Sunburst - Row And Split By Category Color 2",config:{plugin:"Sunburst",group_by:["Category","Sub-Category"],split_by:["Region"],columns:["Sales","Category"],aggregates:{Category:"dominant"}},viewport:{width:600,height:450}},{name:"Heatmap",config:{plugin:"Heatmap",group_by:["Sub-Category"],split_by:["Region"],columns:["Profit"],sort:[["Profit","desc"],["Profit","col desc"]]}},{name:"Heatmap 2",config:{plugin:"Heatmap",group_by:["State"],split_by:["Sub-Category"],columns:["Profit"],sort:[["Profit","desc"],["Profit","col desc"]]},viewport:{width:600,height:450}},{name:"Heatmap 3",config:{columns:["Discount"],plugin:"Heatmap",expressions:["bucket(\"Order Date\", 'M')"],aggregates:{"Order Date":"dominant",Sales:"avg"},split_by:["Sub-Category"],group_by:["bucket(\"Order Date\", 'M')"],sort:[["Discount","col asc"]]},viewport:{width:600,height:450}},{name:"Heatmap 4",config:{plugin:"Heatmap",columns:["Profit"],expressions:['bucket("Profit", 100)',"bucket(\"Order Date\", 'M')"],group_by:["bucket(\"Order Date\", 'M')"],split_by:['bucket("Profit", 100)'],plugin_config:{}},viewport:{width:600,height:450}}]},1698:function(e,t,n){"use strict";n.r(t),n.d(t,{SUPERSTORE_TABLE:function(){return a}});var r=n(5239),o=n(5939);const a=async function(){const e=r.ZP.shared_worker(),t=await fetch(o),n=await t.arrayBuffer();return await e.table(n.slice())}()},2965:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(7294),o=n.n(r),a=n(6010),i=n(2263),l=n(2949),s=n(7676),c=n(1262),u=n(7462),d="features_t9lD",g="gallerySection_Wpmb",_="gallery_OZR8",p=n(4996),h=n(6109),f="overlay_vEzt",b="viewer_dzx3",m="dimmed_aueD";const{convert:y}=n(6736);function w(e){const{colorMode:t}=(0,l.I)(),n="dark"===t?"_dark":"",[i,s]=(0,r.useState)(-1),u=(0,r.useCallback)((()=>{s(-1)}),[i]);return o().createElement(o().Fragment,null,h.Z.map(((e,t)=>{const l=(0,r.useCallback)((()=>{s(t)}),[i]);return o().createElement("img",{className:(0,a.Z)(i>=0?m:void 0),src:(0,p.Z)(`/features/feature_${t}${n}.png`),key:t,onClick:l})})),i>=0?o().createElement(c.Z,null,(()=>o().createElement(v,{index:i,color:t,onClose:u}))):void 0)}function v(e){const{SUPERSTORE_TABLE:t}=n(1698),i=(0,r.useRef)(),l=(0,r.useCallback)((t=>{t.preventDefault(),t.target===i.current&&e.onClose()}),[e.onClose]),s=(0,r.useCallback)((n=>{null!==n&&(n.load(t),n.restore(y({plugin:"Datagrid",group_by:[],expressions:[],split_by:[],sort:[],aggregates:{},...h.Z[e.index].config,settings:!0})))}),[e.index]);return o().createElement("div",{ref:i,className:(0,a.Z)(f),onClick:l},o().createElement("perspective-viewer",{ref:s,theme:"dark"===e.color?"Material Dark":"Material Light",class:(0,a.Z)(b)}))}var x=n(3905);const k={toc:[{value:"What is Perspective?",id:"what-is-perspective",level:2},{value:"Features",id:"features",level:3}]};function S(e){let{components:t,...n}=e;return(0,x.kt)("wrapper",(0,u.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,x.kt)("h2",{id:"what-is-perspective"},"What is Perspective?"),(0,x.kt)("p",null,"Perspective is an ",(0,x.kt)("i",null,"interactive")," analytics and data visualization component,\nwhich is especially well-suited for ",(0,x.kt)("i",null,"large")," and/or ",(0,x.kt)("i",null,"streaming"),"\ndatasets. Use it to create user-configurable reports, dashboards, notebooks and\napplications, then deploy stand-alone in the browser, or in concert with Python\nand/or ",(0,x.kt)("a",{parentName:"p",href:"https://jupyterlab.readthedocs.io/en/stable/"},"Jupyterlab"),"."),(0,x.kt)("h3",{id:"features"},"Features"),(0,x.kt)("ul",null,(0,x.kt)("li",{parentName:"ul"},(0,x.kt)("p",{parentName:"li"},"A fast, memory efficient streaming query engine, written in\nC++ and compiled for both ",(0,x.kt)("a",{parentName:"p",href:"https://webassembly.org/"},"WebAssembly")," and\n",(0,x.kt)("a",{parentName:"p",href:"https://www.python.org/"},"Python"),", with read/write/streaming for\n",(0,x.kt)("a",{parentName:"p",href:"https://arrow.apache.org/"},"Apache Arrow"),", and a high-performance columnar\nexpression language based on ",(0,x.kt)("a",{parentName:"p",href:"https://github.com/ArashPartow/exprtk"},"ExprTK"),".")),(0,x.kt)("li",{parentName:"ul"},(0,x.kt)("p",{parentName:"li"},"A framework-agnostic User Interface packaged as a\n",(0,x.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements"},"Custom Element"),",\npowered either in-browser via WebAssembly or virtually via\nWebSocket server (Python/Node).")),(0,x.kt)("li",{parentName:"ul"},(0,x.kt)("p",{parentName:"li"},"A ",(0,x.kt)("a",{parentName:"p",href:"https://jupyter.org/"},"JupyterLab")," widget and Python client library, for\ninteractive data analysis in a notebook, as well as ",(0,x.kt)("em",{parentName:"p"},"scalable")," production\n",(0,x.kt)("a",{parentName:"p",href:"https://github.com/voila-dashboards/voila"},"Voila")," applications."))))}S.isMDXComponent=!0;const A={toc:[{value:"JavaScript",id:"javascript",level:2}]};function C(e){let{components:t,...n}=e;return(0,x.kt)("wrapper",(0,u.Z)({},A,n,{components:t,mdxType:"MDXLayout"}),(0,x.kt)("h2",{id:"javascript"},"JavaScript"),(0,x.kt)("p",null,"Interactive dashboards built on Perspective.js\n",(0,x.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements"},"Custom Elements"),"\nare easy to integrate into any web application framework."),(0,x.kt)("p",null,"Using Perspective's simple query language, elements like\n",(0,x.kt)("inlineCode",{parentName:"p"},"<perspective-viewer>")," can be ",(0,x.kt)("em",{parentName:"p"},"symmetrically")," configured via API or User\ninteraction. Web Applications built with Perspective Custom Elements can be\nre-hydrated from their serialized state, driven from external Events, or\npersisted to any store. Workspaces can mix virtual, server-side Python data\nwith in-browser client data seamlessly, and independent data Views can be\ncross-filtered, duplicated, exported, stacked and saved."),(0,x.kt)("p",null,"To achieve Desktop-like performance in the Browser, Perspective.js\nrelies on ",(0,x.kt)("a",{parentName:"p",href:"https://webassembly.org/"},"WebAssembly")," for excellent\n",(0,x.kt)("em",{parentName:"p"},"query calculation")," time, and ",(0,x.kt)("a",{parentName:"p",href:"https://arrow.apache.org/"},"Apache Arrow"),"\nfor its conservative ",(0,x.kt)("em",{parentName:"p"},"memory footprint")," and efficient ",(0,x.kt)("em",{parentName:"p"},"data serialization"),"."))}C.isMDXComponent=!0;const E={toc:[{value:"Python",id:"python",level:2}]};function V(e){let{components:t,...n}=e;return(0,x.kt)("wrapper",(0,u.Z)({},E,n,{components:t,mdxType:"MDXLayout"}),(0,x.kt)("h2",{id:"python"},"Python"),(0,x.kt)("p",null,"`","perspective-python","`",", built on the same C++ data engine used by the\n",(0,x.kt)("a",{parentName:"p",href:"https://perspective.finos.org/docs/md/js.html"},"WebAssembly version"),", implements\nthe Perspective API directly in Python, either as a virtualized server for\nProduction, or as an embedded JupyterLab Widget for Research."),(0,x.kt)("p",null,"For Application Developers, virtualized ",(0,x.kt)("inlineCode",{parentName:"p"},"<perspective-viewer>")," will only\nconsume the data necessary to render the current screen, enabling ",(0,x.kt)("em",{parentName:"p"},"ludicrous size"),"\ndatasets with nearly instant load. Or - stream the entire dataset to the\nWebAssembly runtime via efficiently via Apache Arrow, and give your server a\nbreak!"),(0,x.kt)("p",null,"For Researchers and Data Scientists, ",(0,x.kt)("inlineCode",{parentName:"p"},"PerspectiveWidget")," is available as a\n",(0,x.kt)("a",{parentName:"p",href:"https://jupyterlab.readthedocs.io/en/stable/"},"Jupyter/JupyterLab")," widget,\nallowing interactive ",(0,x.kt)("a",{parentName:"p",href:"https://pandas.pydata.org/"},"Pandas")," and\n",(0,x.kt)("a",{parentName:"p",href:"https://arrow.apache.org/"},"Apache Arrow")," visualization within a notebook."))}V.isMDXComponent=!0;const P=[{description:o().createElement(S,null)},{description:o().createElement(C,null)},{description:o().createElement(V,null)}];function N(e){let{description:t}=e;return o().createElement("div",{className:(0,a.Z)("col col--4")},o().createElement("div",{className:"text--full padding-horiz--md"},t))}function L(){return o().createElement(o().Fragment,null,o().createElement("section",{className:d},o().createElement("div",{className:"container"},o().createElement("div",{className:"row"},P.map(((e,t)=>o().createElement(N,(0,u.Z)({key:t},e))))))),o().createElement("section",{className:(0,a.Z)(g,d)},o().createElement("div",{className:(0,a.Z)(_,"container")},o().createElement(c.Z,null,(()=>o().createElement(w,null))))))}var T=n(412),M="heroBanner_qdFl",O="buttons_AeoN",R="heroBannerLogo_TelY";function z(){const{siteConfig:e}=(0,i.Z)();console.log(e);const{colorMode:t,setColorMode:r}=(0,l.I)();return o().createElement("header",{className:(0,a.Z)("hero",M)},o().createElement("div",{className:"container"},o().createElement("img",{className:(0,a.Z)(R)}),o().createElement("div",{className:O},o().createElement(c.Z,null,(()=>{const{PerspectiveViewerDemo:e}=n(3062);return o().createElement(e,null)})))))}function D(){const{siteConfig:e}=(0,i.Z)();if(T.Z.canUseDOM){const e=(0,r.useCallback)((()=>{const e=document.body.classList.contains("scrolled");document.documentElement.scrollTop>100&&!e?document.body.classList.add("scrolled"):document.documentElement.scrollTop<=100&&e&&document.body.classList.remove("scrolled")}),[]);(0,r.useEffect)((()=>(document.addEventListener("scroll",e),()=>document.removeEventListener("scroll",e))),[e])}return o().createElement(s.Z,{title:`${e.title}`,description:e.description},o().createElement(z,null),o().createElement("main",null,o().createElement(L,null)))}},8058:function(e,t,n){const r=n(6306).Z;function o(e){return e&&"object"==typeof e&&!Array.isArray(e)}function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i=n.shift();if(o(e)&&o(i))for(const l in i)o(i[l])?(e[l]||Object.assign(e,{[l]:{}}),a(e[l],i[l])):Object.assign(e,{[l]:i[l]});return a(e,...n)}e.exports.get_types=function(){return Object.keys(e.exports.get_config().types)},e.exports.get_type_config=function(t){const n={};if(e.exports.get_config().types[t]&&Object.assign(n,e.exports.get_config().types[t]),n.type){const t=e.exports.get_type_config(n.type);return Object.assign(t,n),t}return n},globalThis.__PERSPECTIVE_CONFIG__=void 0,e.exports.override_config=function(e){globalThis.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),globalThis.__PERSPECTIVE_CONFIG__=a(r,e)},e.exports.get_config=function(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=a(r,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}},8429:function(e,t,n){"use strict";var r=n(7580),o=n(7662),a=n(3603),i=n(9951),l=n(5136),s=n(9452),c=Object.create,u=Object.defineProperty,d=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,_=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,h=e=>u(e,"__esModule",{value:!0}),f=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),b=(e,t)=>{for(var n in h(e),t)u(e,n,{get:t[n],enumerable:!0})},m=e=>((e,t,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of g(t))!p.call(e,r)&&"default"!==r&&u(e,r,{get:()=>t[r],enumerable:!(n=d(t,r))||n.enumerable});return e})(h(u(null!=e?c(_(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),y=f(((e,t)=>{t.exports.default={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short",timeStyle:"medium"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short"},null_value:-1}}}})),w=f(((e,t)=>{var n=y().default;function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;let i=n.shift();if(r(e)&&r(i))for(let l in i)r(i[l])?(e[l]||Object.assign(e,{[l]:{}}),o(e[l],i[l])):Object.assign(e,{[l]:i[l]});return o(e,...n)}t.exports.get_types=function(){return Object.keys(t.exports.get_config().types)},t.exports.get_type_config=function(e){let n={};if(t.exports.get_config().types[e]&&Object.assign(n,t.exports.get_config().types[e]),n.type){let e=t.exports.get_type_config(n.type);return Object.assign(e,n),e}return n},globalThis.__PERSPECTIVE_CONFIG__=void 0,t.exports.override_config=function(e){globalThis.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),globalThis.__PERSPECTIVE_CONFIG__=o(n,e)},t.exports.get_config=function(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=o(n,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}}));Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var v="none",x="ordinal",k="time",S="linear",A=e=>{let t="crossValues",n=null,r=null,o=()=>{let o=r=>{let o=n?e[t].filter((e=>n==e.name)):e[t];return!("crossValues"==t&&o.length>1)&&o.some((e=>r.includes(e.type)))};return 0===e[t].length?v:r!=k&&o(["datetime","date"])?k:r!=S&&o(["integer","float"])||r==x?S:x};return o.settingName=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.settingValue=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.excludeType=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o},C={};b(C,{domain:()=>N,labelFunction:()=>L,scale:()=>P});var E=e=>Array.isArray(e)?e.flat(1/0):[e],V=e=>{let t=t=>e(t);return(0,r.rebindAll)(t,e),t.bandwidth=function(){return arguments.length?(e.bandwidth(...arguments),t):Math.max(e.bandwidth(),1)},t},P=()=>(e=>{let t=t=>e(t);return(0,r.rebindAll)(t,e),t.ticks=function(){return[]},t})(V((0,o.tiA)())),N=()=>{let e=["crossValue"],t="horizontal",n=t=>{let n=E(t);return r([...new Set(n.map((t=>t[e[0]])))])},r=e=>"vertical"==t?e.reverse():e;return n.valueName=function(){return arguments.length?(e=[arguments.length<=0?void 0:arguments[0]],n):e[0]},n.valueNames=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},L=e=>t=>t[e].join("|"),T={};b(T,{component:()=>I,domain:()=>B,labelFunction:()=>$,scale:()=>Y,tickFormatFunction:()=>j});var M=()=>{let e=[0,0],t="percent",n=n=>{switch(t){case"domain":n[0]-=e[0],n[1]+=e[1];break;case"percent":{let t=n[1]-n[0];n[0]-=e[0]*t,n[1]+=e[1]*t;break}default:throw new Error("Unknown padUnit: "+t)}return n};return n.pad=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.padUnit=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},O=function(e){if(Array.isArray(e)){let t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},R=e=>Math.abs(e)>=1e7?(0,o.WUZ)(".3s")(e):Number.isInteger(e)?(0,o.WUZ)(",.0f")(e):(0,o.WUZ)(",.2f")(e);function z(e){return e.getRootNode().host}function D(e){return e.closest("#container.chart")}var Y=()=>(0,o.BYU)(),B=()=>{let e=function(){let e=[function(e){return e}],t=null,n=[],r=M(),o=function(o){let l,s=new Array(o.length),c=!0,u=!1,d=e[Symbol.iterator]();try{for(let e;!(c=(e=d.next()).done);c=!0){let t=e.value;for(let e=0;e<o.length;e++){let n=t(o[e],e);Array.isArray(n)?s.push.apply(s,O(n)):s.push(n)}}}catch(_){u=!0,l=_}finally{try{!c&&d.return&&d.return()}finally{if(u)throw l}}let g=[(0,a.Z)(s),(0,i.Z)(s)];if(g[0]=null==g[0]?(0,a.Z)(n):(0,a.Z)([g[0]].concat(O(n))),g[1]=null==g[1]?(0,i.Z)(n):(0,i.Z)([g[1]].concat(O(n))),null!=t){let e=Math.max(Math.abs(g[1]-t),Math.abs(g[0]-t));g[0]=t-e,g[1]=t+e}return r(g)};return o.accessors=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.pad=function(){return arguments.length?(r.pad(arguments.length<=0?void 0:arguments[0]),o):r.pad},o.padUnit=function(){return arguments.length?(r.padUnit(arguments.length<=0?void 0:arguments[0]),o):r.padUnit},o.include=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o.symmetricalAbout=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],o):t},o.paddingStrategy=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],o):r},o}().pad([0,.1]).padUnit("percent"),t=["crossValue"],n=n=>(e.accessors(t.map((e=>t=>parseFloat(t[e])))),o(E(n)));(0,r.rebindAll)(n,e);let o=n=>{if("domain"==e.padUnit()){let r=(e=>{let n=t.map((t=>e.map((e=>e[t])).sort(((e,t)=>e-t)).filter(((e,t,n)=>0===t||e!==n[t-1])).reduce(((e,t,n,r)=>0===n||e<=t-r[n-1]?e:Math.abs(t-r[n-1])))));return Math.min(...n)})(n);return e.pad([r/2,r/2])(n)}return e(n)};return n.valueName=function(){return arguments.length?(t=[arguments.length<=0?void 0:arguments[0]],n):t[0]},n.valueNames=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},$=e=>t=>t[e][0],j=R,I=e=>{let t=null,n="horizontal",a=null,i=(e,t)=>{let r=e.getBoundingClientRect();t.each(((e,t,a)=>{let i=(0,o.Ys)(a[t]).node().getBoundingClientRect();("vertical"==n&&r.width<i.width||"horizontal"==n&&r.height<i.height)&&(e=>{(0,o.Ys)(e).select("text").node().style.fontSize="80%"})(a[t])}))},l=(e,t,n)=>{let r=((e,t)=>{try{return D(e.node()).querySelector(".cartesian-chart").querySelector(`.${t}-axis`)}catch{return null}})(e,t);r&&i(r,e)},s=()=>({bottom:r.axisBottom,left:r.axisLeft,top:r.axisTop,right:r.axisRight,decorate:l});return s.domain=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],s):t},s.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.settingName=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],s):a},s},F={};b(F,{domain:()=>W,labelFunction:()=>U,scale:()=>H});var H=()=>(0,o.Xf)(),W=()=>{let e=(0,r.extentTime)(),t=["crossValue"],n=n=>(e.accessors(t.map((e=>t=>new Date(t[e])))),o(E(n)));(0,r.rebindAll)(n,e,(0,r.exclude)("include","paddingStrategy"));let o=n=>{let r=Math.abs((e=>{let n=t.map((t=>e.map((e=>new Date(e[t]).getTime())).sort(((e,t)=>e-t)).filter(((e,t,n)=>0===t||e!==n[t-1])).reduce(((e,t,n,r)=>0===n||Math.abs(e)<=Math.abs(t-r[n-1])?Math.abs(e):Math.abs(t-r[n-1])))));return Math.min(...n)})(n));return e.padUnit("domain").pad([r/2,r/2])(n)};return n.valueName=function(){return arguments.length?(t=[arguments.length<=0?void 0:arguments[0]],n):t[0]},n.valueNames=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},U=e=>t=>new Date(t[e][0]),X={};b(X,{component:()=>ne,domain:()=>ee,labelFunction:()=>te,scale:()=>Q});var q=(e,t,n)=>{let a=6,i=6,l=function(){let e={},t=t=>{for(let n of Object.keys(e))t[n](e[n]);return t};for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(let a of r)t[a]=function(){return arguments.length?(e[a]=arguments.length<=0?void 0:arguments[0],t):e[a]};return t}("tickFormat","ticks","tickArguments","tickValues","tickPadding"),s=()=>{},c=null,u=(0,r.dataJoin)("g","group"),d=(0,r.dataJoin)("path","domain"),g=(e,t)=>_()?`translate(${t}, ${e})`:`translate(${e}, ${t})`,_=()=>"left"===e||"right"===e,p=r=>{c?r.each(((r,p,f)=>{let b=f[p],m=(0,o.Ys)(b),y="bottom"===e||"right"===e?1:-1,w=n.range(),v=(e=>_()?e.map((e=>[e[1],e[0]])):e)([[w[0],y*a],[w[0],0],[w[1],0],[w[1],y*a]]);d(m,[r]).attr("d",(0,o.jvg)()(v)).attr("stroke","#000").attr("fill","none");let x=u(m,c),k=e=>Array.isArray(i)?i[e]:i,S=e=>{let t=0;for(let n=0;n<e;n++)t+=k(n);return t};x.attr("transform",((e,t)=>g(0,y*S(t)))).each(((e,r,a)=>{let i=(0,o.Ys)(a[r]),c=h(n,e);l(t(c)).decorate(((e,t)=>s(e,t,r))).tickSizeInner(k(r)).tickOffset((e=>c.step(e)/2))(i),i.select("path.domain").attr("visibility","hidden")})),x.exit().attr("transform",((e,t)=>g(0,y*S(t))))})):l(t(n).decorate(s))(r)},h=(e,t)=>{function n(t){let n=t.domain;return n.reduce(((t,n)=>t+e(n)),0)/n.length}return n.ticks=()=>t,n.tickFormat=()=>e=>e.text,n.copy=()=>h(e,t),n.step=t=>t.domain.length*e.step(),(0,r.rebindAll)(n,e,(0,r.exclude)("ticks","step","copy")),n};return p.tickSize=function(){return arguments.length?(i=a=Number(arguments.length<=0?void 0:arguments[0]),p):i},p.tickSizeInner=function(){return arguments.length?(i=Array.isArray(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:Number(arguments.length<=0?void 0:arguments[0]),p):i},p.tickSizeOuter=function(){return arguments.length?(a=Number(arguments.length<=0?void 0:arguments[0]),p):a},p.decorate=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],p):s},p.groups=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],p):c},(0,r.rebindAll)(p,l),p},Z=e=>q("top",r.axisOrdinalTop,e),G=e=>q("bottom",r.axisOrdinalBottom,e),K=e=>q("left",r.axisOrdinalLeft,e),J=e=>q("right",r.axisOrdinalRight,e),Q=()=>V((0,o.tiA)()).padding(.5),ee=()=>{let e=["crossValue"],t="horizontal",n=t=>{let n=E(t);return r([...Array.from(new Set(n.map((t=>t[e[0]]))))])},r=e=>"vertical"==t?e.reverse():e;return n.valueName=function(){return arguments.length?(e=[arguments.length<=0?void 0:arguments[0]],n):e[0]},n.valueNames=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],n):e},n.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n},te=e=>t=>t[e].join("|"),ne=e=>{let t="horizontal",n="crossValues",a=null,i=()=>{let r=e[n].length>1,o=s(a),i=o.map(c),d=r?i.map((e=>e.size)):i[0].size,_=i.reduce(((e,t)=>e+t.size),0),p=e=>n=>{let a=e(n);return r&&a.groups(o).tickSizeInner(d).tickSizeOuter(_),"horizontal"!==t&&a.tickPadding(10),a},h=l(r);return{bottom:p(h.bottom),left:p(h.left),right:p(h.right),top:p(h.top),size:`${_+10}px`,decorate:(e,n,r)=>{let o=i[r].rotation;"horizontal"===t&&g(e,o),u(e,o)}}},l=e=>e?{bottom:G,left:K,top:Z,right:J}:{bottom:r.axisOrdinalBottom,left:r.axisOrdinalLeft,top:r.axisOrdinalTop,right:r.axisOrdinalRight},s=e=>{let t=[];return e.forEach((e=>{(e&&e.split?e.split("|"):[e]).forEach(((n,r)=>{for(;t.length<=r;)t.push([]);let o=t[r];o.length>0&&o[o.length-1].text===n?o[o.length-1].domain.push(e):o.push({text:n,domain:[e]})}))})),t.reverse()},c=n=>{let r=e.size.width,o=Math.max(...n.map((e=>e.text?e.text.length:0)));return"horizontal"===t?n&&16*n.length>r-100?{size:5*o+10,rotation:90}:n&&n.length*(6*o+10)>r-100?{size:3*o+20,rotation:45}:{size:25,rotation:0}:{size:5*o+10,rotation:0}},u=(e,n)=>{let r=n?(e,t)=>e.x+e.width+14>t.x+t.width:(e,t)=>e.x<=t.x+t.width&&t.x<=e.x+e.width&&e.y<=t.y+t.height&&t.y<=e.y+e.height,a="horizontal"==t?d(e):null,i=[];e.each(((e,t,n)=>{let l=(0,o.Ys)(n[t]),s=(e=>{let t=-1!==e.indexOf(",")?",":" ",n=e.substring(e.indexOf("(")+1,e.indexOf(")")).split(t).map((e=>parseInt(e)));for(;n.length<2;)n.push(0);return n})(l.attr("transform")),c=l.node().getBBox(),u={x:c.x+s[0],y:c.y+s[1],width:c.width,height:c.height},d=i.some((e=>r(e,u)))||a&&!((e,t)=>e.x>=t.x&&e.x+e.width<=t.x+t.width&&e.y>=t.y&&e.y+e.height<=t.y+t.height)(u,a);l.attr("visibility",d?"hidden":""),d||i.push(u)}))},d=e=>{let t=D(e.node());if(null===t)return;let n=t.querySelector(".cartesian-chart"),r=n.querySelector(".x-axis"),o=n.getBoundingClientRect(),a=r.getBoundingClientRect();return{x:o.left-a.left,width:o.width,y:o.top-a.top,height:o.height}},g=(e,t)=>{let n=(e=>e?e<60?`rotate(-${e} 5 5)`:`rotate(-${e} 3 7)`:"translate(0, 8)")(t),r=t?"end":"";e.each(((e,t,a)=>{(0,o.Ys)(a[t]).select("text").attr("transform",n).style("text-anchor",r)}))};return i.orient=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i.settingName=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.domain=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],i):a},i},re={none:C,ordinal:X,time:F,linear:T},oe=e=>{let t=null,n="horizontal",o="crossValues",a=null,i=["crossValue"],l=["include","paddingStrategy","pad"],s={},c=r=>{let c=A(e).excludeType(t).settingName(o).settingValue(a)(),g=re[c],_=g.domain().valueNames(i);l.forEach((e=>{s[e]&&_[e]&&_[e](s[e])})),_.orient&&_.orient(n);let p=_(r),h=g.component?u(g,p,r):d();return{scale:g.scale(),domain:p,domainFunction:_,labelFunction:g.labelFunction,component:{bottom:h.bottom,left:h.left,top:h.top,right:h.right},size:h.size,decorate:h.decorate,label:e[o].map((e=>e.name)).join(", "),tickFormatFunction:g.tickFormatFunction}},u=(t,r,a)=>t.component(e).orient(n).settingName(o).domain(r)(a),d=()=>({bottom:r.axisBottom,left:r.axisLeft,top:r.axisTop,right:r.axisRight,decorate:()=>{}});return c.excludeType=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],c):t},c.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],c):n},c.settingName=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],c):o},c.settingValue=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],c):a},c.valueName=function(){return arguments.length?(i=[arguments.length<=0?void 0:arguments[0]],c):i[0]},c.valueNames=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],c):i},l.forEach((e=>{c[e]=function(){return arguments.length?(s[e]=arguments.length<=0?void 0:arguments[0],c):s[e]}})),c},ae=(e,t)=>le(e,t,((e,t)=>e.svgPlotArea(t)),!1),ie=(e,t)=>le(e,t,((e,t)=>e.canvasPlotArea(t).svgPlotArea((0,r.seriesSvgPoint)())),!0),le=(e,t,n,a)=>{let i=null,l=null,s=(0,r.chartCartesian)({xScale:e.scale,yScale:t.scale,xAxis:e.component,yAxis:t.component}).xDomain(e.domain).xLabel(e.label).xAxisHeight(e.size).xDecorate(e.decorate).xTickFormat(e.tickFormatFunction).yDomain(t.domain).yLabel(t.label).yAxisWidth(t.size).yDecorate(t.decorate).yOrient("left").yTickFormat(t.tickFormatFunction);e.decorate&&s.xDecorate(e.decorate),t.decorate&&s.yDecorate(t.decorate),s.xPaddingInner&&s.xPaddingInner(1),s.xPaddingOuter&&s.xPaddingOuter(.5),s.yPaddingInner&&s.yPaddingInner(1),s.yPaddingOuter&&s.yPaddingOuter(.5),s.axisSplitter=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],s):i},s.altAxis=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],s):l},s.plotArea=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0==t.length?a?this.canvasPlotArea():this.svgPlotArea():n(this,...t)};let c=s.decorate();return s.decorate(((n,u)=>{let d=n.select("d3fc-svg.plot-area"),g=d.select("svg").node();g.setAttribute("viewBox",`0 0 ${d.node().clientWidth} ${d.node().clientHeight}`),g.setAttribute("preserveAspectRatio","none");for(let e of["x-axis","y-axis"])n.select(`d3fc-svg.${e} svg`).node().setAttribute("preserveAspectRatio","none");if(c(n,u),a){let e=n.select(".svg-plot-area").node(),t=n.select(".canvas-plot-area").node();(0,o.td_)([e,t]).order()}if(i){if(i.haveSplit()){let c=i.altData(),d=(0,r.dataJoin)("d3fc-svg","y2-axis").key((e=>e)),g=(0,r.dataJoin)("g","y-series").key((e=>e));n.append("div").attr("class","y-label right-label").style("grid-column",5).style("-ms-grid-column",5).style("grid-row",3).style("-ms-grid-row",3).style("width",l.size||"1em").style("display","flex").style("align-items","center").style("justify-content","center").append("span").attr("class","y-label splitter-label").style("transform","rotate(-90deg)");let _=l.scale.domain(l.domain),p=l.component.right(_);if(p.tickFormat(l.tickFormatFunction),l.decorate&&p.decorate(l.decorate),d(n,["right"]).attr("class",(e=>`y-axis ${e}-axis`)).on("measure",(function(e,t){let{width:n,height:r}=e.detail;"left"===t&&(0,o.Ys)(e.currentTarget).select("svg").attr("viewBox",`${-n} 0 ${n} ${r}`).attr("preserveAspectRatio","none"),_.range([r,0])})).on("draw",(function(e,t){(0,o.Ys)(e.currentTarget).select("svg").call(p)})),a){let r=n=>{let r=s.plotArea();r.context(n.node().getContext("2d")).xScale(e.scale);let o=[t.scale,_];[u,c].forEach(((e,t)=>{r.yScale(o[t]),r(e)}))};n.select("d3fc-canvas.plot-area").on("draw",(function(e,t){r((0,o.Ys)(e.currentTarget).select("canvas"))}))}else{let r=function(n){let r=s.plotArea();r.xScale(e.scale);let a=[t.scale,_];g(n,[u,c]).each(((e,t,n)=>{r.yScale(a[t]),(0,o.Ys)(n[t]).datum(e).call(r)}))};n.select("d3fc-svg.plot-area").on("draw",(function(e,t){r((0,o.Ys)(e.currentTarget).select("svg"))}))}}i(n)}})),s};function se(e,t,n){let r=e.select(t);return r.size()>0?r:n()}function ce(e,t,n){if(void 0===n&&(n="right"),"right"===n||"bottom"===n)return e[n]<t[n];if("left"===n||"top"===n)return e[n]>t[n];throw`Direction being checked for overflow is invalid: ${n}`}function ue(e,t,n,r){void 0===r&&(r=0);let o="x"===e?"width":"height",a=t[e],i=t[e]+t[o],l=n[e],s=n[e]+n[o];return l+r>a&&l-r<i||s+r>a&&s-r<i||l+r<a&&s-r>i}var de='<ul id="tooltip-values"></ul>\n',ge=m(w());function _e(e,t){switch(e){case"date":case"datetime":return t instanceof Date?t:new Date(parseInt(t)).toLocaleString([],(0,ge.get_type_config)(e).format);case"integer":return parseInt(t,10);case"float":return parseFloat(t)}return t}function pe(e,t){return 0===t.crossValues.length||0===e.crossValue.length?[]:((e.crossValue.split?e.crossValue.split("|"):[e.crossValue])||[e.key]).map(((e,n)=>({name:t.crossValues[n].name,value:_e(t.crossValues[n].type,e)})))}function he(e,t){if(0===t.splitValues.length)return[];let n=[e.mainValue];return e.key?n=e.key.split("|"):e.mainValue?.split&&(n=e.mainValue.split("|")),t.splitValues.map(((e,t)=>({name:e.name,value:_e(e.type,n[t])})))}function fe(e,t){return t.mainValues.length>1?e.mainValue?[{name:e.key,value:e.mainValue-(e.baseValue||0)}]:t.mainValues.map(((t,n)=>({name:t.name,value:_e(t.type,e.mainValues[n])}))):[{name:t.mainValues[0].name,value:_e(t.mainValues[0].type,e.colorValue||e.mainValue-e.baseValue||e.mainValue||e.mainValues)}]}var be=m(w());function me(e,t,n){!function(e,t){e.select("#tooltip-values").selectAll("li").data(t).join("li").each((function(e){(0,o.Ys)(this).text(`${e.name}: `).append("b").text(ye(e.value))}))}(e,pe(t,n).concat(he(t,n)).concat(fe(t,n)))}var ye=e=>null==e?"-":e.toLocaleString(void 0,{style:"decimal",minimumFractionDigits:(0,be.get_type_config)("float").precision,maximumFractionDigits:(0,be.get_type_config)("float").precision}),we=e=>[e.name,"==",e.value],ve=(e,t,n)=>{let r=fe(t,n).map((e=>e.name)),o=pe(t,n).map(we),a=he(t,n).map(we),i=n.filter.concat(o).concat(a);e.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{column_names:r,config:{filter:i},row:t.row}}))},xe=()=>{let e=!1,t=null,n=null,r=!1,a=a=>{let i=a.node();if(!i||!i.isConnected)return void ke(t);let l=(0,o.Ys)(D(i));t=function(e){return se(e,"div.tooltip",(()=>e.append("div").attr("class","tooltip").style("z-index",3).style("opacity",0).html(de)))}(l);let s=function(e,i){me(t,i,n);let s=a.nodes(),c=s.indexOf(this);(function(e,t,n,r){let o=e.getBoundingClientRect(),a=t.getBoundingClientRect(),i=a.left+a.width/2-o.left,l=a.top-o.top+e.scrollTop;r&&(l=a.top+a.height/2-o.top+e.scrollTop),n.style("left",`${i}px`).style("top",`${l}px`).style("opacity",.9),r&&([i,l]=function(e,t){let n=e.node().getBoundingClientRect(),r=n.width/2,o=n.left-r-t.left;e.style("left",`${o}px`);let a=n.height/2,i=n.top-a-t.top;return e.style("top",`${i}px`),[o,i]}(n,o)),function(e,t,n,r,o){void 0===o&&(o=!1);let a=e.node().getBoundingClientRect();if(ce(t,a)){let r=a.right-t.right;e.style("left",n-r+"px")}if(ce(t,a,"bottom")){let n=a.bottom-t.bottom;e.style("top",r-n+"px")}if(o){if(ce(t,a,"left")){let r=a.left-t.left;e.style("left",n-r+"px")}if(ce(t,a,"top")){let n=a.top-t.top;e.style("top",r-n+"px")}}}(n,o,i,l,r)})(l.node(),s[c],t,r),(0,o.Ys)(s[c]).style("opacity","0.7")};e?a.each((function(e){return s.call(this,void 0,e)})):(a.on("mouseover",s).on("mouseout",(function(e,n){ke(t);let r=a.nodes(),i=r.indexOf(this);r&&(0,o.Ys)(r[i]).style("opacity","1")})),(()=>{let e=null,t=t=>{let n=t.node();t.on("click",((t,r)=>ve(n,r,e)))};return t.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t})().settings(n)(a))};return a.alwaysShow=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.centered=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a};function ke(e){e&&e.style("opacity",0)}function Se(e,t){let n=e.mainValues.length>1?(0,r.seriesSvgGrouped)((0,r.seriesSvgBar)()):(0,r.seriesSvgBar)();return n=n.decorate((n=>{xe().settings(e)(n),n.style("fill",(e=>t(e.key)))})),(0,r.autoBandwidth)(Ae(n)).crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue?e.mainValue:0)).baseValue((e=>e.baseValue))}var Ae=e=>{let t=t=>e(t);return(0,r.rebindAll)(t,e),t.bandwidth=function(){return arguments.length?(e.bandwidth(Math.max(arguments.length<=0?void 0:arguments[0],1)),t):e.bandwidth()},t};function Ce(e){return e.split("|").slice(0,-1).join("|")}function Ee(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=Object.keys(t).filter((e=>"__ROW_PATH__"!==e));return Ne().settings(e).domain(n)()}function Ve(e,t){let n=Array.from(new Set(t));return Ne().settings(e).domain(n)()}function Pe(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=[];return Object.keys(t).forEach((e=>{if("__ROW_PATH__"!==e){let t=Ce(e);n.includes(t)||n.push(t)}})),Ne().settings(e).domain(n)()}function Ne(){let e=null,t=null,n={},r=e=>Te(e,n.colorStyles&&n.colorStyles.opacity),a=()=>{let a=n.colorStyles,i=t||[a.series];if(i||e.length>1){let t=e.length>1?a.scheme:i;return(0,o.PKp)(t.map(r)).domain(e)}return null};return a.domain=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.defaultColors=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.mapFunction=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a}function Le(e){return Me(1)(e)}function Te(e,t){return void 0===t&&(t=.5),Me(t)(e)}function Me(e){return t=>{let n=(0,o.$_Y)(t);return n.opacity=e,n+""}}var Oe={none:L,ordinal:te,time:U,linear:$},Re=e=>{let t=A(e),n="__ROW_PATH__",o=(e,r)=>Oe[t()](n)(e,r);return(0,r.rebindAll)(o,t),o.valueName=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],o):n},o};function ze(e,t,n){let{stack:r=!1,excludeEmpty:o=!1}=void 0===n?{}:n,a=t||e.data;return e.splitValues.length>0?function(e,t,n){let{stack:r=!1,excludeEmpty:o=!1}=n,a={};return t.forEach((e=>{let t={},n={};Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).filter((t=>!o||null!=e[t]&&null!=e[t])).forEach((o=>{let a=o.split("|"),i=a[a.length-1],l=e[o]||0,s=`${i}${l>=0?"+ve":"-ve"}`,c=a.slice(0,a.length-1).join("|"),u=n[c]=n[c]||{__ROW_PATH__:e.__ROW_PATH__},d=t[s]||0;u.__KEY__=c,r?(u[i]=d+l,u[`__BASE_VALUE__${i}`]=d,t[s]=u[i]):u[i]=l,u.row=e})),Object.keys(n).forEach((e=>{(a[e]=a[e]||[]).push(n[e])}))})),Object.keys(a).map((e=>{let t=a[e];return t.key=e,t}))}(0,a,{stack:r,excludeEmpty:o}):[a]}function De(e,t){let n={stack:!0};return ze(e,t,n).map((t=>Ye(e,t,n)))}function Ye(e,t,n){let{stack:r=!1}=n,o=function(e,t,n){let{stack:r=!1}=n,o=Re(e);return e=>{let n=t=>r&&t[`__BASE_VALUE__${e.name}`]||0,a=t.map(((t,r)=>({crossValue:o(t,r),mainValue:t[e.name]?t[e.name]:null,baseValue:n(t),key:t.__KEY__?`${t.__KEY__}|${e.name}`:e.name,row:t.row||t})));return a.key=a[0].key,a}}(e,t,{stack:r});return e.mainValues.length>1?e.mainValues.map(o):o(e.mainValues[0])}var Be=10;function $e(e,t,n){let r=(0,o.Ys)(z(e).getContainer()).node().getBoundingClientRect(),a=e.getBoundingClientRect(),i={top:a.top+n-Be,right:a.right+t+Be,bottom:a.bottom+n+Be,left:a.left+t-Be},l={x:t,y:n};return[{edge:"right",dimension:"x"},{edge:"left",dimension:"x"},{edge:"top",dimension:"y"},{edge:"bottom",dimension:"y"}].forEach((e=>{if(ce(r,i,e.edge)){let t=i[e.edge]-r[e.edge];l[e.dimension]=l[e.dimension]-t}})),l}var je="resize.for-dragging";function Ie(){let e=!0,t=null,n=n=>{let r=n.node(),a=r.getRootNode().host.closest("perspective-viewer");r.style.cursor="move",t.legend&&(r.style.left=t.legend.left,r.style.top=t.legend.top);let i=(0,o.ohM)().on("drag",(function(n){let a=$e(this,n.dx,n.dy);this.style.left=`${this.offsetLeft+a.x}px`,this.style.top=`${this.offsetTop+a.y}px`;let i={left:this.style.left,top:this.style.top};t.legend={...t.legend,...i},e=function(e){let t=e.getBoundingClientRect(),n=(0,o.Ys)(D(e)).node().getBoundingClientRect(),r=5;return t.right+Be+r>=n.right&&t.top-Be-r<=n.top}(r)?function(e){return(0,o.Ys)(window).on(je,null),e.style.left="auto",!0}(r):function(e,t){return!1!==t&&(0,o.Ys)(window).on(je,(function(){let t=$e(e,0,0);e.style.left=`${e.offsetLeft+t.x}px`,e.style.top=`${e.offsetTop+t.y}px`})),!1}(r,e)}));i.on("end",(function(e){(0,o.Ys)(window).on(je,null),a?.dispatchEvent(new Event("perspective-config-update"))})),n.call(i)};return n.settings=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],n):t},n}var Fe="horizontal-drag-handle",He="vertical-drag-handle",We="dragHandles",Ue="resize";var Xe=(e,t,n,r)=>{e.selectAll(`.${r}`).each(((e,r,a)=>{let i=a[r];(0,o.Ys)(i).attr(n,i.getBoundingClientRect()[n]-t)}))},qe=e=>e.select(`#${We}`).size()>0,Ze=(e,t,n)=>e.attr(t,Number(e.attr(t))-n),Ge=(e,t,n)=>e.attr(t,e.node().getBoundingClientRect()[t]-n),Ke=(e,t)=>{let n,a,i=e||(0,l.wg)(),s=[],c=1,u=t.legend&&t.legend.pageIndex?t.legend.pageIndex:0,d=()=>{},g=Ie().settings(t),_=e=>{s=i.scale().domain(),a=function(){let e=9,t=3,n=null,r={height:100,width:100},a={height:null,width:null},i=[],l=(e,t)=>i.filter((t=>t.event===e)).forEach((e=>e.execute(t))),s=r=>{if(qe(r))return;let i={left:e=>l(Ue,{horizontal:E(e),vertical:!1}),top:e=>l(Ue,{horizontal:!1,vertical:P(e)}),right:e=>l(Ue,{horizontal:V(e),vertical:!1}),bottom:e=>l(Ue,{horizontal:!1,vertical:N(e)}),topleft:e=>l(Ue,{horizontal:E(e),vertical:P(e)}),topright:e=>l(Ue,{horizontal:V(e),vertical:P(e)}),bottomright:e=>l(Ue,{horizontal:V(e),vertical:N(e)}),bottomleft:e=>l(Ue,{horizontal:E(e),vertical:N(e)})},s=r.node();n.legend&&(s.style.height=n.legend.height,s.style.width=n.legend.width);let d=s.getBoundingClientRect(),g=r.append("svg").attr("id",We).attr("width",d.width).attr("height",d.height),_=g.append("g"),p=e=>"left"===e||"right"===e,h={left:0,top:e,right:d.width-e,bottom:e},f={left:e,top:0,right:e,bottom:d.height-e},[b,m,y,w]=["left","top","right","bottom"].map((n=>_.append("rect").attr("id",`drag${n}`).attr("class",p(n)?He:Fe).attr("y",f[n]).attr("x",h[n]).attr("height",p(n)?d.height-2*e:e).attr("width",p(n)?e:d.width-2*e).attr("fill",p(n)?"lightgreen":"lightblue").attr("fill-opacity",0).style("z-index",t).attr("cursor",p(n)?"ew-resize":"ns-resize").call((0,o.ohM)().on("drag",i[n])))),v=e=>`${e[0]}${e[1]}`,x={topleft:"nwse",topright:"nesw",bottomright:"nwse",bottomleft:"nesw"},[k,S,A,C]=[["top","left"],["top","right"],["bottom","right"],["bottom","left"]].map((n=>_.append("rect").attr("id",`drag${v(n)}`).attr("class",`corner-drag-handle ${n[0]} ${n[1]}`).attr("height",e).attr("width",e).attr("fill","red").attr("fill-opacity",0).style("z-index",t).attr("cursor",`${x[v(n)]}-resize`).call((0,o.ohM)().on("drag",i[v(n)]))));function E(e){let t=u($e(b.node(),e.x,0).x,g,"width",((e,t)=>e-t));return s.style.left=`${s.offsetLeft+t}px`,s.style.width=s.offsetWidth-t+"px",L(),T(y,t,"width","x")}function V(e){let t=-u($e(y.node(),e.dx,0).x,g,"width",((e,t)=>e+t));return!c(t,"x",y,e)&&(s.style.width=s.offsetWidth-t+"px",L(),T(y,t,"width","x"))}function P(e){let t=u($e(m.node(),0,e.y).y,g,"height",((e,t)=>e-t));return s.style.top=`${s.offsetTop+t}px`,s.style.height=s.offsetHeight-t+"px",L(),T(w,t,"height","y")}function N(e){let t=-u($e(w.node(),0,e.dy).y,g,"height",((e,t)=>e+t));return!c(t,"y",w,e)&&(s.style.height=s.offsetHeight-t+"px",L(),T(w,t,"height","y"))}function L(){let e={top:s.style.top,left:s.style.left,height:s.style.height,width:s.style.width};n.legend={...n.legend,...e}}function T(e,t,n,r){return Ge(g,n,t),Ze(e,r,t),Xe(g,t,n,"height"===n?He:Fe),M(g),0!=t}function M(t){k.attr("y",0,"x",0),S.attr("y",0).attr("x",t.attr("width")-e),A.attr("y",t.attr("height")-e).attr("x",t.attr("width")-e),C.attr("y",t.attr("height")-e).attr("x",0)}function O(e,t,n){a[e]&&a[e]<d[e]&&(s.style[e]=`${a[e]}px`,T(n,d[e]-a[e],e,t))}O("height","y",w),O("width","x",y),M(g)};function c(e,t,n,r){return o=t,a=n,e<0&&r[o]<Number(a.attr(o))||((e,t,n,r)=>e>0&&r[t]>Number(n.attr(t)))(e,t,n,r);var o,a}function u(e,t,n,o){let i=o(Number(t.attr(n)),e);return i<r[n]?o(e,r[n]-i):a[n]&&i>a[n]?o(e,a[n]-i):e}return s.on=(e,t)=>(i.push({event:e,execute:t}),s),s.zIndex=e=>(t=e,s),s.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],s):n},s.minWidth=e=>(r.width=e,a.width&&(a.width=Math.max(r.width,a.width)),s),s.minHeight=e=>(r.height=e,a.height&&(a.height=Math.max(r.height,a.height)),s),s.handleWidth=t=>(e=t,s),s.maxWidth=e=>(a.width=e,r.width=Math.min(r.width,a.width),s),s.maxHeight=e=>(a.height=e,r.height=Math.min(r.height,a.height),s),s}().settings(t).maxHeight(16*s.length+20).on("resize",(()=>p(e))),a(e),g(e),p(e)},p=e=>{y(e),h(e),f(e),function(e){let t=e.select("g.legendCells"),n=e.node().getBoundingClientRect();if(!ce(n,t.node().getBoundingClientRect()))return;let r=e.select(".legend");t.selectAll(".label").text(((e,t,o)=>{let a=o[t];if(ce(n,a.getBoundingClientRect())){let t=function(e,t,n){let r=e.getBoundingClientRect(),o=t.node().createSVGPoint(),a=3;return o.x=n.right-r.left-a,o.y=0,e.getCharNumAtPosition(o)}(a,r,n);return`${e.substring(0,t-3)}...`}return e}))}(e)},h=e=>{let t=v(e);t.style("display",c<=1?"none":"block"),t.select("#page-text").text(`${u+1}/${c}`),t.select("#up-arrow").attr("class",0===u?"disabled":"").on("click",(()=>{u>0&&(b(u-1),p(e))})),t.select("#down-arrow").attr("class",u>=c-1?"disabled":"").on("click",(()=>{u<c-1&&(b(u+1),p(e))}))},f=e=>{c>1&&i.cellFilter(m()),e.select("g.legendCells").remove();let t=x(e);t.call(i);let n=e.select("g.legendCells").node().getBBox();t.attr("height",n.height+20),d(e)},b=e=>{u=e,t.legend={...t.legend,pageIndex:u}},m=()=>(e,t)=>t>=n*u&&t<n*u+n,y=e=>{let t=e.node().getBoundingClientRect(),r=Math.floor(t.height/16)-1;n=r<s.length?r-1:r,c=w(r),u=Math.min(u,c-1)},w=e=>Math.ceil(s.length/e),v=e=>se(e,".legend-controls",(()=>e.append("g").attr("class","legend-controls").html('<span id="up-arrow">&#9650;</span>\n<span id="page-text"></span>\n<span id="down-arrow">&#9660;</span>\n'))),x=e=>se(e,".legend",(()=>e.append("svg").attr("class","legend")));return _.decorate=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],_):d},(0,r.rebindAll)(_,i),_},Je=e=>Ke((0,l.wg)().shape("circle").shapeRadius(6),e),Qe=e=>Ke((0,l.ry)().shapePadding(1).labelOffset(3),e),et=()=>rt(Je),tt=()=>rt(Qe,nt);function nt(e){if(!e)return null;let t=e.domain(),n=e.range().map((e=>(0,o.NAG)().type(e)()));return(0,o.PKp)().domain(t).range(n)}function rt(e,t){let n={},r=null,o=null;function a(t){if(r&&r.range().length>1){let a=e(n);a.scale(r).orient("vertical").on("cellclick",(function(e){let t=this.__data__;n.hideKeys=n.hideKeys||[],n.hideKeys.includes(t)?n.hideKeys=n.hideKeys.filter((e=>e!==t)):n.hideKeys.push(t),z(this)._draw()})),a.labels((e=>{let t=e.domain[e.i].split("|");return n.mainValues.length<=1&&t.length>1?t.slice(0,t.length-1).join("|"):e.domain[e.i]}));let i=se(t,"div.legend-container",(()=>t.append("div")));a.decorate((e=>{let t=e=>n.hideKeys&&n.hideKeys.includes(e),r=e.select("g.legendCells").attr("transform","translate(20,20)").selectAll("g.cell");r.classed("hidden",t),r.append("title").html((e=>e)),o&&r.select("circle, path").style("fill",(e=>t(e)?null:o(e))).style("stroke",(e=>t(e)?null:Le(o(e))))})),i.attr("class","legend-container").attr("borderbox-on-hover",!0).style("z-index","2").call(a)}}return a.settings=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.scale=function(){return arguments.length?(r=t?t(arguments.length<=0?void 0:arguments[0]):arguments.length<=0?void 0:arguments[0],a):r},a.color=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a}function ot(e,t){let n=t||e.data;return e.hideKeys&&e.hideKeys.length>0?n.map((t=>{let n={...t};return e.hideKeys.forEach((e=>{delete n[e]})),n})):n}function at(e,t){let n=t||e.data;return e.hideKeys&&e.hideKeys.length>0?n.map((t=>{let n={};return Object.keys(t).map((r=>{e.hideKeys.includes(Ce(r))||(n[r]=t[r])})),n})):n}var it=e=>t=>{t.strokeStyle=e?e.colorStyles.grid.gridLineColor:"#bbb",t.lineWidth=1},lt=e=>e.style("display","none"),st=e=>t=>{t.lineWidth=1,t.strokeStyle=e?e.colorStyles.grid.gridLineColor:"#bbb"},ct=(e,t)=>{let n="both",o=!1,a=null,i=null,l=null,s=(0,r.seriesSvgMulti)(),c=(0,r.annotationSvgGridline)(),u=(e=>t=>t.style("stroke-width","1.0").style("stroke",e?e.colorStyles.grid.gridLineColor:"#bbb"))(t),d=lt,g=function(){o&&(s=(0,r.seriesCanvasMulti)().context(l),c=(0,r.annotationCanvasGridline)(),u=it(t),d=st(t));let g=s.xScale(a).yScale(i),_="vertical"===n?d:u,p="horizontal"===n?d:u,h=c.xDecorate(_).yDecorate(p);return g.series([h,e])(...arguments)};return g.orient=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],g):n},g.canvas=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],g):o},g.xScale=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],g):a},g.yScale=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],g):i},g.context=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],g):l},g},ut=()=>{let e=M(),t=t=>{let n=e.pad(),r=e.padUnit(),o=1;switch(r){case"domain":break;case"percent":o=t[1]-t[0];break;default:throw new Error("Unknown padUnit: "+r)}let a=t[0]-n[0]*o,i=t[1]+n[1]*o;return t[0]=t[0]>=0&&a<0?0:a,t[1]=t[1]<=0&&i>0?0:i,t};return(0,r.rebindAll)(t,e),t},dt=()=>{let e=null,t=null,n=null,r=null,a=null,i=null,l=!1,s=!1,c=()=>{};function u(c){let u=`d3fc-${s?"canvas":"svg"}.plot-area`;if(n||a){let _=r&&r.domain()[0]instanceof Date,p=(0,o.sPX)().on("zoom",(l=>{let{transform:s}=l;t.zoom={k:s.k,x:s.x,y:s.y},d(s),c.call(e);let h=1===s.k&&0===s.x&&0===s.y,f=g(c).style("display",h?"none":"");f.select("#zoom-reset").on("click",(()=>c.select(u).call(p.transform,o.CRH)));let b=f.select("#one-year").style("display",_?"":"none"),m=f.select("#six-months").style("display",_?"":"none"),y=f.select("#one-month").style("display",_?"":"none");if(_){let e=e=>()=>{let t=new Date(n.domain()[0]),l=new Date(t);e(t,l);let s=r.range(),d=(s[1]-s[0])/(r(l)-r(t)),g=-r(t)*d,_=0;if(a){let e=a.domain().reduce(((e,t)=>e+t))/2;_=-i(e)*d+a(e)}c.select(u).call(p.transform,o.CRH.translate(g,_).scale(d))};b.on("click",e(((e,t)=>t.setYear(e.getFullYear()+1)))),m.on("click",e(((e,t)=>t.setMonth(e.getMonth()+6)))),y.on("click",e(((e,t)=>t.setMonth(e.getMonth()+1))))}})),h=e.decorate();e.decorate(((e,n)=>{if(h(e,n),!l){l=!0;let n=e.select(u),a=s?window.devicePixelRatio:1;n.on("measure.zoom-range",(e=>{if(r&&r.range([0,e.detail.width/a]),i&&i.range([0,e.detail.height/a]),t.zoom){let e=o.CRH.translate(t.zoom.x,t.zoom.y).scale(t.zoom.k);n.call(p.transform,e)}})).call(p)}}))}c.call(e)}u.chart=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],u):e},u.settings=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],u):t},u.xScale=function(){return arguments.length?(n=_(arguments.length<=0?void 0:arguments[0]),r=n?n.copy():null,u):n},u.yScale=function(){if(!arguments.length)return a;if(a=_(arguments.length<=0?void 0:arguments[0]),i=a?a.copy():null,i){let e=i.domain();i.domain([e[1],e[0]])}return u},u.canvas=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],u):s},u.onChange=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],u):c};let d=e=>{let t={...e};if(n&&(n.domain(e.rescaleX(r).domain()),t.xDomain=n.domain()),a){let n=e.rescaleY(i).domain();a.domain([n[1],n[0]]),t.yDomain=a.domain()}c(t)},g=e=>se(e,".zoom-controls",(()=>e.append("div").attr("class","zoom-controls").style("display","none").html('<button id="zoom-reset">Reset zoom</button>\n<button id="one-year">1 Year</button>\n<button id="six-months">6 Months</button>\n<button id="one-month">1 Month</button>\n'))),_=e=>e&&e.nice?e:null;return u};function gt(e,t){let n=De(t,ot(t)),o=Ee(t),a=et().settings(t).scale(o),i=Se(t,o).orient("horizontal"),l=(0,r.seriesSvgMulti)().mapping(((e,t)=>e[t])).series(n.map((()=>i))),s=oe(t).settingName("mainValues").valueName("mainValue").excludeType(x).include([0]).paddingStrategy(ut())(n),c=oe(t).excludeType(S).settingName("crossValues").valueName("crossValue").orient("vertical")(n),u=ae(s,c).plotArea(ct(l,t).orient("horizontal"));u.yPaddingInner&&(u.yPaddingInner(.5),u.yPaddingOuter(.25),i.align("left")),u.xNice&&u.xNice();let d=dt().chart(u).settings(t).yScale(c.scale);e.datum(n).call(d),e.call(a)}gt.plugin={name:"X Bar",category:"X Chart",max_cells:1e3,max_columns:50,render_warning:!0};var _t=gt,pt=e=>2===e.length&&!isNaN(e[0])&&!isNaN(e[1])&&e[0]!==e[1],ht=e=>(0-e[0])/(e[1]-e[0]),ft=(e,t)=>t*e[1]/(t-1),bt=function(e,t,n){void 0===n&&(n=mt);let o,a,i,l=e.splitMainValues||[],s=e=>{let t=e.split("|");return l.includes(t[t.length-1])},c=e.mainValues.some((e=>s(e.name)));a=c?n(t,(e=>!s(e))):t,i=c?n(t,s):null;let u=t=>{if(1===e.mainValues.length)return;let n=e.mainValues.map(((e,t)=>({index:t,name:e.name}))),a=n.filter((e=>!s(e.name))),i=n.filter((e=>s(e.name))),l=()=>(e=>{let t,n=[],o=!1,a=a=>{a.text("");let l=(0,r.dataJoin)("span","splitter-label").key((e=>e)),s=!o&&1===n.length,c=t&&0===e.splitValues.length;l(a,n).classed("disabled",s).text((e=>e.name)).style("color",(e=>c?Le(t(e.name)):void 0)).on("click",((t,n)=>{s||(e.splitMainValues=o?e.splitMainValues.filter((e=>e!=n.name)):[n.name].concat(e.splitMainValues||[]),t.target.getRootNode().host.closest("perspective-viewer")?.dispatchEvent(new Event("perspective-config-update")),i(a))}))},i=e=>{let t=z(e.node());t._container.innerHTML="",t._draw()};return a.labels=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.alt=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a.color=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a})(e).color(o);t.select(".y-label.left-label").call(l().labels(a)),t.select(".y-label.right-label").call(l().labels(i).alt(!0))};return u.color=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],u):o},u.haveSplit=()=>c,u.data=function(){return arguments.length?(a=arguments.length<=0?void 0:arguments[0],u):a},u.altData=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],u):i},u},mt=(e,t)=>e.map((e=>e.filter((e=>t(e.key))))),yt=(e,t)=>e.map((e=>t(e.key)?e:e.map((e=>Object.assign({},e,{mainValue:null}))))),wt=(e,t)=>e.map((e=>yt(e,t)));function vt(e,t){let n=De(t,ot(t)),o=Ee(t),a=et().settings(t).scale(o),i=Se(t,o).orient("vertical"),l=(0,r.seriesSvgMulti)().mapping(((e,t)=>e[t])).series(n.map((()=>i))),s=oe(t).excludeType(S).settingName("crossValues").valueName("crossValue")(n),c=oe(t).settingName("mainValues").valueName("mainValue").excludeType(x).orient("vertical").include([0]).paddingStrategy(ut()),u=t.mainValues.length>1?wt:yt,d=bt(t,n,u).color(o),g=c(d.data()),_=d.haveSplit()?l:ct(l,t).orient("vertical"),p=ae(s,g).axisSplitter(d).plotArea(_);p.xPaddingInner&&(p.xPaddingInner(.5),p.xPaddingOuter(.25),i.align("left")),p.yNice&&p.yNice();let h=dt().chart(p).settings(t).xScale(s.scale);if(d.haveSplit()){let e=c(d.altData());((e,t)=>{if(!pt(e)||!pt(t))return;let n=ht(e),r=ht(t);n>r?t[0]=ft(t,n):e[0]=ft(e,r)})(g.domain,e.domain),p.yDomain(g.domain).altAxis(e)}e.datum(d.data()).call(h),e.call(a)}vt.plugin={name:"Y Bar",category:"Y Chart",max_cells:1e3,max_columns:50,render_warning:!0};var xt=vt;function kt(e,t){let n=(0,r.seriesSvgLine)(),o=e.data.length*(e.data?.length>0?Object.keys(e.data[0]).length-(e.crossValues?.length>0?1:0):0),a=Math.max(1,Math.min(3,Math.floor(e.size.width/o/2)));return n=n.decorate((e=>{e.style("stroke",(e=>Le(t(e[0]&&e[0].key)))).style("stroke-width",a)})),n.crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue))}var St=function(e){let t=[];for(let n of e)for(let e=0;e<n.length;e++)null!==n[e].mainValue&&(t[e]=t[e]||[],t[e].push(n[e]));return t},At=function(e,t,n){void 0===n&&(n=Math.min);let r=e=>e.reduce(((e,r)=>{let a=o(r,t);return!a||e&&n(e.value,a.value)!==a.value?e:a}),null),o=e=>{if(Array.isArray(e))return r(e);let n=t(e);return null!==n?{item:e,value:n}:null},a=r(e);return a?a.item:null},Ct=()=>{let e=xe().alwaysShow(!0),t=null,n=null,o=null,a=null,i=!1,l=null,s="crossValue",c="mainValue",u=null,d=1;function g(o){let a=`d3fc-${i?"canvas":"svg"}.plot-area`;if(t||n){let t=null,i=(0,r.pointer)().on("point",(e=>{let r=e.length?p(e[0]):null;t=r?[r.data]:[];let a=r?r.scale:n;_(o,t,a)}));o.select(a).on("measure.nearbyTip",(()=>_(o,[]))).on("click",(()=>{t.length&&ve(o.node(),t[0],e.settings())})).call(i)}}let _=function(r,i,l){void 0===l&&(l=n);let u=r.select("d3fc-svg.plot-area svg").selectAll("circle.nearbyTip").data(i);u.exit().remove(),u.enter().append("circle").attr("class","nearbyTip").merge(u).attr("r",(e=>a?d*Math.sqrt(a(e.size)):10)).attr("transform",(e=>`translate(${t(e[s])},${l(e[c])})`)).style("stroke","none").style("fill",(e=>o&&e.key&&Te(o(e.key)))),e(u)},p=e=>{let r=n=>r=>void 0===r[c]||null===r[c]||void 0===r[s]||null===r[s]?null:Math.sqrt(Math.pow(t(r[s])-e.x,2)+Math.pow(n(r[c])-e.y,2)),o=r(n),a=At(l,o,Math.min);if(u){let e=r(u.yScale),t=At(u.data,e,Math.min);return o(a)<=e(t)?{data:a,scale:n}:{data:t,scale:u.yScale}}return{data:a,scale:n}};return g.scaleFactor=function(){return arguments.length?(d=arguments.length<=0?void 0:arguments[0],g):d},g.xScale=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],g):t},g.yScale=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],g):n},g.color=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],g):o},g.size=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length?(a=t[0]?t[0].copy().range([40,4e3]):null,g):a},g.canvas=function(){return arguments.length?(i=arguments.length<=0?void 0:arguments[0],g):i},g.data=function(){return arguments.length?(l=arguments.length<=0?void 0:arguments[0],g):l},g.xValueName=function(){return arguments.length?(s=arguments.length<=0?void 0:arguments[0],g):s},g.yValueName=function(){return arguments.length?(c=arguments.length<=0?void 0:arguments[0],g):c},g.altDataWithScale=function(){return arguments.length?(u=arguments.length<=0?void 0:arguments[0],g):u},(0,r.rebindAll)(g,e),g};function Et(e,t){let n=function(e,t){let n=Re(e);return t.map(((e,t)=>Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).map((r=>({key:r,crossValue:n(e,t),mainValue:e[r],row:e})))))}(t,ot(t)),o=Ee(t),a=et().settings(t).scale(o),i=(0,r.seriesSvgRepeat)().series(kt(t,o)).orient("horizontal"),l=ut().pad([.1,.1]).padUnit("percent"),s=oe(t).excludeType(S).settingName("crossValues").valueName("crossValue")(n),c=oe(t).settingName("mainValues").valueName("mainValue").orient("vertical").paddingStrategy(l),u=bt(t,St(n)).color(o),d=c(u.data()),g=u.haveSplit()?i:ct(i,t).orient("vertical"),_=ae(s,d).axisSplitter(u).plotArea(g);_.yNice&&_.yNice();let p=dt().chart(_).settings(t).xScale(s.scale),h=Ct().settings(t).xScale(s.scale).yScale(d.scale).color(o).data(n);if(u.haveSplit()){let e=c(u.altData());_.altAxis(e),h.data(u.data()).altDataWithScale({yScale:e.scale,data:u.altData()})}let f=u.data();e.datum(f).call(p),e.call(h),e.call(a)}Et.plugin={name:"Y Line",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0};var Vt=Et,Pt=[o.JFv,o.tJO,o.rZl,o.m_s,o.Hmc,o.P67,o.n31];function Nt(e){return e.length>1?(0,o.PKp)().domain(e).range(Pt):null}function Lt(e){let t=e.data&&e.data.length>0?e.data[0]:{},n=[];return Object.keys(t).forEach((e=>{if("__ROW_PATH__"!==e){let t=Ce(e);n.includes(t)||n.push(t)}})),Nt(n)}function Tt(e,t){let n=St(function(e,t){let n=e.mainValues.length;return t.map((e=>{let t=Object.keys(e).filter((e=>"__ROW_PATH__"!==e)),r=new Array(t.length/n);for(let o=0;o<t.length/n;o++)r[o]={key:Ce(t[o*n]),crossValue:e[t[o*n]],mainValue:e[t[o*n+1]],row:e};return r}))}(t,at(t))),o=Pe(t),a=Lt(t),i=null;o.domain().length>2&&(i=rt(Je,nt).settings(t).scale(a).color(o));let l=(0,r.seriesSvgRepeat)().series(kt(t,o)).orient("horizontal"),s=ut().pad([.1,.1]).padUnit("percent"),c=oe(t).settingName("mainValues").settingValue(t.mainValues[0].name).valueName("crossValue").paddingStrategy(s),u=oe(t).settingName("mainValues").settingValue(t.mainValues[1].name).valueName("mainValue").orient("vertical").paddingStrategy(s)(n),d=c(n),g=ct(l,t).orient("vertical"),_=ae(d,u).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(g);_.xNice&&_.xNice(),_.yNice&&_.yNice();let p=dt().chart(_).settings(t).xScale(d.scale).yScale(u.scale),h=Ct().settings(t).xScale(d.scale).yScale(u.scale).color(o).data(n);e.datum(n).call(p),e.call(h),i&&e.call(i)}Tt.plugin={name:"X/Y Line",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Tooltip"]},selectMode:"toggle"};var Mt=Tt;function Ot(e,t){let n=function(e,t){let n=Re(e);return t.map(((e,t)=>{let r={};return Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).map((o=>{let a=o.split("|"),i=a[a.length-1],l=r[i]||0,s=l+e[o];return r[i]=s,{key:o,crossValue:n(e,t),mainValue:s,baseValue:l,row:e}}))}))}(t,ot(t)),o=Ee(t),a=et().settings(t).scale(o),i=(0,r.seriesSvgRepeat)().series(function(e,t){let n=(0,r.seriesSvgArea)();return n=n.decorate((e=>{e.style("fill",(e=>t(e[0].key))).style("opacity",.5)})),n.crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue)).baseValue((e=>e.baseValue))}(0,o).orient("vertical")),l=(0,r.seriesSvgRepeat)().series(kt(t,o)).orient("vertical"),s=(0,r.seriesSvgMulti)().series([i,l]),c=oe(t).excludeType(S).settingName("crossValues").valueName("crossValue")(n),u=oe(t).settingName("mainValues").valueName("mainValue").excludeType(x).orient("vertical").include([0]).paddingStrategy(ut()),d=bt(t,n).color(o),g=u(d.data()),_=d.haveSplit()?s:ct(s,t).orient("vertical"),p=ae(c,g).axisSplitter(d).plotArea(_);p.yNice&&p.yNice();let h=dt().chart(p).settings(t).xScale(c.scale),f=Ct().settings(t).xScale(c.scale).yScale(g.scale).color(o).data(n);if(d.haveSplit()){let e=u(d.altData());p.altAxis(e),f.data(d.data()).altDataWithScale({yScale:e.scale,data:d.altData()})}e.datum(d.data()).call(h),e.call(f),e.call(a)}Ot.plugin={name:"Y Area",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0};var Rt=Ot;function zt(e,t){let n=function(e,t){let n={stack:!1},r=ze(e,t,n).map((t=>Ye(e,t,n)));return e.mainValues.length>1?r.reduce(((e,t)=>e.concat(t))):r}(t,ot(t)),o=function(e){let t=e.data&&e.data.length>0?e.data[0]:{};return Nt(Object.keys(t).filter((e=>"__ROW_PATH__"!==e)))}(t),a=Ee(t),i=tt().settings(t).scale(o).color(a),l=(0,r.seriesSvgMulti)().mapping(((e,t)=>e[t])).series(n.map((e=>function(e,t,n,o){let a=(0,r.seriesSvgPoint)().size(100),i=e.colorStyles&&e.colorStyles.opacity;return o&&a.type(o(t)),a.decorate((e=>{e.style("stroke",(e=>Le(n(e.colorValue||t)))).style("fill",(e=>Te(n(e.colorValue||t),i)))})),a.crossValue((e=>e.crossValue)).mainValue((e=>e.mainValue))}(t,e.key,a,o)))),s=ut().pad([.05,.05]).padUnit("percent"),c=oe(t).excludeType(S).settingName("crossValues").valueName("crossValue")(n),u=oe(t).settingName("mainValues").valueName("mainValue").orient("vertical").paddingStrategy(s),d=bt(t,n).color(a),g=u(d.data()),_=d.haveSplit()?l:ct(l,t).orient("vertical"),p=ae(c,g).axisSplitter(d).plotArea(_);p.yNice&&p.yNice();let h=dt().chart(p).settings(t).xScale(c.scale),f=Ct().settings(t).xScale(c.scale).yScale(g.scale).color(a).data(n);if(d.haveSplit()){let e=u(d.altData());p.altAxis(e),f.data(d.data()).altDataWithScale({yScale:e.scale,data:d.altData()})}e.datum(d.data()).call(h),e.call(f),i&&e.call(i)}zt.plugin={name:"Y Scatter",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0};var Dt=zt;function Yt(e,t){return ze(e,t,{excludeEmpty:!0}).map((t=>function(e,t){let n=Re(e),r=t.map(((r,o)=>({crossValue:n(r,o),mainValues:e.mainValues.map((e=>r[e.name])),x:r[e.mainValues[0].name],y:r[e.mainValues[1].name],colorValue:e.realValues[2]?r[e.realValues[2]]:void 0,size:e.realValues[3]?r[e.realValues[3]]:void 0,key:t.key,row:r})));return r.key=t.key,r}(e,t)))}function Bt(e,t,n,r){let a=$t(t,n,r),i=e.colorStyles.gradient.full;if(a[0]>=0)i=e.colorStyles.gradient.positive;else if(a[1]<=0)i=e.colorStyles.gradient.negative;else{let e=Math.max(-a[0],a[1]);a=[-e,e]}let l=jt(i);return(0,o.cJy)(l).domain(a)}var $t=(e,t,n)=>n||B().valueName(t).pad([0,0])(e),jt=e=>{let t=e.slice(1).map(((t,n)=>(0,o.sXR)(e[n][1],t[1])));return n=>{let r=e.findIndex(((t,r)=>r<e.length-1&&n<=e[r+1][0]&&n>t[0]));if(-1===r)return n<=e[0][0]?e[0][1]:e[e.length-1][1];let o=t[r],[a]=e[r],[i]=e[r+1];return o((n-a)/(i-a))}};function It(){let e=null;function t(t){let n=se(t,"div.legend-container",(()=>t.append("div").attr("class","legend-container legend-color").style("z-index","2"))),{width:a,height:i}=n.node().getBoundingClientRect(),l=(0,o.tiA)().domain([0,1]).range([0,a]),s=e.copy().nice().domain(),c=(0,r.extentLinear)().pad([.1,.1]).padUnit("percent")(s),[u,d]=c,g=(0,o.w6H)(u,d,(d-u)/i),_=(0,o.BYU)().domain(c).range([i,0]),p=(0,r.autoBandwidth)((0,r.seriesSvgBar)()).xScale(l).yScale(_).crossValue(0).baseValue(((e,t)=>g[Math.max(0,t-1)])).mainValue((e=>e)).decorate((t=>{t.selectAll("path").style("fill",(t=>e(t)))})),h=s[0]<0&&s[1]>0?0:Math.round((s[1]+s[0])/2),f=[...s,h],b=(0,r.axisRight)(_).tickValues(f).tickSizeOuter(0).tickFormat((e=>R(e))),m=se(n,"svg",(()=>n.append("svg"))).style("width",a).style("height",i),y=se(m,"g",(()=>m.append("g"))).datum(g).call(p),w=Math.abs(y.node().getBBox().x);se(m,"#legend-axis",(()=>m.append("g").attr("id","legend-axis"))).attr("transform",`translate(${w})`).datum(g).call(b).select(".domain").attr("visibility","hidden")}return t.scale=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t):e},t}function Ft(e,t){let n=Yt(t,at(t)),a=Lt(t),i=t.realValues.length<=2||null===t.realValues[2],l=null,s=null;i?(l=Pe(t),s=tt().settings(t).scale(a).color(i?l:null)):(l=Bt(t,n,"colorValue"),s=It().scale(l));let c=t.realValues[3]?function(e,t,n,r){return(0,o.BYU)().domain($t(t,n,r))}(0,n,"size").range([10,1e4]):null,u=t.realValues[4],d=function(e,t){let[n,r]=e,[o,a]=t,i=(a-r)/(o-n),l=a-i*o;return function(e){let t=e.node(),n=Math.min(t.clientWidth,t.clientHeight);return Math.min(a,Math.max(r,i*n+l))}}([600,.1],[1600,1])(e),g=(0,r.seriesCanvasMulti)().mapping(((e,t)=>e[t])).series(n.map((e=>function(e,t,n,o,a,i,l){void 0===l&&(l=1);let s=(0,r.seriesCanvasPoint)().crossValue((e=>e.x)).mainValue((e=>e.y));return n&&s.size((e=>Math.round(l*n(e.size)))),i&&s.type(i(t)),s.decorate(((r,i)=>{let s=o(void 0!==i.colorValue?i.colorValue:t),c=e.colorStyles&&e.colorStyles.opacity;if(a){r.fillStyle=e.textStyles.color,r.font=e.textStyles.font;let{type:t}=e.mainValues.find((e=>e.name===a)),o=_e(t,i.row[a]),s=n?.015*Math.round(l*n(i.size))+10:10;r.fillText(o,s,4)}r.strokeStyle=Le(s),r.fillStyle=Te(s,c)})),s}(t,e.key,c,l,u,a,d)))),_=()=>oe(t).settingName("mainValues").paddingStrategy(ut()).pad([.1,.1]),p=_().settingValue(t.mainValues[0].name).valueName("x")(n),h=_().orient("vertical").settingValue(t.mainValues[1].name).valueName("y")(n),f=ie(p,h).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(ct(g,t).canvas(!0));f.xNice&&f.xNice(),f.yNice&&f.yNice();let b=dt().chart(f).settings(t).xScale(p.scale).yScale(h.scale).canvas(!0),m=Ct().scaleFactor(d).settings(t).canvas(!0).xScale(p.scale).xValueName("x").yValueName("y").yScale(h.scale).color(i&&l).size(c).data(n);e.datum(n).call(b),e.call(m),s&&e.call(s)}Ft.plugin={name:"X/Y Scatter",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Color","Size","Label","Tooltip"]},selectMode:"toggle"};var Ht=Ft;function Wt(e,t){let n=function(e,t){let n=Re(e),r=A(e).excludeType(S).settingName("splitValues")(),o=[];return t.forEach(((e,t)=>{let a=n(e,t);Object.keys(e).filter((e=>"__ROW_PATH__"!==e)).forEach((t=>{let n=function(e){let t=e.split("|");return t.pop(),t.join("|")}(t);o.push({crossValue:a,mainValue:r===k?new Date(n):n,colorValue:e[t],row:e})}))})),o}(t,ot(t)),o=Bt(t,n,"colorValue"),a=function(e,t){let n=(0,r.seriesCanvasHeatmap)();return n.decorate(((e,n)=>{e.fillStyle=t(n.colorValue)})),(0,r.autoBandwidth)(n).xValue((e=>e.crossValue)).yValue((e=>e.mainValue)).colorValue((e=>e.colorValue)).colorInterpolate(t.interpolator()).widthFraction(1)}(0,o),i=It().scale(o),l=oe(t).excludeType(S).settingName("crossValues").valueName("crossValue")(n),s=oe(t).excludeType(S).settingName("splitValues").valueName("mainValue").orient("vertical")(n),c=ie(l,s).plotArea(ct(a,t).canvas(!0));c.xPaddingInner&&(c.xPaddingInner(0),c.xPaddingOuter(0),a.xAlign("right")),c.yPaddingInner&&(c.yPaddingInner(0),c.yPaddingOuter(0),a.yAlign("top"));let u=dt().chart(c).settings(t).xScale(l.scale).yScale(s.scale).canvas(!0),d=Ct().settings(t).canvas(!0).xScale(l.scale).yScale(s.scale).color(o).data(n);e.datum(n).call(u),e.call(i),e.call(d)}Wt.plugin={name:"Heatmap",category:"Hierarchial Chart",max_cells:5e4,max_columns:500,render_warning:!0};var Ut=Wt;function Xt(e,t){return ze(e,t,{excludeEmpty:!0}).map((t=>function(e,t){let n=Re(e),r=n=>t[n<t.length-1?n+1:n][e.mainValues[0].name],o=t.map(((o,a)=>{let i=e.mainValues.length>=1?o[e.mainValues[0].name]:void 0,l=e.mainValues.length>=2?o[e.mainValues[1].name]:r(a);return{crossValue:n(o,a),mainValues:e.mainValues.map((e=>o[e.name])),openValue:i,closeValue:l,highValue:e.mainValues.length>=3?o[e.mainValues[2].name]:Math.max(i,l),lowValue:e.mainValues.length>=4?o[e.mainValues[3].name]:Math.min(i,l),key:t.key,row:o}}));return o.key=t.key,o}(e,t)))}var qt=function(e){return function(t,n){let o=Xt(n,at(n)),a=(0,r.indicatorBollingerBands)().value((e=>e.openValue)),i=o.map((e=>{let t=a(e);return e.map(((e,n)=>Object.assign({bollinger:t[n]},e)))})),l=o.map((e=>e.key)).concat(n.hideKeys?n.hideKeys:[]).sort(),s=Ne().domain(l).settings(n).mapFunction(Me(1))(),c=et().settings(n).scale(l.length>1?s:null),u=function(e,t,n){let o=n.domain(),a=Ne().domain(o).settings(e).defaultColors([e.colorStyles["series-2"]]).mapFunction(Me(.5))(),i=Ne().settings(e).domain(o)(),l=t().crossValue((e=>e.crossValue)).openValue((e=>e.openValue)).highValue((e=>e.highValue)).lowValue((e=>e.lowValue)).closeValue((e=>e.closeValue)).decorate(((e,t)=>{let r=(e=>e.closeValue>=e.openValue)(t)?n(t.key):a(t.key);e.fillStyle=r,e.strokeStyle=r})),s=(0,r.seriesCanvasLine)().mainValue((e=>e.bollinger.average)).crossValue((e=>e.crossValue)).decorate(((e,t)=>{e.strokeStyle=i(t[0].key)})),c=(0,r.seriesCanvasArea)().mainValue((e=>e.bollinger.upper)).baseValue((e=>e.bollinger.lower)).crossValue((e=>e.crossValue)).decorate(((e,t)=>{e.fillStyle=Me(.25)(i(t[0].key))}));return(0,r.seriesCanvasMulti)().series([c,l,s])}(n,e,s),d=(0,r.seriesCanvasMulti)().mapping(((e,t)=>e[t])).series(i.map((()=>u))),g=ut().pad([.1,.1]).padUnit("percent"),_=oe(n).settingName("crossValues").valueName("crossValue")(i),p=oe(n).settingName("mainValues").valueNames(["lowValue","highValue"]).orient("vertical").paddingStrategy(g)(i),h=ie(_,p).plotArea(ct(d,n).orient("vertical").canvas(!0));h.yNice&&h.yNice();let f=dt().chart(h).settings(n).xScale(_.scale).onChange((e=>{let t=i.map((t=>t.filter((t=>t.crossValue>=e.xDomain[0]&&t.crossValue<=e.xDomain[1]))));h.yDomain(p.domainFunction(t))})).canvas(!0),b=Ct().settings(n).xScale(_.scale).yScale(p.scale).yValueName("closeValue").color(s).data(i).canvas(!0);t.datum(i).call(f),t.call(b),t.call(c)}},Zt=qt(r.seriesCanvasOhlc);Zt.plugin={name:"OHLC",category:"Y Chart",max_cells:3500,max_columns:50,render_warning:!0,initial:{type:"number",count:4,names:["Open","Close","High","Low"]},selectMode:"toggle"};var Gt=Zt,Kt=qt(r.seriesCanvasCandlestick);Kt.plugin={name:"Candlestick",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{type:"number",count:4,names:["Open","Close","High","Low"]},selectMode:"toggle"};var Jt=Kt;function Qt(e,t){if(e.realValues.length>1&&null!==e.realValues[1]){let n=e.realValues[1];if("string"===e.mainValues.find((e=>e.name===n))?.type){return Ve(e,t.map((e=>e.data)).filter((e=>e.height>0)).map((e=>en(e))).reduce(((e,t)=>e.concat(t))))}return Bt(e,null,null,(e=>{let t=e=>(t,n)=>void 0===t?n:void 0===n?t:e(t,n);return e.reduce(((e,n)=>[t(Math.min)(e[0],n[0]),t(Math.max)(e[1],n[1])]),[void 0,void 0])})(t.map((e=>e.extents))))}}function en(e,t){return void 0===t&&(t=[]),e.children&&e.children.length>0?e.children.forEach((e=>t.concat(en(e,t)))):e.data.color&&t.push(e.data.color),t}function tn(e){let t={},n=e.realValues.map((t=>null===t?null:e.mainValues.find((e=>e.name===t))));return e.data.forEach(((r,o)=>{let a=r.__ROW_PATH__;(function(e){let t=[];return Object.keys(e).forEach((e=>{if("__ROW_PATH__"!==e){let n=e.split("|").slice(0,-1).join("|");t.includes(n)||t.push(n)}})),t})(r).forEach((i=>{let l;t[i]||(t[i]=[]),l=t[i],a.forEach(((t,s)=>{let c=l.find((e=>e.name===t));if(c||(c={name:t,children:[]},l.push(c)),e.realValues.length>1&&null!==e.realValues[1]){let t=s===a.length-1,n=nn(t?r:e.agg_paths[o][s+1]||r,e.mainValues[1],i);void 0!==n&&(c.color=n)}if(e.realValues.length>2&&null!==e.realValues[2]){c.tooltip=[];for(let t=2;t<e.realValues.length;++t)c.tooltip.push(nn(r,n[t],i))}if(s===a.length-1&&(c.name=a.slice(-1)[0],a.length===e.crossValues.length)){let t=nn(r,e.mainValues[0],i);c.size=t>0?t:0}l=c.children}))}))})),Object.entries(t).map((t=>{let n={name:"root",children:t[1]},r=(0,o.bT9)(n).sum((e=>e.size)),a=(0,o.uKc)().size([2*Math.PI,r.height+1])(r);return a.each((n=>{n.current=n,n.mainValues=1===e.realValues.length||null===e.realValues[1]&&null===e.realValues[2]?n.value:[n.value,n.data.color].concat(n.data.tooltip||[]).filter((e=>void 0!==e)),n.crossValue=n.ancestors().slice(0,-1).reverse().map((e=>e.data.name)),n.key=t[0],n.label=_e(e.crossValues[n.depth-1<0?0:n.depth-1].type,n.data.name)})),{split:t[0],data:a,extents:rn(e,t)}}))}var nn=(e,t,n)=>n.length?e[`${n}|${t.name}`]:e[t.name];function rn(e,t){let[n,r]=t;if(e.realValues.length>1&&null!==e.realValues[1]){return[Math.min(...e.data.map((t=>nn(t,e.mainValues[1],n)))),Math.max(...r.map((e=>e.color)))]}}var on=e=>(0,o.Nb1)().startAngle((e=>e.x0)).endAngle((e=>e.x1)).padAngle((e=>Math.min((e.x1-e.x0)/2,.005))).padRadius(e).innerRadius((t=>Math.max(1,(t.y0-1)*e))).outerRadius((t=>Math.max((t.y0-1)*e,(t.y1-1)*e-1))),an=e=>e.y0>=1&&e.x1>e.x0,ln=e=>e.y1<=3&&e.y0>=1&&(e.y1-e.y0)*(e.x1-e.x0)>.06;function sn(e,t){let n=(e.x0+e.x1)/2*180/Math.PI;return`rotate(${n-90}) translate(${(e.y0-1+(e.y1-1))/2*t},0) rotate(${n<180?0:180})`}function cn(e,t){let n=this.getBBox().width;if(n>t){let r=e.label,a=(0,o.Ys)(this);for(;n>t;)r=r.substring(0,r.length-1),a.text((()=>r)),n=this.getBBox().width;a.text((()=>`${r.substring(0,r.length-3).replace(/\s+$/,"")}...`))}}var un=(e,t,n,r,a,i,l,s,c)=>(u,d)=>{c.sunburstLevel[s]=u.data.name,u.parent?(n.datum(u.parent),n.style("cursor","pointer"),r.html(`&#8682; ${u.label}`)):(n.datum(e),n.style("cursor","default"),r.html("")),e.each((e=>e.target={x0:2*Math.max(0,Math.min(1,(e.x0-u.x0)/(u.x1-u.x0)))*Math.PI,x1:2*Math.max(0,Math.min(1,(e.x1-u.x0)/(u.x1-u.x0)))*Math.PI,y0:Math.max(0,e.y0-u.depth),y1:Math.max(0,e.y1-u.depth)}));let g=t.transition().duration(d?0:750);a.transition(g).tween("data",(e=>{let t=(0,o.sXR)(e.current,e.target);return n=>e.current=t(n)})).filter((function(e){return+this.getAttribute("fill-opacity")||an(e.target)})).attr("fill-opacity",(e=>an(e.target)?1:0)).attr("user-select",(e=>an(e.target)?"initial":"none")).style("pointer-events",(e=>an(e.target)?"initial":"none")).attrTween("d",(e=>()=>on(l)(e.current))),i.filter((function(e){return+this.getAttribute("fill-opacity")||ln(e.target)})).transition(g).attr("fill-opacity",(e=>+ln(e.target))).attrTween("transform",(e=>()=>sn(e.current,l)))};function dn(){let e=null,t=null,n=null,r=null,o=null,a=a=>{let i=a.selectAll("g.segment").data(n.descendants().slice(1)),l=i.enter().append("g").attr("class","segment");l.append("path"),l.append("text").attr("class","segment").attr("dy","0.35em");let s=l.merge(i),c=s.select("path").attr("fill-opacity",(e=>an(e.current)?1:0)).attr("user-select",(e=>an(e.current)?"initial":"none")).style("pointer-events",(e=>an(e.current)?"initial":"none")).attr("d",(e=>on(o)(e.current)));r&&c.style("fill",(e=>r(e.data.color)));let u=s.select("text").attr("fill-opacity",(e=>+ln(e.current))).attr("transform",(e=>sn(e.current,o))).text((e=>e.label)).each((function(e){cn.call(this,e,o)})),d=a.select("text.parent"),g=a.select("circle").attr("r",o).datum(n),_=un(n,a,g,d,c,u,o,t,e);if(e.sunburstLevel){let r=n.descendants().find((n=>n.data.name===e.sunburstLevel[t]));r&&_(r,!0)}else e.sunburstLevel={};g.on("click",(e=>_(e,!1))),c.filter((e=>e.children)).style("cursor","pointer").on("click",(e=>_(e,!1)))};return a.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],a):e},a.split=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],a):t},a.data=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],a):n},a.color=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],a):r},a.radius=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],a):o},a}function gn(){let e="element-prefix-unset",t=null,n=null,r=null,o=null,a=null,i=i=>{let l=se(i,"div.inner-container",(()=>i.append("div").attr("class","inner-container"))),s=l.node().getBoundingClientRect(),c=s.height,u=s.width-0,d=i.datum(),g=Math.max(1,Math.min(d.length,Math.floor(u/300))),_=Math.ceil(d.length/g);a={width:u/Math.max(g,1),height:Math.min(c,Math.max(c/_,u/Math.max(g,1)))},c/_>.75*a.height&&(a.height=c/_),d.length>1?(l.style("grid-template-columns",`repeat(${g}, ${100/g}%)`),l.style("grid-template-rows",`repeat(${_}, ${a.height}px)`)):(l.style("grid-template-columns","repeat(1, 100%)"),l.style("grid-template-rows","repeat(1, 100%)")),r=l.selectAll(`div.${e}-container`).data(d,(e=>e.split)),r.exit().remove(),n=r.enter().append("div").attr("class",`${e}-container`),o=n.append("div").attr("class","title-container").style("text-align","center").attr("display","inline-block").append("text").attr("class","title").style("text-align","left"),t=n.append("svg").append("g").attr("class",e)};return i.elementsPrefix=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],i):e},i.chartContainer=()=>t,i.chartEnter=()=>n,i.chartDiv=()=>r,i.chartTitle=()=>o,i.containerSize=()=>a,i}function _n(e,t){if(0===t.crossValues.length)return void console.warn("Unable to render a chart in the absence of any groups.");let n=tn(t),r=Qt(t,n),a=gn().elementsPrefix("sunburst");if(e.datum(n).call(a),r){let n=t.realValues[1];if("string"===t.mainValues.find((e=>e.name===n))?.type){let n=et().settings(t).scale(r);e.call(n)}else{let t=It().scale(r);e.call(t)}}let i=a.chartContainer(),l=a.chartEnter(),s=a.chartDiv(),c=a.chartTitle(),u=a.containerSize();c.each(((e,t,n)=>(0,o.Ys)(n[t]).text(e.split))),i.append("circle").attr("fill","none").style("pointer-events","all"),i.append("text").attr("class","parent"),l.merge(s).select("svg").select("g.sunburst").attr("transform",`translate(${u.width/2}, ${u.height/2})`).each((function(e){let{split:n,data:a}=e,i=(0,o.Ys)(this),l=this.parentNode,{width:s,height:c}=l.getBoundingClientRect(),u=(Math.min(s,c)-24)/(2*t.crossValues.length);dn().settings(t).split(n).data(a).color(r).radius(u)(i),xe().settings(t)(i.selectAll("g.segment"))}))}_n.plugin={name:"Sunburst",category:"Hierarchial Chart",max_cells:7500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var pn=_n;function hn(e,t){if(e.realValues.length<1||null===e.realValues[1]||void 0===e.realValues[1])return;let n=e.realValues[1],r=t.filter((e=>e.height>0)).map((e=>fn(e))).reduce(((e,t)=>e.concat(t)));if("string"===e.mainValues.find((e=>e.name===n))?.type)return Ve(e,r);return Bt(e,null,null,[Math.min(...r),Math.max(...r)])}function fn(e,t){return void 0===t&&(t=[]),e.children&&e.children.length>0?e.children.forEach((e=>t.concat(fn(e,t)))):e.data.color&&t.push(e.data.color),t}var bn=e=>!(!e.target||!e.target.textAttributes),mn=(e,t,n)=>{e.selectAll("text").each((function(e,r){let o=En(e,t,n);this.style=o}));let r=vn(e);kn(r),yn(r)},yn=e=>{let t=e=>e.getBoundingClientRect(),n=[];e.selectAll("text").filter(((e,t,n)=>(0,o.Ys)(n[t]).attr("style")===Vn.high)).each(((e,t,r)=>n.push(r[t]))),e.selectAll("text").filter(((e,t,n)=>(0,o.Ys)(n[t]).attr("style")===Vn.low)).each(((e,r,a)=>{let i=a[r];n.filter((e=>ue("x",t(e),t(i))&&ue("y",t(e),t(i),-2))).forEach((()=>(0,o.Ys)(i).attr("dy",Number((0,o.Ys)(i).attr("dy"))+14)))}))},wn={top:1,mid:.7,lower:0},vn=e=>e.filter(((e,t,n)=>(0,o.Ys)(n[t]).selectAll("text").attr("style")!==Vn.zero)),xn=e=>e.selectAll("text").each(((e,t,n)=>An(n[t]))),kn=e=>e.selectAll("text").each(((e,t,n)=>Sn(n[t]))),Sn=e=>{let t=(0,o.Ys)(e),n=e.getBoundingClientRect();t.attr("dx",0-n.width/2).attr("dy",0+n.height/4)},An=e=>{let t=e.parentNode.childNodes[0],n=e.getBBox(),r=t.getBBox();Cn(e,r,n)||(0,o.Ys)(e).attr("style",(0,o.Ys)(e).attr("style"))},Cn=(e,t,n)=>{let r=Math.min(t.height/n.height,t.width/n.width);if(r<1){let t=parseInt((0,o.Ys)(e).style("font-size")),n=Math.floor(t*r);return t>7&&n>7?((0,o.Ys)(e).style("font-size",`${n}px`),Sn(e)):((0,o.Ys)(e).style("font-size",null),(0,o.Ys)(e).style("opacity","0")),!0}return!1},En=(e,t,n)=>{if(!n.filter((e=>""!==e)).every((t=>e.crossValue.includes(t))))return Vn.zero;switch(e.depth){case t+1:return Vn.high;case t+2:return Vn.low;default:return Vn.zero}},Vn={high:"font-size:14px;z-index:5;pointer-events: none;",low:"font-size:8px;opacity:0.7;z-index:4;",zero:"font-size:0px;opacity:0;z-index:4;"},Pn=(e,t)=>{let n=(0,o.pNI)().size([e,t]).paddingInner((e=>1+2*(e.height-1)));return n.tile(o.wLP),n};function Nn(e,t,n,r,a,i){(function(e,t,n,r,o){let a={x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0},i={width:o.x1-o.x0,height:o.y1-o.y0},l={width:i.width/a.width,height:i.height/a.height};n.each((e=>{let n=(e.x0-a.x)*l.width,o=(e.y0-a.y)*l.height,i=In(e)*l.width,s=Fn(e)*l.height,c=((e,t)=>t.every((t=>e.crossValue.includes(t))))(e,t)&&e.data.name!==t[r-1];e.mapLevel[r]={x0:n,x1:i+n,y0:o,y1:s+o,visible:c,opacity:c?1:0}})),e.mapLevel[r].levelRoot=!0})(e,t,n,r,a),e.mapLevel[r].levelRoot=!0,function(e,t,n,r){let a=Pn(t,n)((0,o.bT9)(e.data).sum((e=>e.size))).descendants(),i=e.descendants();a.forEach(((e,t)=>{i[t].mapLevel[r].x0=a[t].x0,i[t].mapLevel[r].x1=a[t].x1,i[t].mapLevel[r].y0=a[t].y0,i[t].mapLevel[r].y1=a[t].y1}))}(e,i.node().getBoundingClientRect().width,i.node().getBoundingClientRect().height,r),Tn(n,r)}var Ln=(e,t)=>{e.each(((e,n,r)=>{let a=(0,o.Ys)(r[n]).selectAll("text");e.mapLevel[t].textAttributes={dx:a.attr("dx"),dy:a.attr("dy"),class:a.attr("class"),"font-size":a.style("font-size")}}))};function Tn(e,t){e.selectAll("text").each(((e,n,r)=>{let a=(0,o.Ys)(r[n]),i=(0,o.Ys)(r[n]).datum(),l=a.attr("class");i.mapLevel[t].textLockedAt={opacity:wn[l]}}))}function Mn(e,t,n,r,o,a,i,l,s,c){if(!e.children)return;o.treemapLevel<e.depth?o.treemapRoute.push(e.crossValue):o.treemapRoute.pop(),o.treemapLevel=e.depth;let u=e.crossValue;(!e.mapLevel[o.treemapLevel]||!e.mapLevel[o.treemapLevel].levelRoot)&&Nn(e,u,n,o.treemapLevel,l,a),On(e,t,n,r,o,a,i,l,o.treemapLevel,u,s,c)}function On(e,t,n,r,a,i,l,s,c,u,d,g,_,p){void 0===_&&(_=500),void 0===p&&(p=!0);let h=e.parent,f=l.transition("main transition").duration(_).ease(o.oSY);n.each((e=>e.target=e.mapLevel[c])),bn(e)||Dn(n,d),n.transition(f).tween("data",(e=>{let t=(0,o.sXR)(e.current,e.target);return n=>e.current=t(n)})).styleTween("opacity",(e=>()=>e.current.opacity)).attrTween("pointer-events",(e=>()=>e.target.visible?"all":"none")),t.transition(f).filter((e=>e.target.visible)).styleTween("x",(e=>()=>`${e.current.x0}px`)).styleTween("y",(e=>()=>`${e.current.y0}px`)).styleTween("width",(e=>()=>e.current.x1-e.current.x0+"px")).styleTween("height",(e=>()=>e.current.y1-e.current.y0+"px")),r.transition(f).filter((e=>e.target.visible)).attrTween("x",(e=>()=>e.current.x0+In(e.current)/2)).attrTween("y",(e=>()=>e.current.y0+Fn(e.current)/2)).end().catch((()=>Yn(n))).then((()=>{bn(e)||(yn(b),xn(b),async function(e,t,n){void 0===n&&(n=400);let r=t.transition("text fade transition").duration(n).ease(o.oSY);await e.transition(r).filter((e=>e.target.visible)).tween("data",((e,t,n)=>{let r=n[t],a=(0,o.sXR)(Rn(e),zn(r));return t=>e.current.opacity=a(t)})).styleTween("opacity",(e=>()=>e.current.opacity)).end().catch((e=>console.error("Exception in text fade transition",e))).then((()=>e.each(((e,t,n)=>(e=>(0,o.Ys)(e).style("opacity",null))(n[t])))))}(r,l,_),p&&Ln(n,c),Yn(n,d,h))})).catch((e=>{console.error("Exception completing promises after main transition",e),Yn(n,d,h)})),bn(e)?(e=>{e.each(((e,t,n)=>{(0,o.Ys)(n[t]).selectAll("text").attr("dx",e.target.textAttributes.dx).attr("dy",e.target.textAttributes.dy).attr("style",e.target.textAttributes.style)}))})(n):(r.each(((e,t,n)=>(e=>(0,o.Ys)(e).style("opacity",wn[(0,o.Ys)(e).attr("class")]))(n[t]))),mn(n,c,u));let b=vn(n);h?d.hide(!1).text(e.label).onClick((()=>{Mn(h,t,n,r,a,i,l,s,d,g);let e=i.node().getRootNode().host.parentElement;ve(e,h,g)}))():d.hide(!0)()}var Rn=e=>e.target.textLockedAt.opacity,zn=e=>wn[(0,o.Ys)(e).attr("class")],Dn=(e,t)=>{t.deactivate(!0),e.each(((e,t,n)=>{(0,o.Ys)(n[t]).selectAll("rect").style("pointer-events","none")}))},Yn=(e,t)=>{t&&t.deactivate(!1),e.each(((e,t,n)=>{(0,o.Ys)(n[t]).selectAll("rect").style("pointer-events",null)}))};var Bn="leafnode",$n="branchnode",jn="rootnode",In=e=>e.x1-e.x0,Fn=e=>e.y1-e.y0,Hn=(e,t)=>0===t.depth?jn:((e,t)=>t.depth===e)(e,t)?Bn:$n;function Wn(){let e=null,t=null,n=null,r=null,o=null,a=null,i=i=>{a=function(e){let t=null,n=null,r=!0,o=!1,a=se(e,".parent-controls",(()=>e.append("div").attr("class","parent-controls").style("display",r?"none":"").html('<button id="goto-parent">Goto parent</button>\n'))),i=()=>{a.style("display",r?"none":"").select("#goto-parent").style("pointer-events",o?"none":null).html(`\u21ea ${n}`).on("click",(()=>t()))};return i.deactivate=function(){if(!arguments.length)return o;o=arguments.length<=0?void 0:arguments[0];let e=a.select("#goto-parent");return o?e.style("pointer-events","none"):e.style("pointer-events",null),i},i.hide=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.text=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.onClick=function(){return arguments.length?(t=arguments.length<=0?void 0:arguments[0],i):t},i}(o),a();let l=n.height;e.treemapLevel||(e.treemapLevel=0),e.treemapRoute||(e.treemapRoute=[]),Pn(o.node().getBoundingClientRect().width,o.node().getBoundingClientRect().height)(n);let s=i.selectAll("g").data(n.descendants()),c=s.enter().append("g");c.append("rect"),c.append("text");let u=c.merge(s).sort(((e,t)=>t.depth-e.depth)),d=u.select("rect").attr("class",(e=>`treerect ${Hn(l,e)}`)).style("x",(e=>e.x0)).style("y",(e=>e.y0)).style("width",(e=>In(e))).style("height",(e=>Fn(e)));d.style("fill",(e=>Hn(l,e)===Bn?e.data.color?r(e.data.color):t.colorStyles.series:"transparent"));let g=u.filter((e=>0!==e.value)).select("text").attr("x",(e=>e.x0+In(e)/2)).attr("y",(e=>e.y0+Fn(e)/2)).text((e=>e.label)),_=d.filter((e=>0===e.crossValue.length)).datum();(function(e,t){e.each((e=>{e.mapLevel=[],e.mapLevel[0]={x0:e.x0,x1:In(e)+e.x0,y0:e.y0,y1:Fn(e)+e.y0,visible:!0,opacity:1}})),t.mapLevel[0].levelRoot=!0,Tn(e,0)})(u,_),mn(u,0,[]),xn(vn(u)),Ln(u,0),0===e.treemapRoute.length&&e.treemapRoute.push(_.crossValue),d.filter((e=>e.children)).on("click",((n,r)=>Mn(r,d,u,g,e,o,i,_,a,t))),function(e,t,n,r,o,a,i,l,s){if(r.treemapLevel>0){let c=i.crossValue;On(i,e,t,n,r,o,a,i,0,c,l,s,1,!1),r.treemapRoute.slice(1,r.treemapRoute.length).forEach((c=>{let u=t.filter((e=>e.crossValue===c)).datum(),d=u.crossValue;Nn(u,d,t,u.depth,i,o),On(u,e,t,n,r,o,a,i,u.depth,d,l,s,1,!1)}))}}(d,u,g,e,o,i,_,a,t)};return i.settings=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],i):e},i.data=function(){return arguments.length?(n=arguments.length<=0?void 0:arguments[0],i):n},i.color=function(){return arguments.length?(r=arguments.length<=0?void 0:arguments[0],i):r},i.container=function(){return arguments.length?(o=arguments.length<=0?void 0:arguments[0],i):o},i}function Un(e,t){if(0===t.crossValues.length)return void console.warn("Unable to render a chart in the absence of any groups.");t.treemaps||(t.treemaps={});let n=tn(t),r=hn(t,n.map((e=>e.data)));r&&this._container.classList.add("has-legend");let a=gn().elementsPrefix("treemap");if(e.datum(n).call(a),r){let n=t.realValues[1];if("string"===t.mainValues.find((e=>e.name===n))?.type){let n=et().settings(t).scale(r);e.call(n)}else{let t=It().scale(r);e.call(t)}}let i=a.chartEnter(),l=a.chartDiv();a.chartTitle().each(((e,t,n)=>(0,o.Ys)(n[t]).text(e.split))),i.merge(l).select("svg").select("g.treemap").each((function(e){let{split:n,data:a}=e,i=(0,o.Ys)(this);t.treemaps[n]||(t.treemaps[n]={}),Wn().settings(t.treemaps[n],t).data(a).container((0,o.Ys)((0,o.Ys)(this.parentNode).node().parentNode)).color(r)(i),xe().settings(t).centered(!0)(i.selectAll("g"))}))}Un.plugin={type:"Treemap",name:"Treemap",category:"Hierarchial Chart",max_cells:5e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var Xn=[_t,xt,Vt,Mt,Rt,Dt,Ht,Gt,Jt,Un,pn,Ut],qn=(e,t)=>{if(!t.colorStyles){let n={scheme:[],gradient:{},interpolator:{},grid:{}},r=Kn(e);n.series=r("--d3fc-local-series");for(let e=1;;e++){let t=`series-${e}`,o=r(`--d3fc-local-${t}`);if(!o)break;n[t]=o,n.scheme.push(o)}n.opacity=Zn(n.series),n.grid.gridLineColor=r`--d3fc-gridline--color`,["full","positive","negative"].forEach((e=>{let t=r(`--d3fc-local-${e}--gradient`);n.gradient[e]=Jn(t,n.opacity)})),t.colorStyles=n}if(!t.textStyles){let n=window.getComputedStyle(e),r=n.getPropertyValue("color"),o=`12px ${n.getPropertyValue("font-family")}`;t.textStyles={color:r,font:o}}},Zn=e=>(0,o.$_Y)(e).opacity,Gn=(e,t)=>{let n=(0,o.$_Y)(`#${e}`);return n.opacity=t,n+""},Kn=e=>{let t=getComputedStyle(e);return e=>t?.getPropertyValue(e)},Jn=(e,t)=>{let n=(0,s.Q)(e)[0].colorStops;return n.map(((e,r)=>[e.length?e.length.value/100:r/(n.length-1),Gn(e.value,t)])).sort(((e,t)=>e[0]-t[0]))},Qn={initial:{type:"number",count:1},selectMode:"select"},er=`:host .chart{--d3fc-local-full--gradient: var(--d3fc-full--gradient, linear-gradient(#4d342f 0%, #e4521b 22.5%, #feeb65 42.5%, #f0f0f0 50%, #dcedc8 57.5%, #42b3d5 67.5%, #1a237e 100%));--d3fc-local-positive--gradient: var(--d3fc-positive--gradient, linear-gradient(#dcedc8 0%, #42b3d5 35%, #1a237e 100%));--d3fc-local-negative--gradient: var(--d3fc-negative--gradient, linear-gradient(#feeb65 100%, #e4521b 70%, #4d342f 0%))}:host .chart{--d3fc-local-series: var(--d3fc-series, rgba(31, 119, 180, .5));--d3fc-local-series-1: var(--d3fc-series-1, #0366d6);--d3fc-local-series-2: var(--d3fc-series-2, #ff7f0e);--d3fc-local-series-3: var(--d3fc-series-3, #2ca02c);--d3fc-local-series-4: var(--d3fc-series-4, #d62728);--d3fc-local-series-5: var(--d3fc-series-5, #9467bd);--d3fc-local-series-6: var(--d3fc-series-6, #8c564b);--d3fc-local-series-7: var(--d3fc-series-7, #e377c2);--d3fc-local-series-8: var(--d3fc-series-8, #7f7f7f);--d3fc-local-series-9: var(--d3fc-series-9, #bcbd22);--d3fc-local-series-10: var(--d3fc-series-10, #17becf)}:host .chart .series{fill:var(--d3fc-local-series)}:host .chart .series-1{fill:var(--d3fc-local-series-1)}:host .chart .series-2{fill:var(--d3fc-local-series-2)}:host .chart .series-3{fill:var(--d3fc-local-series-3)}:host .chart .series-4{fill:var(--d3fc-local-series-4)}:host .chart .series-5{fill:var(--d3fc-local-series-5)}:host .chart .series-6{fill:var(--d3fc-local-series-6)}:host .chart .series-7{fill:var(--d3fc-local-series-7)}:host .chart .series-8{fill:var(--d3fc-local-series-8)}:host .chart .series-9{fill:var(--d3fc-local-series-9)}:host .chart .series-10{fill:var(--d3fc-local-series-10)}:host{user-select:none}:host .chart{position:absolute;box-sizing:border-box;left:0;top:0;width:100%;height:100%;padding:15px;overflow:hidden}:host .chart.heatmap d3fc-group.cartesian-chart,:host .chart.treemap d3fc-group.cartesian-chart{grid-template-columns:minmax(0em,max-content) auto 1fr auto minmax(0em,max-content);grid-template-rows:minmax(0em,max-content) auto 1fr auto minmax(0em,max-content)}:host .chart .chart-label{display:none}:host .chart.heatmap{padding-right:120px}:host .chart.sunburst{padding:0;font-size:14px}:host .chart.sunburst .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto}:host .chart.sunburst .inner-container div{overflow:hidden}:host .chart.sunburst .inner-container .sunburst-container:not(:only-child) svg{transform:translateY(-27px)}:host .chart.sunburst .inner-container svg{width:100%;height:100%}:host .chart.sunburst .inner-container path{fill:var(--d3fc-series, rgba(31, 119, 180, .5))}:host .chart.sunburst .inner-container text.segment,:host .chart.sunburst .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels, #333333)}:host .chart.sunburst .inner-container div.title-container{margin-top:5px}:host .chart.has-legend{padding-right:120px}:host .chart.treemap .treemap-container{position:relative}:host .chart.treemap .treemap-container:not(:only-child){width:calc(100% - 12px);height:calc(100% - 12px)}:host .chart.treemap .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto}:host .chart.treemap .inner-container div{overflow:hidden}:host .chart.treemap .inner-container svg{width:100%;height:100%}:host .chart.treemap .inner-container .treerect{stroke:var(--d3fc-treedata-axis--lines, var(--d3fc-axis--lines, white));fill:var(--d3fc-series, rgba(31, 119, 180, .5))}:host .chart.treemap .inner-container .treerect:hover{cursor:pointer;stroke:var(--d3fc-treedata--hover-highlight, black);stroke-opacity:1}:host .chart.treemap .inner-container .rootnode{opacity:0;pointer-events:none;z-index:0}:host .chart.treemap .inner-container .branchnode{opacity:0}:host .chart.treemap .inner-container .branchnode:hover{fill-opacity:.1;opacity:1;fill:var(--d3fc-treedata--hover-highlight, black)}:host .chart.treemap .inner-container .leafnode{fill-opacity:.8}:host .chart.treemap .inner-container .leafnode:hover{fill-opacity:.5}:host .chart.treemap .inner-container #hidden{opacity:0;pointer-events:none;z-index:0}:host .chart.treemap .inner-container .top{font-size:14px;z-index:5;pointer-events:none}:host .chart.treemap .inner-container .mid{font-size:8px;opacity:.7;z-index:4}:host .chart.treemap .inner-container .lower{font-size:0px;opacity:0;z-index:4}:host .chart.treemap .inner-container text{fill:var(--d3fc-treedata--labels, #333333)}:host .chart.treemap .inner-container text.title{dominant-baseline:hanging}:host .chart.treemap .inner-container .parent-controls{position:absolute;top:15px;right:auto;left:30px;width:auto;z-index:4;transition:box-shadow 1s}:host .chart.treemap .inner-container .parent-controls:hover{box-shadow:2px 2px 6px #000;transition:box-shadow .2s}:host .chart .x-label{height:1.2em!important;line-height:1em!important}:host .chart .x-label,:host .chart .y-label{color:var(--d3fc-label--color, inherit);font-size:14px}:host .chart d3fc-canvas.plot-area{display:none}:host .chart.xyscatter d3fc-canvas.plot-area,:host .chart.xyline d3fc-canvas.plot-area,:host .chart.ohlc d3fc-canvas.plot-area,:host .chart.candlestick d3fc-canvas.plot-area,:host .chart.heatmap d3fc-canvas.plot-area{display:block}:host .chart .y-axis text,:host .chart .x-axis text{fill:var(--d3fc-axis-ticks--color, #505050);font-size:11px}:host .chart .y-axis path,:host .chart .x-axis path{stroke:var(--d3fc-axis--lines, #b4d2e1)}:host .chart .splitter-label{display:inline-block;margin:0 10px;cursor:pointer}:host .chart .splitter-label:after{margin-left:5px;color:var(--d3fc-axis--lines, #b4d2e1)}:host .chart .splitter-label:hover:after{color:var(--d3fc-axis-ticks--color, #505050)}:host .chart .splitter-label.disabled{cursor:default}:host .chart .splitter-label.disabled:after{color:#5050504d}:host .chart .y-label.left-label .splitter-label:after{font-family:var(--d3fc-y1-label--font-family, var(--button--font-family, inherit));content:var(--d3fc-y1-label--content, "\\1f847")}:host .chart .y-label.right-label .splitter-label:after{font-family:var(--d3fc-y2-label--font-family, var(--button--font-family, inherit));content:var(--d3fc-y2-label--content, "\\1f845")}:host .chart.ybar .y-axis path,:host .chart.yline .y-axis path,:host .chart.xyline .y-axis path,:host .chart.xyline .x-axis path,:host .chart.yarea .y-axis path,:host .chart.yscatter .y-axis path,:host .chart.xyscatter .y-axis path,:host .chart.xyscatter .x-axis path,:host .chart.xbar .x-axis path{visibility:hidden}:host .chart .y-label{white-space:nowrap}:host .chart .nearbyTip{fill:var(--d3fc-series, rgba(31, 119, 180, .5))}:host #dragHandles{position:absolute;top:0px;right:0px;left:auto;pointer-events:none}:host #dragHandles rect{pointer-events:all}:host .label rect{fill:none}:host .legend-container{position:absolute;top:15px;right:15px;left:auto;width:150px;height:280px}:host .legend-container.legend-color{width:90px;height:150px}:host .legend-container[borderbox-on-hover=true]{transition:box-shadow 1s}:host .legend-container[borderbox-on-hover=true]:hover{background-color:var(--d3fc-legend--background, #ffffff);box-shadow:0 2px 4px #0000001a;transition:box-shadow .2s,background-color .2s}:host .legend-container .legend{font-size:8pt;width:100%}:host .legend-container .legend .cell{cursor:pointer}:host .legend-container .legend .cell path{fill:var(--d3fc-series, rgba(31, 119, 180, .5));stroke:var(--d3fc-series, #1f77b4)}:host .legend-container .legend .cell.hidden path{fill:#cccccc80;stroke:#ccc}:host .legend-container .legend .cell.hidden circle{fill:#ccc!important}:host .legend-container text{fill:var(--d3fc-legend--text, #333333)}:host .legend-container .label:hover{fill:#22a0ce}:host .legend-container #legend-axis path{stroke:var(--d3fc-legend--text, #333333)}:host .legend-container .legend-controls{margin-left:12px}:host .legend-container .legend-controls #up-arrow,:host .legend-container .legend-controls #down-arrow{cursor:pointer;color:#1f77b4}:host .legend-container .legend-controls #up-arrow.disabled,:host .legend-container .legend-controls #down-arrow.disabled{cursor:default;color:#333}:host .heatmap .legend-container.legend-color{height:200px}:host .treemap .legend-container.legend-color{height:200px}:host .treemap .legend-container:not(.legend-color){width:100px}:host .zoom-controls{position:absolute;top:10px;left:0;width:100%;text-align:center}:host .zoom-controls button{-webkit-appearance:none;background:var(--plugin--background, #f7f7f7);border:1px solid var(--inactive--color, #cccccc);color:var(--d3fc-label--color, inherit);font-size:12px;padding:8px;opacity:.5;cursor:pointer}:host .zoom-controls button:hover{opacity:1}:host .parent-controls{position:absolute;top:30px;right:145px;width:100%;text-align:right}:host .parent-controls button{-webkit-appearance:none;background:#f7f7f7;border:1px solid #cccccc;padding:10px;opacity:.5;cursor:pointer}:host .parent-controls button:hover{background:#e6e6e6}:host div.tooltip{position:absolute;text-align:left;font-size:12px;font-weight:300;white-space:nowrap;padding:.5em;background:var(--d3fc-tooltip--background, #ffffff);color:var(--d3fc-tooltip--color, black);border:1px solid var(--d3fc-tooltip--border-color, #777777);box-shadow:var(--d3fc-tooltip--box-shadow, none);pointer-events:none}:host div.tooltip ul{margin:0;padding:0;list-style-type:none}\n${function(){let e=document.querySelector("head").querySelectorAll("style"),t=[];return e.forEach((e=>{-1!==e.innerText.indexOf("d3fc-")&&t.push(e.innerText)})),t.join("")}()}`,tr=["crossValues","mainValues","realValues","splitValues","filter","data","size","colorStyles","textStyles","agg_paths","treemaps"];function nr(e){customElements.get("perspective-viewer").registerPlugin(e)}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=new Set(t.length>0?t:Xn.map((e=>e.plugin.name))),Xn.forEach((e=>{if(t.has(e.plugin.name)){let t=e.plugin.name.toLowerCase().replace(/[ \t\r\n\/]*/g,""),n=`perspective-viewer-d3fc-${t}`;customElements.define(n,class extends HTMLElement{constructor(){super(),this._chart=null,this._settings=null,this.render_warning=!0}connectedCallback(){this._initialized||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`<style>${er}</style>`,this.shadowRoot.innerHTML+='<div id="container" class="chart"></div>',this._container=this.shadowRoot.querySelector(".chart"),this._initialized=!0)}get name(){return e.plugin.name}get category(){return e.plugin.category}get select_mode(){return e.plugin.selectMode||"select"}get min_config_columns(){return e.plugin.initial?.count||Qn.initial.count}get config_column_names(){return e.plugin.initial?.names||Qn.initial.names}get max_cells(){return e.plugin.max_cells||4e3}set max_cells(t){e.plugin.max_cells=t}get max_columns(){return e.plugin.max_columns||50}set max_columns(t){e.plugin.max_columns=t}async render(){var e=document.createElement("canvas"),t=this.shadowRoot.querySelector("#container");e.width=t.offsetWidth,e.height=t.offsetHeight;let n=e.getContext("2d");n.fillStyle=window.getComputedStyle(this).getPropertyValue("--plugin--background")||"white",n.fillRect(0,0,e.width,e.height);let r=window.getComputedStyle(this).getPropertyValue("color"),o=Array.from(this.shadowRoot.querySelectorAll("svg:not(#dragHandles)"));for(let s of o.reverse()){var a=document.createElement("img");a.width=s.parentNode.offsetWidth,a.height=s.parentNode.offsetHeight;let e=s.cloneNode(!0);e.hasAttribute("viewBox")||e.setAttribute("viewBox",`0 0 ${a.width} ${a.height}`),e.setAttribute("xmlns","http://www.w3.org/2000/svg");for(let n of e.querySelectorAll("text"))n.setAttribute("fill",r);var i=(new XMLSerializer).serializeToString(e);i=i.replace(/[^\x00-\x7F]/g,"");let t=new Promise(((e,t)=>{a.onload=e,a.onerror=t}));try{a.src=`data:image/svg+xml;base64,${btoa(i)}`,await t}catch{let e=new Promise(((e,t)=>{a.onload=e,a.onerror=t}));a.src=`data:image/svg+xml;utf8,${i}`,await e}n.drawImage(a,s.parentNode.offsetLeft,s.parentNode.offsetTop,a.width,a.height)}let l=Array.from(this.shadowRoot.querySelectorAll("canvas"));for(let s of l.reverse())n.drawImage(s,s.parentNode.offsetLeft,s.parentNode.offsetTop,s.width/window.devicePixelRatio,s.height/window.devicePixelRatio);return await new Promise((t=>e.toBlob((e=>t(e)))),"image/png")}async draw(e,t,n){null!==this.offsetParent?(this._staged_view=void 0,this.config=await this.parentElement.save(),await this.update(e,t,n,!0)):this._staged_view=[e,t,n]}async update(t,n,r,o){if(void 0===o&&(o=!1),null===this.offsetParent)return;let a,i,l=this.parentElement,s=this.config.columns,c="Sunburst"!==e.plugin.name;a=n&&r?t.to_json({end_row:r,end_col:n,leaves_only:c}):n?t.to_json({end_col:n,leaves_only:c}):r?t.to_json({end_row:r,leaves_only:c}):t.to_json({leaves_only:c}),i=await Promise.all([l.getTable().then((e=>e.schema(!1))),t.expression_schema(!1),t.schema(!1),a,t.get_config()]);let[u,d,g,_,p]=i,h=function(e){let t=u[e];return t||(t=d[e]),t},{columns:f,group_by:b,split_by:m,filter:y}=p,w=b.length>0?_.reduce(((e,t)=>{if(t.__ROW_PATH__&&t.__ROW_PATH__.length==b.length)e.agg_paths.push(e.aggs.slice()),e.rows.push(t);else{let n=t.__ROW_PATH__.filter((e=>void 0!==e)).length;e.aggs[n]=t,e.aggs=e.aggs.slice(0,n+1)}return e}),{rows:[],aggs:[],agg_paths:[]}):{rows:_},v=w.rows.map(((e,t)=>b.length?e:{...e,__ROW_PATH__:[t]})),x={realValues:s,crossValues:b.map((e=>({name:e,type:h(e)}))),mainValues:f.map((e=>({name:e,type:g[e]}))),splitValues:m.map((e=>({name:e,type:h(e)}))),filter:y,data:v,agg_paths:w.agg_paths};this._chart=e;let k={set:(e,t,n)=>(tr.includes(t)||this._container&&this._container.dispatchEvent(new Event("perspective-plugin-update",{bubbles:!0,composed:!0})),e[t]=n,!0)};this._settings=new Proxy({...this._settings,...x},k),this._settings.splitMainValues&&this._settings.splitMainValues.length>=f.length&&(this._settings.splitMainValues=[]),qn(this._container,this._settings),o&&(this._container.innerHTML=""),this._draw(),await new Promise((e=>requestAnimationFrame(e)))}async clear(){this._container&&(this._container.innerHTML="")}_draw(){if(null!==this.offsetParent){let e=(0,o.Ys)(this._container),n=`chart ${t}`;this._settings.size=this._container.getBoundingClientRect(),this._settings.data.length>0?this._chart(e.attr("class",n),this._settings):e.attr("class",`${n} disabled`)}}async resize(e){if(null!==this.offsetParent)if(void 0!==this._settings?.data)this._draw();else{let[e,t,n]=this._staged_view;this._staged_view=void 0,this.draw(e,t,n)}}async restyle(){let e=this._settings;e&&(delete e.colorStyles,delete e.textStyles,await this.draw(...arguments))}async delete(){this._container.innerHTML=""}getContainer(){return this._container}save(){let e={...this._settings};return tr.forEach((t=>{delete e[t]})),e}restore(e){let t={};for(let n of tr)t[n]=this._settings?.[n];this._settings={...t,...e},this._draw()}}),customElements.whenDefined("perspective-viewer").then((()=>nr(n)))}}))}()},4469:function(e,t,n){"use strict";n(2219);var r=n(6558),o=n.n(r),a=n(8058);function i(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}function l(e){let t=e._view_cache.config.row_pivots.length-1,n=Array.from(e.children[0].children[0].children);if(n.length>0){let[r]=n.splice(n.length-1,1);for(let n of r?.children){let r=e.getMeta(n),o=r.column_header?.[r.column_header?.length-1],a=this._config.sort.find((e=>e[0]===o)),l=r.row_header_x===t,s=void 0===r.x;l=l||(r.x+1)%this._config.columns.length==0,n.classList.toggle("psp-header-border",l),n.classList.toggle("psp-header-group",!1),n.classList.toggle("psp-header-leaf",!0),n.classList.toggle("psp-is-top",!1),n.classList.toggle("psp-header-corner",s),n.classList.toggle("psp-header-sort-asc",!!a&&"asc"===a[1]),n.classList.toggle("psp-header-sort-desc",!!a&&"desc"===a[1]),n.classList.toggle("psp-header-sort-col-asc",!!a&&"col asc"===a[1]),n.classList.toggle("psp-header-sort-col-desc",!!a&&"col desc"===a[1]);let c=i.call(this,r),u="integer"===c||"float"===c,d="string"===c,g="date"===c,_="datetime"===c;n.classList.toggle("psp-align-right",u),n.classList.toggle("psp-align-left",!u),n.classList.toggle("psp-menu-open",this._open_column_styles_menu[0]===r._virtual_x),n.classList.toggle("psp-menu-enabled",(d||u||g||_)&&!s),n.classList.toggle("psp-is-width-override",void 0!==e._column_sizes?.override[r.size_key])}}}function s(e){let t=e._view_cache.config.row_pivots.length-1,n=Array.from(e.children[0].children[0].children),r=[],o=new Set,a=e.children[0];for(let i=0;i<n.length;i++){let n=a.rows[i],l=new Set;for(let a=0;a<n.cells.length;a++){let s=n.cells[a];s.style.backgroundColor="";let c=e.getMeta(s),u=c.row_header_x===t||c.x>=0;s.classList.toggle("psp-align-right",!1),s.classList.toggle("psp-align-left",!1),s.classList.toggle("psp-header-group",!0),s.classList.toggle("psp-header-leaf",!1),s.classList.toggle("psp-header-border",u),s.classList.toggle("psp-header-group-corner",void 0===c.x),s.classList.toggle("psp-color-mode-bar",!1),s.classList.toggle("psp-header-sort-asc",!1),s.classList.toggle("psp-header-sort-desc",!1),s.classList.toggle("psp-header-sort-col-asc",!1),s.classList.toggle("psp-header-sort-col-desc",!1);let d,g,_=n.cells[a],p=a;for(;r[i]&&r[i][p];++p);for(l.add(p),d=p;d<p+_.colSpan;++d)for(g=i;g<i+_.rowSpan;++g)r[g]||(r[g]=[]),r[g][d]=!0;_.classList.toggle("psp-is-top",0===i||!o.has(d))}o=l}}var c=Symbol("Plugin Symbol");function u(e,t,n,r){let[,,,,,o,a]=n,[,,,,,i,l]=r,s=this._ids?.[e.dy]?.join("|"),c=e.column_header.join("|");if(this.last_reverse_columns?.has(c)&&this.last_reverse_ids?.has(s)){let n=this.last_reverse_ids?.get(s),r=this.last_reverse_columns.get(c);this._is_old_viewport?this.last_meta?.[r]?.[n]>e.user?(t.style.setProperty("--pulse--background-color-start",i),t.style.setProperty("--pulse--background-color-end",l),"pulse_neg"===t.style.animationName?t.style.animation="pulse_neg2 0.5s linear":t.style.animation="pulse_neg 0.5s linear"):this.last_meta?.[r]?.[n]<e.user?(t.style.setProperty("--pulse--background-color-start",o),t.style.setProperty("--pulse--background-color-end",a),"pulse_pos"===t.style.animationName?t.style.animation="pulse_pos2 0.5s linear":t.style.animation="pulse_pos 0.5s linear"):n!==e.dy&&(t.style.animation=""):t.style.animation=""}else t.style.animation=""}function d(e,t){return o().mix(e,`rgb(${t[0]},${t[1]},${t[2]})`,.5).hex()}function g(e,t){let[n,r,o,a]=e;function i(e,n){return 255*((1-a)*(t[e]/255)+a*(n/255))}return void 0===t&&(t=[255,255,255]),[i(0,n),i(1,r),i(2,o)]}function _(e){let[t,n,r]=e;return Math.sqrt(t*t*.299+n*n*.587+r*r*.114)>130?"#161616":"#ffffff"}function p(e){let t=o()(e),n=function(e){let[t,n,r]=e.rgb(),[o,a,i]=e.set("hsl.h",(e.get("hsl.h")-15)%360).rgb(),[l,s,c]=e.set("hsl.h",(e.get("hsl.h")+15)%360).rgb();return`linear-gradient(to right top,rgb(${o},${a},${i}),rgb(${t},${n},${r}) 50%,rgb(${l},${s},${c}))`}(t),r=t.rgb();return[e,...r,n,`rgba(${r[0]},${r[1]},${r[2]},1)`,`rgba(${r[0]},${r[1]},${r[2]},0)`]}function h(e,t,n){let r,o,a=n.user>0,i=n.user<0;r=void 0!==e?.pos_bg_color?e.pos_bg_color:this._pos_bg_color,o=void 0!==e?.neg_bg_color?e.neg_bg_color:this._neg_bg_color;let l=a?r:i?o:["",...this._plugin_background,""];{let[a,i,s,c,d]=l;if(t.style.position="","color"===e?.number_bg_mode)t.style.animation="",t.style.backgroundColor=a;else if("gradient"===e?.number_bg_mode){let r=Math.max(0,Math.min(1,Math.abs(n.user/e.bg_gradient))),o=_(g([i,s,c,r],this._plugin_background));t.style.animation="",t.style.color=o,t.style.backgroundColor=`rgba(${i},${s},${c},${r})`}else"pulse"===e?.number_bg_mode?(u.call(this,n,t,r,o),t.style.backgroundColor=""):("disabled"===e?.number_bg_mode||e?.number_bg_mode,t.style.animation="",t.style.backgroundColor="")}let[s,c,d,p,h]=(()=>void 0!==e?.pos_fg_color?a?e.pos_fg_color:i?e.neg_fg_color:["",...this._plugin_background,""]:a?this._pos_fg_color:i?this._neg_fg_color:["",...this._plugin_background,""])();if("disabled"===e?.number_fg_mode)if("color"===e?.number_bg_mode){let e=this._plugin_background,n=_(g([l[1],l[2],l[3],1],e));t.style.color=n}else"gradient"===e?.number_bg_mode||(t.style.color="");else"bar"===e?.number_fg_mode?(t.style.color="",t.style.position="relative",""!==h&&t.children.length>0&&t.children[0].nodeType===Node.ELEMENT_NODE&&(t.children[0].style.background=h)):("color"===e?.number_fg_mode||!e?.number_fg_mode)&&(t.style.color=s)}function f(e,t,n){let r=n.column_header?.[n.column_header?.length-1],[a,i,l,s,c]=(()=>void 0!==e?.color?e.color:this._color)();if("foreground"===e?.string_color_mode&&null!==n.user)t.style.color=a,t.style.backgroundColor="","link"===e?.format&&(t.children[0].style.color=a);else if("background"===e?.string_color_mode&&null!==n.user){let e=_(g([i,l,s,1],this._plugin_background));t.style.color=e,t.style.backgroundColor=a}else if("series"===e?.string_color_mode&&null!==n.user){this._series_color_map.has(r)||(this._series_color_map.set(r,new Map),this._series_color_seed.set(r,0));let e=this._series_color_map.get(r);if(!e.has(n.user)){let t=this._series_color_seed.get(r);e.set(n.user,t),this._series_color_seed.set(r,t+1)}let i=e.get(n.user),[l,s,c]=o()(a).hsl();l+=150*i%360;let u=o()(l,s,c,"hsl"),[d,p,h]=u.rgb(),f=u.hex(),b=_(g([d,p,h,1],this._plugin_background));t.style.color=b,t.style.backgroundColor=f}else t.style.backgroundColor="",t.style.color=""}function b(e,t,n){n.column_header?.[n.column_header?.length-1];let[r,o,a,i,l]=(()=>void 0!==e?.color?e.color:this._color)();if("foreground"===e?.datetime_color_mode&&null!==n.user)t.style.color=r,t.style.backgroundColor="";else if("background"===e?.datetime_color_mode&&null!==n.user){let e=_(g([o,a,i,1],this._plugin_background));t.style.color=e,t.style.backgroundColor=r}else t.style.backgroundColor="",t.style.color=""}function m(e,t,n){let[r]=!0===n.user?this._pos_fg_color:!1===n.user?this._neg_fg_color:["",0,0,0,""];t.style.backgroundColor="",t.style.color=r}function y(e,t,n){let r=null!=typeof n.value&&null!=typeof n.value&&n.value?.toString()?.trim().length>0,o=n.row_header_x>=this._config.group_by.length,a=e.getMeta({dx:0,dy:n.y-n.y0+1}),i=a&&a.row_header&&void 0!==a.row_header[n.row_header_x+1];t.classList.toggle("psp-tree-label",r&&!o),t.classList.toggle("psp-tree-label-expand",r&&!o&&!i),t.classList.toggle("psp-tree-label-collapse",r&&!o&&i),t.classList.toggle("psp-tree-leaf",r&&o)}function w(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}function v(e){let t=e[c]||{};for(let n of e.children[0].children[1].children)for(let r of n.children){let n=e.getMeta(r),o=n.column_header?.[n.column_header?.length-1],a=w.call(this,n),i=t[o],l="integer"===a||"float"===a;l?h.call(this,i,r,n):"boolean"===a?m.call(this,i,r,n):"string"===a?f.call(this,i,r,n):"date"===a||"datetime"===a?b.call(this,i,r,n):(r.style.backgroundColor="",r.style.color=""),r.classList.toggle("psp-bool-type","boolean"===a&&null!==n.user);let s="TH"===r.tagName;s&&y.call(this,e,r,n),r.classList.toggle("psp-align-right",!s&&l),r.classList.toggle("psp-align-left",s||!l),r.classList.toggle("psp-color-mode-bar","bar"===i?.number_fg_mode&&l)}}async function x(e,t,n){let r=e.getMeta(n),o=r.column_header[r.column_header.length-1],a=(t.shiftKey?k:S).call(this,o);this._preserve_focus_state=!0,await e.parentElement.parentElement.restore({sort:a})}function k(e){let t=[],n=!1;for(let r of this._config.sort){let[o,a]=r;if(o===e){n=!0;let r=A.call(this,e,a);r&&t.push(r)}else t.push(r)}return n||t.push([e,"desc"]),t}function S(e){for(let[t,n]of this._config.sort)if(t===e){let t=A.call(this,e,n);return t?[t]:[]}return[[e,"desc"]]}function A(e,t){let n=this._config.split_by.length>0?E:C,r=t?n[t]:"desc";if(r)return[e,r]}var C={desc:"asc",asc:void 0},E={desc:"asc",asc:"col desc","col desc":"col asc","col asc":void 0};function V(e,t,n){let r,o=e.getMeta(t),a=o.column_header[o.column_header.length-1],i=this._schema[a],l="integer"===i||"float"===i,s=document.createElement(`perspective-${{float:"number",integer:"number",string:"string",date:"date",datetime:"datetime"}[i]}-column-style`);if(r=l?{fg_gradient:n,pos_fg_color:this._pos_fg_color[0],neg_fg_color:this._neg_fg_color[0],number_fg_mode:"color",bg_gradient:n,pos_bg_color:this._pos_bg_color[0],neg_bg_color:this._neg_bg_color[0],number_bg_mode:"disabled"}:{color:this._color[0],bg_color:this._color[0]},"string"!==i&&"date"!==i&&"datetime"!==i)if("float"===i)r.fixed=2;else{if("integer"!==i)return this._open_column_styles_menu.pop(),void e.draw({preserve_width:!0});r.fixed=0}let u=()=>s.blur(),d=t=>{let n=t.detail;n.pos_fg_color&&(n.pos_fg_color=p(n.pos_fg_color),n.neg_fg_color=p(n.neg_fg_color)),n.pos_bg_color&&(n.pos_bg_color=p(n.pos_bg_color),n.neg_bg_color=p(n.neg_bg_color)),n.color&&(n.color=p(n.color)),n.bg_color&&(n.bg_color=p(n.bg_color)),e[c]=e[c]||{},e[c][a]=n,e.draw({preserve_width:!0}),e.parentElement.parentElement.dispatchEvent(new Event("perspective-config-update"))},g=async()=>{e.removeEventListener("regular-table-scroll",u),s.removeEventListener("perspective-column-style-change",d),s.removeEventListener("blur",g),this._open_column_styles_menu.pop(),e.parentElement.parentElement.dispatchEvent(new Event("perspective-config-update")),await e.draw({preserve_width:!0}),s.destroy()};s.addEventListener("perspective-column-style-change",d),s.addEventListener("blur",g),e.addEventListener("regular-table-scroll",u);let _=e[c]||{},h=Object.assign({},_[a]=_[a]||{});(h.pos_fg_color||h.pos_bg_color)&&(h.pos_fg_color=h.pos_fg_color?.[0],h.neg_fg_color=h.neg_fg_color?.[0],h.pos_bg_color=h.pos_bg_color?.[0],h.neg_bg_color=h.neg_bg_color?.[0]),h.color&&(h.color=h.color[0]),h.bg_color&&(h.bg_color=h.bg_color[0]),s.open(t,h,r)}async function P(e,t){let n=e.getMeta(t.target),r=t.target.classList.contains("psp-tree-label-collapse");t.shiftKey&&r?this._view.set_depth(n.row_header.filter((e=>void 0!==e)).length-2):t.shiftKey?this._view.set_depth(n.row_header.filter((e=>void 0!==e)).length-1):r?this._view.collapse(n.y):this._view.expand(n.y),this._num_rows=await this._view.num_rows(),this._num_columns=await this._view.num_columns(),e.draw()}async function N(e,t){if(1!==t.which)return;let n=t.target;if("A"===n.tagName)return;for(;"TD"!==n.tagName&&"TH"!==n.tagName;)if(n=n.parentElement,!e.contains(n))return;if(n.classList.contains("psp-tree-label"))return P.call(this,e,t),void t.stopImmediatePropagation();let r=n.getBoundingClientRect();if(n.classList.contains("psp-menu-enabled")&&t.clientY-r.top>16){let r=e.getMeta(n),o=r.column_header?.[r.column_header?.length-1],a=this._schema[o];if(this._open_column_styles_menu.unshift(r._virtual_x),"string"===a||"date"===a||"datetime"===a)await e.draw({preserve_width:!0}),V.call(this,e,n);else{let[t,r]=await this._view.get_min_max(o);await e.draw({preserve_width:!0});let a=Math.max(Math.abs(t),Math.abs(r));a>1&&(a=Math.round(100*a)/100),V.call(this,e,n,a)}t.preventDefault(),t.stopImmediatePropagation()}else n.classList.contains("psp-header-leaf")&&!n.classList.contains("psp-header-corner")&&(x.call(this,e,t,n),t.stopImmediatePropagation())}function L(e,t){if(1!==t.which)return;let n=t.target;for(;"TD"!==n.tagName&&"TH"!==n.tagName;)if(n=n.parentElement,!e.contains(n))return;(n.classList.contains("psp-tree-label")&&t.offsetX<26||n.classList.contains("psp-header-leaf")&&!n.classList.contains("psp-header-corner"))&&t.stopImmediatePropagation()}function T(e,t){void 0===t&&(t=!1);let n=0===this._config.group_by.length&&0===this._config.split_by.length,r=e.hasAttribute("selectable"),o=t||!!e.children[0]._is_edit_mode;return n&&!r&&o}function M(e,t){let n=e[c]||{},r=T.call(this,t);e.parentElement.classList.toggle("edit-mode-allowed",T.call(this,t,!0));for(let o of e.querySelectorAll("td")){let t=e.getMeta(o),a=this.get_psp_type(t);if(r&&this._is_editable[t.x]){let e=t.column_header[t.column_header.length-1];"string"===a&&"link"===n[e]?.format?(o.toggleAttribute("contenteditable",!1),o.classList.toggle("boolean-editable",!1)):"boolean"===a?(o.toggleAttribute("contenteditable",!1),o.classList.toggle("boolean-editable",null!==t.user)):(r!==o.hasAttribute("contenteditable")&&o.toggleAttribute("contenteditable",r),o.classList.toggle("boolean-editable",!1))}else o.toggleAttribute("contenteditable",!1),o.classList.toggle("boolean-editable",!1)}}var O=(e,t,n)=>{let r=e.querySelectorAll("td"),o=n.get(e);if(o){for(let t of r){let n=e.getMeta(t);if(n.x===o.x&&n.y===o.y)return document.activeElement!==t&&t.focus({preventScroll:!0}),!0}document.activeElement!==document.body&&e.contains(document.activeElement)&&document.activeElement.blur()}};function R(){if(this.isContentEditable){let e=document.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(this),t.setEnd(e.endContainer,e.endOffset),t.toString().length}return this.target.selectionStart}function z(e,t){void 0===t&&(t=!1);let n=0===this._config.group_by.length&&0===this._config.split_by.length,r=e.hasAttribute("selectable"),o=t||!!e.children[0]._is_edit_mode;return n&&!r&&o}var D=function(e){let t;return async function(){if(t&&await t&&t)return;let n;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];t=new Promise((e=>n=e)),await e.apply(this,o),t=void 0,n()}}((async function(e,t,n,r,o){let a=e.getMeta(n),i=this._column_paths.length,l=this._num_rows,s=t.get(e);if(!s)return;a.x+r<i&&0<=a.x+r&&(s.x=a.x+r),a.y+o<l&&0<=a.y+o&&(s.y=a.y+o);let c=Math.max(a.x0-10,0),u=Math.min(a.x0+10,i),d=Math.max(a.y0-5,0),g=Math.min(a.y0+10,l),_=a.x0+r,p=a.y0+o;for(;!O(e,0,t)&&_>=c&&_<u&&p>=d&&p<g;)await e.scrollToCell(_,p,i,l),t.set(e,s),_+=r,p+=o}));function Y(e,t,n,r){if(!z.call(this,t))return;let o=document.activeElement;switch(r.target.classList.remove("psp-error"),r.keyCode){case 13:r.preventDefault(),r.shiftKey?D.call(this,e,n,o,0,-1):D.call(this,e,n,o,0,1);break;case 37:0==R.call(o)&&(r.preventDefault(),D.call(this,e,n,o,-1,0));break;case 38:r.preventDefault(),D.call(this,e,n,o,0,-1);break;case 39:R.call(o)==o.textContent.length&&(r.preventDefault(),D.call(this,e,n,o,1,0));break;case 40:r.preventDefault(),D.call(this,e,n,o,0,1)}}function B(e,t,n){let r=e.getMeta(n.target);if(void 0!==r?.x){let o=z.call(this,t),a=this._is_editable[r.x],i="boolean"===this.get_psp_type(r),l="-"===n.target.textContent;o&&a&&i&&!l&&write(e,this,n.target)}}function $(e,t,n,r){if(z.call(this,t)&&n.has(e)){r.target.classList.remove("psp-error");let t=n.get(e);n.delete(e),t.content!==r.target.textContent&&(function(e,t,n){let r=e.getMeta(n),o=t._schema[t._column_paths[r.x]];if(r){let e=n.textContent,a=t._ids[r.y-r.y0];if("float"===o||"integer"===o){if(e=parseFloat(e.replace(/,/g,"")),isNaN(e))return!1}else if("date"===o||"datetime"===o){if(e=Date.parse(e),isNaN(e))return!1}else"boolean"===o&&(e="check"!==e&&("close"===e||null));let i={__INDEX__:a,[t._column_paths[r.x]]:e};return t._table.update([i],{port_id:t._edit_port}),!0}}(e,this,r.target)||(r.target.textContent=t.content,r.target.classList.add("psp-error"),r.target.focus()))}}function j(e,t,n,r){let o=e.getMeta(r.target);if(o){let t={x:o.x,y:o.y,content:r.target.textContent};n.set(e,t)}}async function I(e,t,n){let{_view:r,_config:o}=e,a=o.group_by,i=o.split_by,l=t>=0?t:0,s=l+1,c=await r.to_json({start_row:l,end_row:s}),u=c.map((e=>e.__ROW_PATH__))[0]||[],d=a.map(((e,t)=>{let n=u[t];return n?[e,"==",n]:void 0})).filter((e=>e)),g=a.length>0?n+1:n,_=Object.keys(c[0])[g],p={row:c[0]},h=[];if(_){let e=_.split("|");p.column_names=[e[e.length-1]],h=i.map(((t,n)=>{let r=e[n];return r?[t,"==",r]:void 0})).filter((e=>e)).filter((e=>{let[,,t]=e;return"__ROW_PATH__"!==t}))}let f=o.filter.concat(d).concat(h);return p.config={filter:f},p}async function F(e,t,n,r){let o=e.getMeta(r.target);if(!t.hasAttribute("selectable")||r.handled||1!==r.which||!o)return;let a=this._ids[o.y-o.y0];if(o&&o.y>=0){let i=n.get(e),l=!!i&&i.reduce(((e,t,n)=>e&&t===a[n]),!0),s=!!i&&a.length===i.length&&l,c=[];s?n.delete(e):(n.set(e,a),c=await I(this,o.y,o.x),c=c.config.filter),await e.draw({preserve_width:!0}),r.handled=!0,t.dispatchEvent(new CustomEvent("perspective-select",{bubbles:!0,composed:!0,detail:{selected:!s,config:{filter:c}}}))}}function H(e,t,n){if(!t.hasAttribute("selectable"))return;let r=n.has(e),o=n.get(e);for(let a of e.querySelectorAll("td"))if(r){let t=e.getMeta(a),n=this._ids[t.y-t.y0],r=o.reduce(((e,t,r)=>e&&t===n[r]),!0);a.classList.toggle("psp-row-selected",n.length===o.length&&r),a.classList.toggle("psp-row-subselected",n.length!==o.length&&r)}else a.classList.toggle("psp-row-selected",!1),a.classList.toggle("psp-row-subselected",!1);for(let a of e.querySelectorAll("tbody th")){let t=e.getMeta(a),n=this._ids[t.y-t.y0];if(!r||n[t.row_header_x])a.classList.toggle("psp-row-selected",!1),a.classList.toggle("psp-row-subselected",!1);else{let e=o.reduce(((e,t,r)=>e&&t===n[r]),!0);a.classList.toggle("psp-row-selected",n.length===o.length&&e),a.classList.toggle("psp-row-subselected",n.length!==o.length&&e)}}}async function W(e,t,n){n.delete(e);for(let r of e.querySelectorAll("td,th"))r.classList.toggle("psp-row-selected",!1),r.classList.toggle("psp-row-subselected",!1)}var U={datetime:Intl.DateTimeFormat,date:Intl.DateTimeFormat,integer:Intl.NumberFormat,float:Intl.NumberFormat,boolean:class{format(e){return e?"check":"close"}}},X=new class{constructor(){this._formatters=new Map}create_datetime_formatter(e,t){let n=(0,a.get_type_config)(e),r={...n.format,timeZone:t.timeZone,dateStyle:t.dateStyle,timeStyle:t.timeStyle};return"disabled"===r.dateStyle?r.dateStyle=void 0:void 0===r.dateStyle&&(r.dateStyle=n.format.dateStyle),"disabled"===r.timeStyle?r.timeStyle=void 0:void 0===r.timeStyle&&(r.timeStyle=n.format.timeStyle),new Intl.DateTimeFormat([],r)}create_number_formatter(e,t){let{format:n}=(0,a.get_type_config)(e);return void 0!==t.fixed&&(n.minimumFractionDigits=t.fixed,n.maximumFractionDigits=t.fixed),new U[e]([],n)}create_boolean_formatter(e,t){let n=(0,a.get_type_config)(e);return new U[e]([],n.format)}get(e,t){let n=[e,t.fixed,t.timeZone,t.dateStyle,t.timeStyle].join("-");if(!this._formatters.has(n)){(0,a.get_type_config)(e);"date"===e||"datetime"===e?this._formatters.set(n,this.create_datetime_formatter(e,t)):"integer"===e||"float"===e?this._formatters.set(n,this.create_number_formatter(e,t)):"boolean"===e?this._formatters.set(n,this.create_boolean_formatter(e,t)):this._formatters.set(n,!1)}return this._formatters.get(n)}};function q(e,t,n,r){if(void 0===n&&(n={}),void 0===r&&(r=!1),null===t)return"-";let o=e[e.length-1],a=r&&this._table_schema[o]||this._schema[o]||"string",i=n[o]||{};if("integer"!==a&&"float"!==a||"bar"!==i?.number_fg_mode){if("link"===i?.format&&"string"===a){let e=document.createElement("a");return e.setAttribute("href",t),e.setAttribute("target","_blank"),e.textContent=t,e}if("bold"===i?.format&&"string"===a){let e=document.createElement("b");return e.textContent=t,e}if("italics"===i?.format&&"string"===a){let e=document.createElement("i");return e.textContent=t,e}{let e=X.get(a,i);return e?e.format(t):t}}{let e=Math.max(0,Math.min(.95,.95*Math.abs(t/i.fg_gradient))),n=this._div_factory.get(),r=t>=0?"left":"right";return n.setAttribute("style",`width:${(100*e).toFixed(2)}%;position:absolute;${r}:0;height:80%;top:10%;pointer-events:none;`),n}}function Z(e,t,n){var r=this;return void 0===e&&(e=[]),function*(){let o=n[c];for(let n of e){n=["TOTAL",...n];let e=n[n.length-1];n=n.slice(0,n.length-1).fill("");let a=q.call(r,[t[n.length-1]],e,o,!0);n=a instanceof HTMLElement?n.concat(a):n.concat({toString:()=>a}),n.length=t.length+1,yield n}}()}function G(e,t,n){let r=window.getComputedStyle(e).getPropertyValue(t).trim();return r.length>0?r:n}function K(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}async function J(e,t,n,r){void 0===r&&(r={});let a=await n.get_config(),i=a.expressions.map((e=>e[1])),[l,s,u,g,_,h,f]=await Promise.all([t.schema(),t.validate_expressions(i),n.num_rows(),n.schema(),n.expression_schema(),n.column_paths(),this.parentElement.getEditPort()]),b=o()(G(e,"--plugin--background","#FFFFFF")).rgb(),m=p(G(e,"--rt-pos-cell--color","#338DCD")),y=p(G(e,"--rt-neg-cell--color","#FF5942")),w=p(d(m[0],b)),v=p(d(y[0],b)),x=p(G(e,"--active--color","#ff0000")),k={...g,..._},S={...l,...s.expression_schema},A=h.filter((e=>"__ROW_PATH__"!==e&&"__ID__"!==e)),C=[],E=[];for(let o of A){let e=o.split("|"),t=e[e.length-1];E.push(k[t]),C.push(!!l[t])}let V=Object.assign(r,{_edit_port:f,_view:n,_table:t,_table_schema:S,_config:a,_num_rows:u,_schema:k,_ids:[],_open_column_styles_menu:[],_plugin_background:b,_color:x,_pos_fg_color:m,_neg_fg_color:y,_pos_bg_color:w,_neg_bg_color:v,_column_paths:A,_column_types:E,_is_editable:C,_row_header_types:a.group_by.map((e=>S[e])),_series_color_map:new Map,_series_color_seed:new Map,get_psp_type:K});return V._div_factory=V._div_factory||new class{constructor(e){this._name=e,this._elements=[],this._index=0}clear(){this._index=0}get(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));let e=this._elements[this._index];return this._index+=1,e}}("div"),e.setDataListener(function(){let e,t,n,r,o;return async function(a,i,l,s,u){let d,g={};s-i>0&&u-l>0?(this._is_old_viewport=this._last_window?.start_row===l&&this._last_window?.end_row===u&&this._last_window?.start_col===i&&this._last_window?.end_col===s,d={start_row:l,start_col:i,end_row:u,end_col:s,id:!0},g=await this._view.to_columns(d),this._last_window=d,this._ids=g.__ID__,this._reverse_columns=this._column_paths.slice(i,s).reduce(((e,t,n)=>(e.set(t,n),e)),new Map),this._reverse_ids=this._ids.reduce(((e,t,n)=>(e.set(t?.join("|"),n),e)),new Map)):this._div_factory.clear();let _=[],p=[],h=[],f=[];for(let e=i;e<Math.min(s,this._column_paths.length);++e){let t=this._column_paths[e],n=t.split("|"),r=g[t]||new Array(u-l).fill(null);_.push(r.map((e=>q.call(this,n,e,a[c])))),p.push(r),h.push(n),f.push(t)}return s-i>0&&u-l>0&&(this.last_column_paths=t,this.last_meta=e,this.last_ids=n,this.last_reverse_ids=r,this.last_reverse_columns=o,t=f,e=p,n=this._ids,r=this._reverse_ids,o=this._reverse_columns),{num_rows:this._num_rows,num_columns:this._column_paths.length,row_headers:Array.from(Z.call(this,g.__ROW_PATH__,this._config.group_by,a)),column_headers:h,data:_,metadata:p}}}().bind(V,e),{virtual_mode:window.getComputedStyle(e).getPropertyValue("--datagrid-virtual-mode")?.trim()||"both"}),V}async function Q(e,t,n){let r=e.getMeta(n.target);if(!r)return;let{x:o,y:a}=r,{row:i,column_names:l,config:s}=await I(this,a,o);t.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{row:i,column_names:l,config:s}}))}async function ee(e){let t=this.parentElement,n=await t.getTable(!0);if(this._initialized)await J.call(this,this.regular_table,n,e,this.model);else{this.innerHTML="",this.appendChild(this.regular_table),this.model=await J.call(this,this.regular_table,n,e),this.regular_table.addStyleListener(v.bind(this.model,this.regular_table)),this.regular_table.addStyleListener(s.bind(this.model,this.regular_table)),this.regular_table.addStyleListener(l.bind(this.model,this.regular_table)),this.regular_table.addEventListener("click",L.bind(this.model,this.regular_table)),this.regular_table.addEventListener("mousedown",N.bind(this.model,this.regular_table));let r=new WeakMap;this.regular_table.addStyleListener(H.bind(this.model,this.regular_table,t,r)),this.regular_table.addEventListener("mousedown",F.bind(this.model,this.regular_table,t,r)),this.regular_table.addEventListener("psp-deselect-all",W.bind(this.model,this.regular_table,t,r)),this.regular_table.addEventListener("click",Q.bind(this.model,this.regular_table,t));let o=new WeakMap;this.regular_table.addStyleListener(M.bind(this.model,this.regular_table,t)),this.regular_table.addStyleListener(O.bind(this.model,this.regular_table,t,o)),this.regular_table.addEventListener("click",B.bind(this.model,this.regular_table,t)),this.regular_table.addEventListener("focusin",j.bind(this.model,this.regular_table,t,o)),this.regular_table.addEventListener("focusout",$.bind(this.model,this.regular_table,t,o)),this.regular_table.addEventListener("keydown",Y.bind(this.model,this.regular_table,t,o)),this._initialized=!0}}function te(e,t){if(void 0===t&&(t=!1),!this._initialized)return;t&&(this._cached_column_sizes=e);let n={},{group_by:r,columns:o}=this.model._config,a=r?.length>0?r.length+1:0;for(let i of Object.keys(e))if("__ROW_PATH__"===i)n[a-1]=e[i];else{n[this.model._column_paths.indexOf(i)+a]=e[i]}this.regular_table._column_sizes.override=n}function ne(){if(!this._initialized)return[];if(this._cached_column_sizes){let e=this._cached_column_sizes;return this._cached_column_sizes=void 0,e}let e=this.regular_table._column_sizes.override,{group_by:t,columns:n}=this.model._config,r=t?.length>0?t.length+1:0,o={};for(let a of Object.keys(e))if(void 0!==e[a]){let t=a-r;t>-1?o[this.model._column_paths[t]]=e[a]:-1===t&&(o.__ROW_PATH__=e[a])}return o}function re(e){void 0===e&&(e=void 0),void 0===e&&(e=!this._is_edit_mode),this._is_edit_mode=e,this.classList.toggle("editable",e),void 0!==this._edit_mode&&(this._edit_mode.classList.toggle("editable",e),this._edit_mode.children[0].textContent=e?"Editable":"Read Only")}function oe(e){void 0===e&&(e=void 0),void 0===e&&(e=!this._is_scroll_lock),this._is_scroll_lock=e,this.classList.toggle("sub-cell-scroll-enabled",!e),void 0!==this._scroll_lock&&(this._scroll_lock.classList.toggle("lock-scroll",e),this._scroll_lock.children[0].textContent=e?"Align Scroll":"Free Scroll")}function ae(e){let t={};if((e=JSON.parse(JSON.stringify(e))).columns)for(let r of Object.keys(e.columns)){let n=e.columns[r];void 0!==n.column_size_override&&(t[r]=n.column_size_override,delete n.column_size_override),n?.pos_fg_color&&(n.pos_fg_color=p(n.pos_fg_color),n.neg_fg_color=p(n.neg_fg_color)),n?.pos_bg_color&&(n.pos_bg_color=p(n.pos_bg_color),n.neg_bg_color=p(n.neg_bg_color)),n?.color&&(n.color=p(n.color)),0===Object.keys(n).length&&delete e.columns[r]}"editable"in e&&re.call(this,e.editable),"scroll_lock"in e&&oe.call(this,e.scroll_lock);let n=this.regular_table;try{n._resetAutoSize()}catch{}te.call(this,t,!0),n[c]=e.columns}function ie(){this._toolbar||(this._toolbar=document.createElement("perspective-viewer-datagrid-toolbar")),this.parentElement.appendChild(this._toolbar)}function le(){if(this.regular_table){let e=this.regular_table,t={columns:{},scroll_lock:!!this._is_scroll_lock,editable:!!this._is_edit_mode};for(let r of Object.keys(e[c]||{})){let n=Object.assign({},e[c][r]);(n?.pos_fg_color||n?.pos_bg_color)&&(n.pos_fg_color=n.pos_fg_color?.[0],n.neg_fg_color=n.neg_fg_color?.[0],n.pos_bg_color=n.pos_bg_color?.[0],n.neg_bg_color=n.neg_bg_color?.[0]),n?.color&&(n.color=n.color[0]),t.columns[r]=n}let n=ne.call(this);for(let r of Object.keys(n||{}))t.columns[r]||(t.columns[r]={}),t.columns[r].column_size_override=n[r];return JSON.parse(JSON.stringify(t))}return{}}async function se(e){if(this.parentElement&&await this.activate(e),!this.isConnected||null==this.offsetParent)return;let t=ne.call(this),n=this.regular_table.draw({invalid_columns:!0});this.model._preserve_focus_state?this.model._preserve_focus_state=!1:(this.regular_table.scrollTop=0,this.regular_table.scrollLeft=0,this.regular_table.dispatchEvent(new CustomEvent("psp-deselect-all",{bubbles:!1})),this.regular_table._resetAutoSize()),te.call(this,t),await n,this._toolbar.classList.toggle("aggregated",this.model._config.group_by.length>0||this.model._config.split_by.length>0)}var ce=class extends HTMLElement{constructor(){super(),this.regular_table=document.createElement("regular-table"),this._is_scroll_lock=!0}connectedCallback(){return ie.call(this)}disconnectedCallback(){this._toolbar.parentElement.removeChild(this._toolbar)}async activate(e){return await ee.call(this,e)}get name(){return"Datagrid"}get category(){return"Basic"}get select_mode(){return"toggle"}get min_config_columns(){}get config_column_names(){}get priority(){return 1}async draw(e){return await se.call(this,e)}async update(e){this.model._num_rows=await e.num_rows(),await this.regular_table.draw()}async resize(){!this.isConnected||null==this.offsetParent||this._initialized&&await this.regular_table.draw()}async clear(){this.regular_table._resetAutoSize(),this.regular_table.clear()}save(){return le.call(this)}restore(e){return ae.call(this,e)}async restyle(e){await this.draw(e)}delete(){this.regular_table.table_model&&this.regular_table._resetAutoSize(),this.regular_table.clear()}},ue=class extends HTMLElement{connectedCallback(){if(this._initialized)return;this._initialized=!0,this.setAttribute("slot","plugin-settings"),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='\n            <style>\n                :host{position:relative;display:block}:host #container{position:absolute;display:flex;flex-direction:column;justify-content:stretch;align-items:stretch;top:0;left:0;right:0;bottom:0}:host #toolbar{display:flex;align-items:center;height:36px}:host #slot-container{flex:1;position:relative}#scroll_lock.lock-scroll:before{content:var(--toolbar-scroll-lock-active--content)}#scroll_lock:before{content:var(--toolbar-scroll-lock--content)}#select_mode:before{content:"highlight_alt"}#edit_mode:before{content:var(--toolbar-edit-mode--content)}#edit_mode.editable:before{content:var(--toolbar-edit-mode-active--content)}:host(.aggregated) #toolbar #edit_mode{display:none}.button:before{color:var(--inactive--color, #ccc);line-height:36px;font-size:14px;font-family:var(--button--font-family, "Material Icons Outlined");vertical-align:bottom;margin:0 11px}.button.editable:before,.button.lock-scroll:before{color:inherit}.button{user-select:none;width:36px;box-sizing:border-box;white-space:nowrap}.button>span{display:none;margin:0;padding:0}.button:hover{opacity:1;display:flex;align-items:center;color:inherit;cursor:pointer;min-width:var(--button--min-width, 105px);background-color:#0000000d}.button:hover:before{margin:0 6px 0 11px}.button:hover>span{display:contents;font-size:12px;font-weight:300;line-height:36px}\n\n            </style>\n            <div id="toolbar">\n                <span id="scroll_lock" class="lock-scroll button">\n                    <span>Align Scroll</span>\n                </span>\n                <span id="edit_mode" class="button"><span>Read Only</span></span>\n            </div>\n        ';let e=this.parentElement,t=e.querySelector("perspective-viewer-datagrid");t._scroll_lock=this.shadowRoot.querySelector("#scroll_lock"),t._scroll_lock.addEventListener("click",(()=>oe.call(t))),t._edit_mode=this.shadowRoot.querySelector("#edit_mode"),t._edit_mode.addEventListener("click",(()=>{re.call(t),t.regular_table.draw(),e.dispatchEvent(new Event("perspective-config-update"))}))}};!async function(){customElements.define("perspective-viewer-datagrid-toolbar",ue),customElements.define("perspective-viewer-datagrid",ce),await customElements.whenDefined("perspective-viewer"),customElements.get("perspective-viewer").registerPlugin("perspective-viewer-datagrid")}(),function(){let e=document.createElement("style");e.textContent='regular-table{padding:0;margin:12px 0 0 12px;scrollbar-color:transparent transparent;scrollbar-width:thin;outline:none}regular-table:hover{scrollbar-color:rgba(0,0,0,.3) transparent}.sub-cell-scroll-enabled regular-table table tbody td,.sub-cell-scroll-enabled regular-table table thead th:not(.rt-group-corner){transform:translate(var(--regular-table--transform-x, 0px))}.sub-cell-scroll-enabled regular-table table tbody{transform:translateY(var(--regular-table--transform-y, 0px))}.sub-cell-scroll-enabled regular-table table tbody tr:first-child td,.sub-cell-scroll-enabled regular-table table tbody tr:first-child th{clip-path:polygon(0 var(--regular-table--clip-y, 0),0 200%,200% 200%,200% var(--regular-table--clip-y, 0))}.sub-cell-scroll-enabled regular-table table thead th.rt-group-corner{background:var(--plugin--background, white);z-index:1}.sub-cell-scroll-enabled regular-table table tbody tr td:first-of-type{clip-path:polygon(var(--regular-table--clip-x, 0) 0,var(--regular-table--clip-x, 0) 200%,200% 200%,200% 0)}.sub-cell-scroll-enabled regular-table table tbody tr:first-child td:first-of-type{clip-path:polygon(var(--regular-table--clip-x, 0) var(--regular-table--clip-y, 0),var(--regular-table--clip-x, 0) 200%,200% 200%,200% var(--regular-table--clip-y, 0))}regular-table{font-family:inherit}regular-table div[tabindex]{outline:none}regular-table>div{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden}regular-table th{text-align:center}regular-table thead tr:not(:last-child) th{overflow:hidden;max-width:0px}regular-table thead tr:last-child .rt-float,regular-table tbody .rt-float{text-align:right}regular-table thead .rt-integer,regular-table tbody .rt-integer{text-align:right}regular-table tbody th{text-align:left}regular-table span.rt-tree-container{display:flex;align-items:center;height:100%}regular-table thead .rt-string,regular-table tbody .rt-string,regular-table thead .rt-date,regular-table tbody .rt-date,regular-table thead .rt-datetime,regular-table tbody .rt-datetime{text-align:left}regular-table thead tr:last-child th{border-bottom:1px solid #eaedef}regular-table tbody tr:first-child td,regular-table tbody tr:first-child th{border-top:1px solid transparent!important}regular-table th{position:relative}regular-table tr th span.rt-tree-group{margin-left:5px;margin-right:15px;border-left:1px solid #eee;height:100%}regular-table td,regular-table th{white-space:nowrap;font-size:12px;padding:0 5px;height:19px}regular-table tr:hover td{background:#eee;opacity:1}regular-table tr:hover{color:#333}regular-table table *{box-sizing:border-box}regular-table table{position:absolute;overflow:hidden;color:#666;outline:none}regular-table span.rt-row-header-icon{color:#aaa;padding-right:4px;font-family:var(--button--font-family, "Material Icons")}regular-table span.rt-column-header-icon{font-size:10px;padding-left:3px;display:inline-block;width:10px;font-family:var(--button--font-family, "Material Icons")}regular-table span.rt-row-header-icon:hover{color:#1a7da1;text-shadow:0px 0px 3px #1a7da1}regular-table .rt-selected td{background-color:#eee}regular-table .rt-cell-clip{overflow:hidden;text-overflow:ellipsis}regular-table td span.rt-group-name,regular-table th span.rt-group-name{margin-right:-5px;padding-right:5px;padding-left:8px;flex:1;height:100%}regular-table th span.rt-group-name{text-align:left}regular-table td th span.rt-group-leaf,regular-table th span.rt-group-leaf{margin-left:16px;height:100%}regular-table .rt-column-resize{height:100%;width:10px;position:absolute;top:0;right:0;cursor:col-resize}regular-table a{color:var(--rt-pos-cell--color)}regular-table a:visited{color:var(--active--color)}regular-table::-webkit-scrollbar,regular-table::-webkit-scrollbar-corner{background-color:transparent;height:12px;width:12px}regular-table::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#0000;border-radius:5px}regular-table::-webkit-scrollbar-thumb:horizontal{border-bottom:2px solid transparent;border-top:2px solid transparent}regular-table::-webkit-scrollbar-thumb:vertical{border-left:2px solid transparent;border-right:2px solid transparent}regular-table:hover::-webkit-scrollbar-thumb{background-color:#00000026}regular-table::-webkit-scrollbar-thumb:hover{background-color:#0000004d}.psp-header-border:not(.psp-is-top):not(.psp-header-leaf){box-shadow:1px 0 var(--inactive--color, #eaedef)}.psp-header-group{box-shadow:0 10px 0 -9px var(--inactive--color, #eaedef)}.psp-is-top{box-shadow:5px 4px 0 -4px var(--inactive--color, #eaedef)}.psp-is-top.psp-header-group:not(.psp-header-group-corner){box-shadow:5px 4px 0 -4px var(--inactive--color, #eaedef),0 10px 0 -9px var(--inactive--color, #eaedef)}.psp-header-border.psp-header-group:not(.psp-is-top):not(.psp-header-group-corner){box-shadow:1px 0 var(--inactive--color, #eaedef),0 10px 0 -9px var(--inactive--color, #eaedef)}.psp-header-leaf.psp-header-border{box-shadow:5px -4px 0 -4px var(--inactive--color, #eaedef)}tr:only-child th{box-shadow:none!important}regular-table tbody tr:hover th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover td:not(.psp-row-selected):not(.psp-row-subselected){border-color:var(--rt-hover--border-color, #c5c9d080)!important;background-color:transparent;box-shadow:0 1px 0 var(--rt-hover--border-color, #c5c9d080),0 3px #0000000d,0 5px #00000003}regular-table tbody tr:hover+tr th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr td:not(.psp-row-selected):not(.psp-row-subselected){border-top-color:transparent}regular-table tbody tr th:first-child:not(:empty),regular-table tbody tr th:first-child:empty+th:not(:empty),regular-table tbody tr th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr td:first-child{border-left-width:1px;border-left-color:transparent}regular-table tbody tr th:last-child,regular-table tbody tr td:last-child{border-right-width:1px;border-right-color:transparent}regular-table tbody tr:hover{color:#161616}regular-table tbody tr:hover th:first-child:not(:empty),regular-table tbody tr:hover th:first-child:empty+th:not(:empty),regular-table tbody tr:hover th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr:hover td:first-child{border-left-color:var(--rt-hover--border-color, #c5c9d080)!important}regular-table tbody tr:hover th:last-child,regular-table tbody tr:hover td:last-child{border-right-color:var(--rt-hover--border-color, #c5c9d080)!important}perspective-viewer[settings] regular-table .psp-header-leaf{height:36px;vertical-align:top;padding-top:2px}perspective-viewer[settings] regular-table .psp-header-leaf:not(.psp-header-corner):before{font-family:var(--button--font-family, inherit);content:var(--column-style-open-button--content, var(--config-button-icon--content, "\\1f527"));position:absolute;width:calc(100% - 8px);left:5px;bottom:0px;color:var(--inactive--color, #b4b7be)}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:not(.psp-header-corner):before{color:inherit;cursor:pointer}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner){pointer-events:none}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner):before{content:var(--column-style-close-button--content, "X")}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:hover:before{color:#338dcd}perspective-viewer[settings] regular-table .psp-header-leaf .rt-column-resize{height:18px}.psp-row-selected,:hover .psp-row-selected,:hover th.psp-tree-leaf.psp-row-selected,:hover th.psp-tree-label.psp-row-selected{color:#fff!important;background-color:#ea7319!important;border-color:#ea7319!important}.psp-row-selected.psp-tree-label:not(:hover):before{color:#fff}.psp-row-subselected,:hover .psp-row-subselected,:hover th.psp-tree-leaf.psp-row-subselected,:hover th.psp-tree-label.psp-row-subselected{background:rgba(234,115,25,.2)!important}.psp-error{color:red}td:focus{outline:#666;outline-style:dotted;outline-width:1px}perspective-viewer.dragging regular-table{pointer-events:none}.psp-header-border:last-child{border-right-width:0px}.psp-header-sort-desc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-desc--content, "\\2193")}.psp-header-sort-asc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-asc--content, "\\2191")}.psp-header-sort-col-desc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-col-desc--content, "\\2190")}.psp-header-sort-col-asc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-col-asc--content, "\\2192")}tbody th:last-of-type{border-right:1px solid #eaedef;overflow:hidden;text-overflow:ellipsis}tbody th:empty{background-image:linear-gradient(to right,transparent 9px,#eee 10px,transparent 11px);background-repeat:no-repeat;min-width:20px;max-width:20px;pointer-events:none}.psp-tree-label{max-width:0px;min-width:0px}.psp-tree-label:before{color:#ccc;font-family:var(--button--font-family, inherit);padding-right:11px;vertical-align:-1px}.psp-tree-label-expand:before{content:var(--tree-label-expand--content, "+")}.psp-tree-label-collapse:before{content:var(--tree-label-collapse--content, "-")}.psp-tree-label:hover:before{color:#338dcd;text-shadow:0px 0px 5px #338dcd}regular-table thead tr:last-child th{border-bottom-width:1px;border-bottom-color:var(--inactive--color, #eaedef)}.psp-tree-leaf{padding-left:24px}.psp-align-right{text-align:right}.psp-align-left{text-align:left}.psp-positive:not(:focus){color:var(--rt-pos-cell--color, #338dcd)}.psp-negative:not(:focus){color:var(--rt-neg-cell--color, #ff5942)}regular-table table tbody td{min-width:52px!important}.psp-is-width-override .rt-column-resize,.rt-column-resize:hover{border:1px dashed #999;border-bottom-width:0px;border-left-width:0px}.psp-bool-type{font-family:var(--button--font-family, "Material Icons")}.boolean-editable{cursor:pointer}regular-table table{user-select:none;color:#161616;border-collapse:separate}regular-table table th{font-weight:400}regular-table table td,regular-table table th{border-color:#eaedef;height:23px}regular-table table .psp-header-group{text-overflow:ellipsis}regular-table table .psp-header-leaf{border-bottom-width:0px}regular-table table td,regular-table table th.psp-tree-label,regular-table table th.psp-tree-label,regular-table table th.psp-tree-leaf,regular-table table tbody tr:first-child th{border-style:solid;border-width:0px;border-top-width:1px}regular-table table tbody th:empty{background-position:0px -10px}@keyframes pulse_pos{0%{background-color:var(--pulse--background-color-start, rgba(0, 128, 255, .5))}to{background-color:var(--pulse--background-color-end, rgba(0, 128, 255, 0))}}@keyframes pulse_pos2{0%{background-color:var(--pulse--background-color-start, rgba(0, 128, 255, .5))}to{background-color:var(--pulse--background-color-end, rgba(0, 128, 255, 0))}}@keyframes pulse_neg{0%{background-color:var(--pulse--background-color-start, rgba(255, 25, 0, .5))}to{background-color:var(--pulse--background-color-end, rgba(255, 25, 0, 0))}}@keyframes pulse_neg2{0%{background-color:var(--pulse--background-color-start, rgba(255, 25, 0, .5))}to{background-color:var(--pulse--background-color-end, rgba(255, 25, 0, 0))}}\n',document.head.insertBefore(e,document.head.firstChild)}()},5239:function(e,t,n){"use strict";n.d(t,{ZP:function(){return Z}});var r=n(6782);var o=n.p+"b398cb17f301a034.wasm",a=Object.create,i=Object.defineProperty,l=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,d=e=>i(e,"__esModule",{value:!0}),g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_=e=>((e,t,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of s(t))!u.call(e,r)&&"default"!==r&&i(e,r,{get:()=>t[r],enumerable:!(n=l(t,r))||n.enumerable});return e})(d(i(null!=e?a(c(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),p=g(((e,t)=>{t.exports.default={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short",timeStyle:"medium"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short"},null_value:-1}}}})),h=g(((e,t)=>{var n=p().default;function r(e){return e&&"object"==typeof e&&!Array.isArray(e)}function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;let i=n.shift();if(r(e)&&r(i))for(let l in i)r(i[l])?(e[l]||Object.assign(e,{[l]:{}}),o(e[l],i[l])):Object.assign(e,{[l]:i[l]});return o(e,...n)}t.exports.get_types=function(){return Object.keys(t.exports.get_config().types)},t.exports.get_type_config=function(e){let n={};if(t.exports.get_config().types[e]&&Object.assign(n,t.exports.get_config().types[e]),n.type){let e=t.exports.get_type_config(n.type);return Object.assign(e,n),e}return n},globalThis.__PERSPECTIVE_CONFIG__=void 0,t.exports.override_config=function(e){globalThis.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),globalThis.__PERSPECTIVE_CONFIG__=o(n,e)},t.exports.get_config=function(){return globalThis.__PERSPECTIVE_CONFIG__||(globalThis.__PERSPECTIVE_CONFIG__=o(n,globalThis.__TEMPLATE_CONFIG__||{})),globalThis.__PERSPECTIVE_CONFIG__}})),f={};((e,t)=>{for(var n in d(e),t)i(e,n,{get:t[n],enumerable:!0})})(f,{COLUMN_SEPARATOR_STRING:()=>N,CONFIG_ALIASES:()=>m,CONFIG_VALID_KEYS:()=>y,DATA_TYPES:()=>b,FILTER_OPERATORS:()=>A,SORT_ORDERS:()=>x,SORT_ORDER_IDS:()=>k,TYPE_AGGREGATES:()=>S,TYPE_FILTERS:()=>L});var b={integer:"integer",float:"float",string:"string",boolean:"boolean",date:"date",datetime:"datetime",object:"object"},m={row_pivot:"group_by","row-pivot":"group_by","row-pivots":"group_by",col_pivot:"split_by",col_pivots:"split_by",column_pivot:"split_by","column-pivot":"split_by","column-pivots":"split_by",filters:"filter",sorts:"sort"},y=["viewport","group_by","split_by","aggregates","columns","filter","sort","computed_columns","expressions","group_by_depth","split_by_depth","filter_op"],w=["any","avg","abs sum","count","distinct count","dominant","first by index","last by index","last minus first","last","high","join","low","high minus low","mean","median","pct sum parent","pct sum grand total","stddev","sum","sum abs","sum not null","unique","var"],v=["any","count","distinct count","distinct leaf","dominant","first by index","join","last by index","last","unique"],x=["none","asc","desc","col asc","col desc","asc abs","desc abs","col asc abs","col desc abs"],k=[2,0,1,0,1,3,4,3,4],S={string:v,float:w,integer:w,boolean:["any","count","distinct count","distinct leaf","dominant","first by index","last by index","last","unique"],datetime:v,date:v},A={lessThan:"<",greaterThan:">",equals:"==",lessThanOrEquals:"<=",greaterThanOrEquals:">=",doesNotEqual:"!=",isNull:"is null",isNotNull:"is not null",isIn:"in",isNotIn:"not in",contains:"contains",bitwiseAnd:"&",bitwiseOr:"|",and:"and",or:"or",beginsWith:"begins with",endsWith:"ends with"},C=[A.bitwiseAnd,A.bitwiseOr,A.equals,A.doesNotEqual,A.or,A.and,A.isNull,A.isNotNull],E=[A.lessThan,A.greaterThan,A.equals,A.lessThanOrEquals,A.greaterThanOrEquals,A.doesNotEqual,A.isNull,A.isNotNull],V=[A.equals,A.contains,A.doesNotEqual,A.isIn,A.isNotIn,A.beginsWith,A.endsWith,A.isNull,A.isNotNull],P=[A.lessThan,A.greaterThan,A.equals,A.lessThanOrEquals,A.greaterThanOrEquals,A.doesNotEqual,A.isNull,A.isNotNull],N="|",L={string:V,float:E,integer:E,boolean:C,datetime:P,date:P},T=_(h()),M=new WeakMap,O=0;function R(e,t){return function(){let n,r=()=>{},o=Array.prototype.slice.call(arguments,0,arguments.length);for(let e=o.length-1;e>=0;e--)"function"==typeof o[e]&&(n=o.splice(e,1)[0]);let a=M.get(n);M.delete(n);let i={cmd:t||"view_method",name:this._name,method:e,args:o,subscribe:!0,callback_id:a};this._worker.post(i,n,r),this._worker.unsubscribe(t,n)}}function z(e,t){return function(){let n,r=()=>{},o=Array.prototype.slice.call(arguments,0,arguments.length);for(let e=o.length-1;e>=0;e--)"function"==typeof o[e]&&(n=o.splice(e,1)[0]);O++,M.set(n,O);let a={cmd:t||"view_method",name:this._name,method:e,args:o,subscribe:!0,callback_id:O};this._worker.post(a,n,r,!0)}}function D(e,t){return function(){var n=Array.prototype.slice.call(arguments,0,arguments.length);return new Promise(function(r,o){var a={cmd:t||"view_method",name:this._name,method:e,args:n,subscribe:!1};this._worker.post(a,r,o)}.bind(this))}}function Y(e,t,n){return new Promise(((r,o)=>{this._worker=e,this._name=Math.random()+"",this._worker.post({cmd:"view",view_name:this._name,table_name:t,config:n},(()=>{r(this)}),o),!0===this._worker._initialized&&!this._worker._features?.wait_for_response&&r(this)}))}function B(e){let t=e;do{for(let n of Object.getOwnPropertyNames(t)){let t=e[n];"constructor"!==n&&"function"==typeof t&&(e[n]=t.bind(e))}}while(t=t!==Object&&Object.getPrototypeOf(t))}function $(e,t,n){return new Promise(((r,o)=>{this._worker=e,this._name=n.name||Math.random()+"",B(this),t.to_arrow?(this._worker.post({cmd:"table",name:this._name,args:[],options:n||{}}),t.to_arrow().then((e=>{this._worker.post({cmd:"table",name:this._name,args:[e],options:n||{}},(()=>{t.on_update((e=>{this.update(e.delta)}),{mode:"row"}),r(this)}),o)}))):this._worker.post({cmd:"table",name:this._name,args:[t],options:n||{}},(()=>{r(this)}),o),!0===this._worker._initialized&&!this._worker._features?.wait_for_response&&r(this)}))}function j(e,t){this._worker=e,this._name=t}Y.prototype,Y.prototype.get_config=D("get_config"),Y.prototype.get_min_max=D("get_min_max"),Y.prototype.to_json=D("to_json"),Y.prototype.to_arrow=D("to_arrow"),Y.prototype.to_columns=D("to_columns"),Y.prototype.to_csv=D("to_csv"),Y.prototype.schema=D("schema"),Y.prototype.expression_schema=D("expression_schema"),Y.prototype.column_paths=D("column_paths"),Y.prototype.num_columns=D("num_columns"),Y.prototype.num_rows=D("num_rows"),Y.prototype.set_depth=D("set_depth"),Y.prototype.get_row_expanded=D("get_row_expanded"),Y.prototype.expand=D("expand"),Y.prototype.collapse=D("collapse"),Y.prototype.delete=D("delete"),Y.prototype.col_to_js_typed_array=D("col_to_js_typed_array"),Y.prototype.on_update=z("on_update","view_method"),Y.prototype.remove_update=R("remove_update","view_method"),Y.prototype.on_delete=z("on_delete","view_method"),Y.prototype.remove_delete=R("remove_delete","view_method"),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o,a,i=0|t,l=Math.max(i>=0?i:r-Math.abs(i),0);for(;l<r;){if((o=n[l])===(a=e)||"number"==typeof o&&"number"==typeof a&&isNaN(o)&&isNaN(a))return!0;l++}return!1}}),$.prototype.type="table",j.prototype=$.prototype,$.prototype.view=function(e){return new Y(this._worker,this._name,e)},$.prototype.get_index=D("get_index","table_method"),$.prototype.get_limit=D("get_limit","table_method"),$.prototype.make_port=D("make_port","table_method"),$.prototype.remove_port=D("remove_port","table_method"),$.prototype.schema=D("schema","table_method"),$.prototype.validate_expressions=D("validate_expressions","table_method"),$.prototype.is_valid_filter=D("is_valid_filter","table_method"),$.prototype.size=D("size","table_method"),$.prototype.columns=D("columns","table_method"),$.prototype.clear=D("clear","table_method"),$.prototype.replace=D("replace","table_method"),$.prototype.delete=D("delete","table_method"),$.prototype.on_delete=z("on_delete","table_method"),$.prototype.remove=D("remove","table_method"),$.prototype.remove_delete=R("remove_delete","table_method"),$.prototype.update=function(e,t){return new Promise(((n,r)=>{this._worker.post({name:this._name,cmd:"table_method",method:"update",args:[e,t||{}]},n,r,!1)}))},$.prototype.execute=function(e){this._worker.post({cmd:"table_execute",name:this._name,f:e.toString()})};var I=class{constructor(){this._initialized=!1,this._worker={initialized:{value:!1},transferable:!1,msg_id:0,handlers:{},messages:[]},B(this)}unsubscribe(e,t){for(let n of Object.keys(this._worker.handlers))this._worker.handlers[n].resolve===t&&delete this._worker.handlers[n]}post(e,t,n,r){void 0===r&&(r=!1),++this._worker.msg_id,(t||n)&&(this._worker.handlers[this._worker.msg_id]={resolve:t,reject:n,keep_alive:r}),e.id=this._worker.msg_id,this._worker.initialized.value?this.send(e):this._worker.messages.push((()=>{this.send(e),("table"===e.cmd||"view"===e.cmd)&&!this._features?.wait_for_response&&t&&t()}))}async memory_usage(){return await new Promise(((e,t)=>{this.post({cmd:"memory_usage"},e,t)}))}initialize_profile_thread(){this._worker.initialized.value?this.send({id:-1,cmd:"init_profile_thread"}):this._worker.messages.push((()=>this.send({id:-1,cmd:"init_profile_thread"})))}send(){throw new Error("send() not implemented")}async open_table(e){return new j(this,e)}_handle(e){if(!this._worker.initialized.value){if(!this._initialized&&"undefined"!=typeof document&&document&&void 0!==typeof window&&window){try{let e=document.createEvent("Event");e.initEvent("perspective-ready",!1,!0),window.dispatchEvent(e)}catch{}this._initialized=!0}let t=this._worker.messages;if(this._worker.initialized.value=!0,this._worker.messages=[],e.data?.data){this._features={};for(let t of e.data.data)this._features[t]=!0}if(t)for(let e in t)t.hasOwnProperty(e)&&t[e]()}if(e.data.id){let t=this._worker.handlers[e.data.id];t&&(e.data.error?t.reject(e.data.error):t.resolve(e.data.data),t.keep_alive||delete this._worker.handlers[e.data.id])}}table(e,t){return new $(this,e,t||{})}terminate(){this._worker.terminate(),this._worker=void 0}},F=class extends I{constructor(e){super(),this._ws=e,this._ws.binaryType="arraybuffer",this._full_binary,this._total_chunk_length=0,this._pending_binary_length=0,this._ws.onopen=()=>{this.send({id:-1,cmd:"init"})};let t=()=>{this._ws.send("ping"),setTimeout(t,3e4)};setTimeout(t,3e4),this._ws.onmessage=e=>{if("pong"!==e.data)if(this._pending_binary){let t=e.data;if(this._full_binary.set(new Uint8Array(t),this._total_chunk_length),this._total_chunk_length+=t.byteLength,this._total_chunk_length!==this._pending_binary_length)return;t=this._full_binary.buffer;let n={data:{id:this._pending_binary,data:t}};if(void 0!==this._pending_port_id){let e={port_id:this._pending_port_id,delta:t};n.data.data=e}this._handle(n),delete this._pending_binary,delete this._pending_binary_length,delete this._pending_port_id,this._total_chunk_length=0,this._full_binary=null}else(e=JSON.parse(e.data)).binary_length?(this._pending_binary=e.id,this._pending_binary_length=e.binary_length,e.data&&void 0!==e.data.port_id&&(this._pending_port_id=e.data.port_id),this._full_binary=new Uint8Array(this._pending_binary_length)):this._handle({data:e})}}send(e){if(e.args&&e.args.length>0&&e.args[0]instanceof ArrayBuffer&&void 0!==e.args[0].byteLength){let t=e;return e.binary_length=e.args[0].byteLength,this._ws.send(JSON.stringify(t)),void this._ws.send(e.args[0])}this._ws.send(JSON.stringify(e))}terminate(){return new Promise((e=>{this._ws.onclose=e,this._ws.close()}))}},H=_(h());function W(e){return 559903==new Uint32Array(e.slice(0,4))[0]}var U=function(){let e;return function(){return e||(e=new class{async worker(){return await new Worker(n.p+"perspective.worker.js")}async wasm(){let e=await o,t=[],n=0,a=new r.Q1((e=>{e&&(n+=e.byteLength,t.push(e))}));if(e.buffer&&e.buffer instanceof ArrayBuffer)console.info('Perspective has been compiled in "inline" mode.'),W(e.buffer)?a.push(e,!0):(n=e.byteLength,t=[e]);else if(e instanceof ArrayBuffer)n=e.byteLength,t=[new Uint8Array(e)];else{let r=(await fetch(e)).body.getReader(),o=0;for(;;){let{value:e,done:i}=await r.read();if(i)break;0===o&&W(e.buffer)||1===o?(o=1,a.push(e,i)):(o=2,n+=e.byteLength,t.push(e))}}let i=0,l=new Uint8Array(n);for(let r of t)l.set(r,i),i+=r.byteLength;return this._wasm=l.buffer,this._wasm}}),e}}(),X=class extends I{constructor(e){e&&(0,H.override_config)(e),super(),this.register()}async register(){let e,t={cmd:"init",config:(0,T.get_config)()};if("undefined"==typeof WebAssembly)throw new Error("WebAssembly not supported.");for(var n in[e,t.buffer]=await Promise.all([U().worker(),U().wasm()]),this._worker)e[n]=this._worker[n];this._worker=e,this._worker.addEventListener("message",this._handle.bind(this)),this._worker.postMessage(t),this._detect_transferable()}send(e){this._worker.transferable&&e.args&&e.args[0]instanceof ArrayBuffer?this._worker.postMessage(e,[e.args[0]]):this._worker.postMessage(e)}terminate(){this._worker.terminate(),this._worker=void 0}_detect_transferable(){var e=new ArrayBuffer(1);this._worker.postMessage(e,[e]),this._worker.transferable=0===e.byteLength,this._worker.transferable?console.debug("Transferable support detected"):console.warn("Transferable support not detected")}},q=function(){let e,t;return{getInstance:function(n){void 0===e&&(e=new X(n));let r=JSON.stringify(n);if(t&&r!==t)throw new Error("Configuration object for shared_worker() has changed - this is probably a bug in your application.");return t=r,e}}}();T.get_type_config;var Z={override:function(e){return U().set(e)},worker:function(e){return new X(e)},websocket:function(e){return void 0===e&&(e=window.location.origin.replace("http","ws")),new F(new WebSocket(e))},shared_worker:function(e){return q.getInstance(e)},...Object.keys(f)}},6306:function(e){e.exports.Z={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short",timeStyle:"medium"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{dateStyle:"short"},null_value:-1}}}},8963:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,{CopyDropDownMenuElement:function(){return H},ExportDropDownMenuElement:function(){return W},ExpressionEditorElement:function(){return U},FilterDropDownElement:function(){return X},FunctionDropDownElement:function(){return q},PerspectiveDateColumnStyleElement:function(){return Z},PerspectiveDatetimeColumnStyleElement:function(){return G},PerspectiveDebugPluginElement:function(){return K},PerspectiveNumberColumnStyleElement:function(){return J},PerspectiveStringColumnStyleElement:function(){return Q},PerspectiveViewerElement:function(){return ee},default:function(){return ae},defineWebComponents:function(){return F},getExprTKCommands:function(){return I},initSync:function(){return re},registerPlugin:function(){return $}});n(5238);const o=window.ClipboardItem,a=window.ResizeObserver;let i;const l=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});l.decode();let s=new Uint8Array;function c(){return 0===s.byteLength&&(s=new Uint8Array(i.memory.buffer)),s}function u(e,t){return l.decode(c().subarray(e,e+t))}const d=new Array(32).fill(void 0);d.push(void 0,null,!0,!1);let g=d.length;function _(e){g===d.length&&d.push(d.length+1);const t=g;return g=d[t],d[t]=e,t}function p(e){return d[e]}let h=0;const f=new TextEncoder("utf-8"),b="function"==typeof f.encodeInto?function(e,t){return f.encodeInto(e,t)}:function(e,t){const n=f.encode(e);return t.set(n),{read:e.length,written:n.length}};function m(e,t,n){if(void 0===n){const n=f.encode(e),r=t(n.length);return c().subarray(r,r+n.length).set(n),h=n.length,r}let r=e.length,o=t(r);const a=c();let i=0;for(;i<r;i++){const t=e.charCodeAt(i);if(t>127)break;a[o+i]=t}if(i!==r){0!==i&&(e=e.slice(i)),o=n(o,r,r=i+3*e.length);const t=c().subarray(o+i,o+r);i+=b(e,t).written}return h=i,o}let y=new Int32Array;function w(){return 0===y.byteLength&&(y=new Int32Array(i.memory.buffer)),y}function v(e){return null==e}let x=new Float64Array;function k(){return 0===x.byteLength&&(x=new Float64Array(i.memory.buffer)),x}function S(e){const t=p(e);return function(e){e<36||(d[e]=g,g=e)}(e),t}function A(e,t,n,r){const o={a:e,b:t,cnt:1,dtor:n},a=function(){o.cnt++;try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(o.a,o.b,...t)}finally{0==--o.cnt&&(i.__wbindgen_export_2.get(o.dtor)(o.a,o.b),o.a=0)}};return a.original=o,a}function C(e,t,n){i.__wbindgen_export_3(e,t,_(n))}function E(e,t,n,r){const o={a:e,b:t,cnt:1,dtor:n},a=function(){o.cnt++;const e=o.a;o.a=0;try{for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r(e,o.b,...n)}finally{0==--o.cnt?i.__wbindgen_export_2.get(o.dtor)(e,o.b):o.a=e}};return a.original=o,a}function V(e,t,n){i.__wbindgen_export_4(e,t,_(n))}function P(e,t,n){return S(i.__wbindgen_export_5(e,t,_(n)))}function N(e,t,n){i.__wbindgen_export_6(e,t,_(n))}function L(e,t){try{const r=i.__wbindgen_add_to_stack_pointer(-16);i.__wbindgen_export_7(r,e,t);var n=w()[r/4+0];if(w()[r/4+1])throw S(n)}finally{i.__wbindgen_add_to_stack_pointer(16)}}function T(e,t,n){i.__wbindgen_export_8(e,t,_(n))}function M(e,t){i.__wbindgen_export_9(e,t)}function O(e,t,n){i.__wbindgen_export_10(e,t,_(n))}let R=32;function z(e,t,n){try{i.__wbindgen_export_11(e,t,function(e){if(1==R)throw new Error("out of js stack");return d[--R]=e,R}(n))}finally{d[R++]=void 0}}let D=new Uint32Array;function Y(){return 0===D.byteLength&&(D=new Uint32Array(i.memory.buffer)),D}function B(e,t){try{return e.apply(this,t)}catch(n){i.__wbindgen_export_13(_(n))}}function $(e){const t=m(e,i.__wbindgen_export_0,i.__wbindgen_export_1),n=h;i.registerPlugin(t,n)}function j(e,t){const n=Y().subarray(e/4,e/4+t),r=[];for(let o=0;o<n.length;o++)r.push(S(n[o]));return r}function I(){try{const o=i.__wbindgen_add_to_stack_pointer(-16);i.getExprTKCommands(o);var e=w()[o/4+0],t=w()[o/4+1],n=w()[o/4+2];if(w()[o/4+3])throw S(n);var r=j(e,t).slice();return i.__wbindgen_export_12(e,4*t),r}finally{i.__wbindgen_add_to_stack_pointer(16)}}function F(){i.defineWebComponents()}class H{static __wrap(e){const t=Object.create(H.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_copydropdownmenuelement_free(e)}constructor(e){const t=i.copydropdownmenuelement_new(_(e));return H.__wrap(t)}open(e){i.copydropdownmenuelement_open(this.ptr,_(e))}hide(){try{const t=i.__wbindgen_add_to_stack_pointer(-16);i.copydropdownmenuelement_hide(t,this.ptr);var e=w()[t/4+0];if(w()[t/4+1])throw S(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}unsafe_set_model(e){i.copydropdownmenuelement_unsafe_set_model(this.ptr,e)}connected_callback(){i.copydropdownmenuelement_connected_callback(this.ptr)}}class W{static __wrap(e){const t=Object.create(W.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_exportdropdownmenuelement_free(e)}constructor(e){const t=i.copydropdownmenuelement_new(_(e));return W.__wrap(t)}open(e){i.exportdropdownmenuelement_open(this.ptr,_(e))}hide(){try{const t=i.__wbindgen_add_to_stack_pointer(-16);i.copydropdownmenuelement_hide(t,this.ptr);var e=w()[t/4+0];if(w()[t/4+1])throw S(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}unsafe_set_model(e){i.exportdropdownmenuelement_unsafe_set_model(this.ptr,e)}connected_callback(){i.copydropdownmenuelement_connected_callback(this.ptr)}}class U{__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_expressioneditorelement_free(e)}}class X{__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_filterdropdownelement_free(e)}}class q{__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_functiondropdownelement_free(e)}}class Z{static __wrap(e){const t=Object.create(Z.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_perspectivedatecolumnstyleelement_free(e)}constructor(e){const t=i.perspectivedatecolumnstyleelement_new(_(e));return Z.__wrap(t)}reset(e){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedatecolumnstyleelement_reset(n,this.ptr,_(e));var t=w()[n/4+0];if(w()[n/4+1])throw S(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}open(e,t,n){try{const o=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedatecolumnstyleelement_open(o,this.ptr,_(e),_(t),_(n));var r=w()[o/4+0];if(w()[o/4+1])throw S(r)}finally{i.__wbindgen_add_to_stack_pointer(16)}}close(){try{const t=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedatecolumnstyleelement_close(t,this.ptr);var e=w()[t/4+0];if(w()[t/4+1])throw S(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}destroy(){try{const t=this.__destroy_into_raw(),n=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedatecolumnstyleelement_destroy(n,t);var e=w()[n/4+0];if(w()[n/4+1])throw S(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}connected_callback(){i.copydropdownmenuelement_connected_callback(this.ptr)}}class G{static __wrap(e){const t=Object.create(G.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_perspectivedatetimecolumnstyleelement_free(e)}constructor(e){const t=i.perspectivedatecolumnstyleelement_new(_(e));return G.__wrap(t)}reset(e){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedatecolumnstyleelement_reset(n,this.ptr,_(e));var t=w()[n/4+0];if(w()[n/4+1])throw S(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}open(e,t,n){try{const o=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedatetimecolumnstyleelement_open(o,this.ptr,_(e),_(t),_(n));var r=w()[o/4+0];if(w()[o/4+1])throw S(r)}finally{i.__wbindgen_add_to_stack_pointer(16)}}close(){try{const t=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedatecolumnstyleelement_close(t,this.ptr);var e=w()[t/4+0];if(w()[t/4+1])throw S(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}destroy(){try{const t=this.__destroy_into_raw(),n=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedatecolumnstyleelement_destroy(n,t);var e=w()[n/4+0];if(w()[n/4+1])throw S(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}connected_callback(){i.copydropdownmenuelement_connected_callback(this.ptr)}}class K{static __wrap(e){const t=Object.create(K.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_perspectivedebugpluginelement_free(e)}constructor(e){const t=i.perspectivedebugpluginelement_new(_(e));return K.__wrap(t)}get name(){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedebugpluginelement_name(n,this.ptr);var e=w()[n/4+0],t=w()[n/4+1];return u(e,t)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_export_12(e,t)}}get select_mode(){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedebugpluginelement_select_mode(n,this.ptr);var e=w()[n/4+0],t=w()[n/4+1];return u(e,t)}finally{i.__wbindgen_add_to_stack_pointer(16),i.__wbindgen_export_12(e,t)}}get min_config_columns(){return S(i.perspectivedebugpluginelement_config_column_names(this.ptr))}get config_column_names(){return S(i.perspectivedebugpluginelement_config_column_names(this.ptr))}update(e){return S(i.perspectivedebugpluginelement_draw(this.ptr,_(e)))}draw(e){return S(i.perspectivedebugpluginelement_draw(this.ptr,_(e)))}clear(){return S(i.perspectivedebugpluginelement_clear(this.ptr))}resize(){return S(i.perspectivedebugpluginelement_clear(this.ptr))}restyle(){return S(i.perspectivedebugpluginelement_clear(this.ptr))}save(){return S(i.perspectivedebugpluginelement_clear(this.ptr))}restore(){return S(i.perspectivedebugpluginelement_clear(this.ptr))}delete(){return S(i.perspectivedebugpluginelement_clear(this.ptr))}connectedCallback(){i.copydropdownmenuelement_connected_callback(this.ptr)}}class J{static __wrap(e){const t=Object.create(J.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_perspectivenumbercolumnstyleelement_free(e)}constructor(e){const t=i.perspectivedatecolumnstyleelement_new(_(e));return J.__wrap(t)}reset(e,t){try{const r=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivenumbercolumnstyleelement_reset(r,this.ptr,_(e),_(t));var n=w()[r/4+0];if(w()[r/4+1])throw S(n)}finally{i.__wbindgen_add_to_stack_pointer(16)}}open(e,t,n){try{const o=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivenumbercolumnstyleelement_open(o,this.ptr,_(e),_(t),_(n));var r=w()[o/4+0];if(w()[o/4+1])throw S(r)}finally{i.__wbindgen_add_to_stack_pointer(16)}}close(){try{const t=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedatecolumnstyleelement_close(t,this.ptr);var e=w()[t/4+0];if(w()[t/4+1])throw S(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}destroy(){try{const t=this.__destroy_into_raw(),n=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivenumbercolumnstyleelement_destroy(n,t);var e=w()[n/4+0];if(w()[n/4+1])throw S(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}connected_callback(){i.copydropdownmenuelement_connected_callback(this.ptr)}}class Q{static __wrap(e){const t=Object.create(Q.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_perspectivestringcolumnstyleelement_free(e)}constructor(e){const t=i.perspectivedatecolumnstyleelement_new(_(e));return Q.__wrap(t)}reset(e){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivestringcolumnstyleelement_reset(n,this.ptr,_(e));var t=w()[n/4+0];if(w()[n/4+1])throw S(t)}finally{i.__wbindgen_add_to_stack_pointer(16)}}open(e,t,n){try{const o=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivestringcolumnstyleelement_open(o,this.ptr,_(e),_(t),_(n));var r=w()[o/4+0];if(w()[o/4+1])throw S(r)}finally{i.__wbindgen_add_to_stack_pointer(16)}}close(){try{const t=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivedatecolumnstyleelement_close(t,this.ptr);var e=w()[t/4+0];if(w()[t/4+1])throw S(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}destroy(){try{const t=this.__destroy_into_raw(),n=i.__wbindgen_add_to_stack_pointer(-16);i.perspectivestringcolumnstyleelement_destroy(n,t);var e=w()[n/4+0];if(w()[n/4+1])throw S(e)}finally{i.__wbindgen_add_to_stack_pointer(16)}}connected_callback(){i.copydropdownmenuelement_connected_callback(this.ptr)}}class ee{static __wrap(e){const t=Object.create(ee.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();i.__wbg_perspectiveviewerelement_free(e)}constructor(e){const t=i.perspectiveviewerelement_new(_(e));return ee.__wrap(t)}connectedCallback(){i.copydropdownmenuelement_connected_callback(this.ptr)}load(e){return S(i.perspectiveviewerelement_load(this.ptr,_(e)))}delete(){return S(i.perspectiveviewerelement_delete(this.ptr))}getView(){return S(i.perspectiveviewerelement_getView(this.ptr))}getTable(e){return S(i.perspectiveviewerelement_getTable(this.ptr,v(e)?16777215:e?1:0))}flush(){return S(i.perspectiveviewerelement_flush(this.ptr))}restore(e){return S(i.perspectiveviewerelement_restore(this.ptr,_(e)))}save(e){var t=v(e)?0:m(e,i.__wbindgen_export_0,i.__wbindgen_export_1),n=h;return S(i.perspectiveviewerelement_save(this.ptr,t,n))}download(e){return S(i.perspectiveviewerelement_download(this.ptr,v(e)?16777215:e?1:0))}copy(e){return S(i.perspectiveviewerelement_copy(this.ptr,v(e)?16777215:e?1:0))}reset(e){return S(i.perspectiveviewerelement_reset(this.ptr,v(e)?16777215:e?1:0))}notifyResize(e){return S(i.perspectiveviewerelement_notifyResize(this.ptr,v(e)?16777215:e?1:0))}setAutoSize(e){i.perspectiveviewerelement_setAutoSize(this.ptr,e)}getEditPort(){try{const n=i.__wbindgen_add_to_stack_pointer(-16);i.perspectiveviewerelement_getEditPort(n,this.ptr);var e=k()[n/8+0],t=w()[n/4+2];if(w()[n/4+3])throw S(t);return e}finally{i.__wbindgen_add_to_stack_pointer(16)}}restyleElement(){return S(i.perspectiveviewerelement_restyleElement(this.ptr))}resetThemes(e){var t=v(e)?0:function(e,t){const n=t(4*e.length),r=Y();for(let o=0;o<e.length;o++)r[n/4+o]=_(e[o]);return h=e.length,n}(e,i.__wbindgen_export_0),n=h;return S(i.perspectiveviewerelement_resetThemes(this.ptr,t,n))}setThrottle(e){i.perspectiveviewerelement_setThrottle(this.ptr,!v(e),v(e)?0:e)}toggleConfig(e){return S(i.perspectiveviewerelement_toggleConfig(this.ptr,v(e)?16777215:e?1:0))}getAllPlugins(){return S(i.perspectiveviewerelement_getAllPlugins(this.ptr))}getPlugin(e){try{const a=i.__wbindgen_add_to_stack_pointer(-16);var t=v(e)?0:m(e,i.__wbindgen_export_0,i.__wbindgen_export_1),n=h;i.perspectiveviewerelement_getPlugin(a,this.ptr,t,n);var r=w()[a/4+0],o=w()[a/4+1];if(w()[a/4+2])throw S(o);return S(r)}finally{i.__wbindgen_add_to_stack_pointer(16)}}unsafeGetModel(){return i.perspectiveviewerelement_unsafeGetModel(this.ptr)}}function te(){const e={wbg:{}};return e.wbg.__wbindgen_json_parse=function(e,t){return _(JSON.parse(u(e,t)))},e.wbg.__wbindgen_json_serialize=function(e,t){const n=p(t),r=m(JSON.stringify(void 0===n?null:n),i.__wbindgen_export_0,i.__wbindgen_export_1),o=h;w()[e/4+1]=o,w()[e/4+0]=r},e.wbg.__wbindgen_number_get=function(e,t){const n=p(t),r="number"==typeof n?n:void 0;k()[e/8+1]=v(r)?0:r,w()[e/4+0]=!v(r)},e.wbg.__wbindgen_string_get=function(e,t){const n=p(t),r="string"==typeof n?n:void 0;var o=v(r)?0:m(r,i.__wbindgen_export_0,i.__wbindgen_export_1),a=h;w()[e/4+1]=a,w()[e/4+0]=o},e.wbg.__wbindgen_string_new=function(e,t){return _(u(e,t))},e.wbg.__wbg_supportedValuesOf_07e827fc6166324f=function(e){return _(Intl.supportedValuesOf(p(e)))},e.wbg.__wbg_static_accessor_PSP_0daf231f9f6effab=function(){return _(r)},e.wbg.__wbindgen_object_drop_ref=function(e){S(e)},e.wbg.__wbindgen_object_clone_ref=function(e){return _(p(e))},e.wbg.__wbindgen_cb_drop=function(e){const t=S(e).original;if(1==t.cnt--)return t.a=0,!0;return!1},e.wbg.__wbindgen_boolean_get=function(e){const t=p(e);return"boolean"==typeof t?t?1:0:2},e.wbg.__wbg_restore_cbde0fcbdecfb1f9=function(e,t){p(e).restore(p(t))},e.wbg.__wbindgen_is_string=function(e){return"string"==typeof p(e)},e.wbg.__wbindgen_is_null=function(e){return null===p(e)},e.wbg.__wbg_numcolumns_94b9aa865e02a465=function(){return B((function(e){return _(p(e).num_columns())}),arguments)},e.wbg.__wbg_update_c91d3e2006fd882b=function(){return B((function(e,t,n,r,o,a,i){return _(p(e).update(p(t),0===n?void 0:r>>>0,0===o?void 0:a>>>0,0!==i))}),arguments)},e.wbg.__wbg_draw_2db0d76ca3c02b6a=function(){return B((function(e,t,n,r,o,a,i){return _(p(e).draw(p(t),0===n?void 0:r>>>0,0===o?void 0:a>>>0,0!==i))}),arguments)},e.wbg.__wbg_delete_df43b181a493e51f=function(e){p(e).delete()},e.wbg.__wbg_setrenderwarning_8f4b07e4540a648c=function(e,t){p(e).render_warning=0!==t},e.wbg.__wbg_columns_574fb8d1d88d6639=function(){return B((function(e){return _(p(e).columns())}),arguments)},e.wbg.__wbg_schema_452728fca78e391d=function(){return B((function(e){return _(p(e).schema())}),arguments)},e.wbg.__wbg_makeport_0768af66455fe800=function(){return B((function(e){return _(p(e).make_port())}),arguments)},e.wbg.__wbg_tocolumns_f7e6175fffb1c757=function(){return B((function(e){return _(p(e).to_columns())}),arguments)},e.wbg.__wbg_new_ba56df444da9f151=function(e){return _(new o(p(e)))},e.wbg.__wbg_onupdate_b5953f00609d94c0=function(e,t){p(e).on_update(p(t))},e.wbg.__wbg_removeupdate_dd07562a1224dd30=function(e,t){p(e).remove_update(p(t))},e.wbg.__wbg_errors_ba315aa99b0cd788=function(e){return _(p(e).errors)},e.wbg.__wbg_expressionschema_49096a1cb404abab=function(e){return _(p(e).expression_schema)},e.wbg.__wbg_expressionalias_2c4e25965b5c076f=function(e){return _(p(e).expression_alias)},e.wbg.__wbg_validateexpressions_f9b1bfbcc8d04d4d=function(){return B((function(e,t){return _(p(e).validate_expressions(S(t)))}),arguments)},e.wbg.__wbg_view_13536ccc7efdd2c7=function(){return B((function(e,t){return _(p(e).view(p(t)))}),arguments)},e.wbg.__wbg_size_10406549c7b0b45e=function(){return B((function(e){return _(p(e).size())}),arguments)},e.wbg.__wbg_tocsv_7f20e23dd854ef6d=function(){return B((function(e,t){return _(p(e).to_csv(S(t)))}),arguments)},e.wbg.__wbg_toarrow_467f53e3457f1403=function(){return B((function(e){return _(p(e).to_arrow())}),arguments)},e.wbg.__wbg_numrows_b342f6b4487853a2=function(){return B((function(e){return _(p(e).num_rows())}),arguments)},e.wbg.__wbg_schema_be7dadaa217a0206=function(){return B((function(e){return _(p(e).schema())}),arguments)},e.wbg.__wbg_delete_26ee7c89838f4076=function(){return B((function(e){return _(p(e).delete())}),arguments)},e.wbg.__wbg_name_5d5ae14f3cd8b882=function(e,t){const n=m(p(t).name,i.__wbindgen_export_0,i.__wbindgen_export_1),r=h;w()[e/4+1]=r,w()[e/4+0]=n},e.wbg.__wbg_category_9b0a7346523ee30e=function(e,t){const n=p(t).category;var r=v(n)?0:m(n,i.__wbindgen_export_0,i.__wbindgen_export_1),o=h;w()[e/4+1]=o,w()[e/4+0]=r},e.wbg.__wbg_maxcolumns_81b6dffadae4e33c=function(e,t){const n=p(t).max_columns;w()[e/4+1]=v(n)?0:n,w()[e/4+0]=!v(n)},e.wbg.__wbg_maxcells_3ae70b1449df47bf=function(e,t){const n=p(t).max_cells;w()[e/4+1]=v(n)?0:n,w()[e/4+0]=!v(n)},e.wbg.__wbg_renderwarning_befd1ec3fa48735e=function(e){const t=p(e).render_warning;return v(t)?16777215:t?1:0},e.wbg.__wbg_selectmode_5abef57699c28d2e=function(e){return _(p(e).select_mode)},e.wbg.__wbg_minconfigcolumns_55ab1ea18bd7f62d=function(e,t){const n=p(t).min_config_columns;w()[e/4+1]=v(n)?0:n,w()[e/4+0]=!v(n)},e.wbg.__wbg_configcolumnnames_c246820ad7817257=function(e){const t=p(e).config_column_names;return v(t)?0:_(t)},e.wbg.__wbg_priority_fdb0ec1f990980c9=function(e,t){const n=p(t).priority;w()[e/4+1]=v(n)?0:n,w()[e/4+0]=!v(n)},e.wbg.__wbg_save_98b6a766bc5be88e=function(e){return _(p(e).save())},e.wbg.__wbg_restyle_6150ee3c3f642813=function(){return B((function(e,t){return _(p(e).restyle(p(t)))}),arguments)},e.wbg.__wbg_resize_894f0cf48b7410ab=function(){return B((function(e){return _(p(e).resize())}),arguments)},e.wbg.__wbg_new_e50e1fd18d495d8d=function(e){return _(new a(p(e)))},e.wbg.__wbg_observe_4152692f55664ef8=function(e,t){p(e).observe(p(t))},e.wbg.__wbg_unobserve_cf31bb333c639394=function(e,t){p(e).unobserve(p(t))},e.wbg.__wbg_contentRect_5af3890f0ae5a940=function(e){return _(p(e).contentRect)},e.wbg.__wbg_bootstrap_b751b9b61473d88f=function(e,t,n,r,o,a){const i=function(e,t,n,r){const o=e[n],a=o.prototype;class i extends HTMLElement{constructor(){super(),this._instance=new o(this)}}const l=Object.getOwnPropertyNames(a);for(const s of l)"get"in Object.getOwnPropertyDescriptor(a,s)?Object.defineProperty(i.prototype,s,{get:function(){return this._instance[s]}}):Object.defineProperty(i.prototype,s,{value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._instance[s].call(this._instance,...t)}});for(const s of r)Object.defineProperty(i,s,{value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[s].call(e,...n)}});customElements.define(t,i)}(p(e),u(t,n),u(r,o),S(a));return _(i)},e.wbg.__wbg_mark_abc7631bdced64f0=function(e,t){performance.mark(u(e,t))},e.wbg.__wbg_measure_c528ff64085b7146=function(){return B((function(e,t,n,r){try{performance.measure(u(e,t),u(n,r))}finally{i.__wbindgen_export_12(e,t),i.__wbindgen_export_12(n,r)}}),arguments)},e.wbg.__wbg_log_02e20a3c32305fb7=function(e,t){try{console.log(u(e,t))}finally{i.__wbindgen_export_12(e,t)}},e.wbg.__wbg_log_5c7513aa8c164502=function(e,t,n,r,o,a,l,s){try{console.log(u(e,t),u(n,r),u(o,a),u(l,s))}finally{i.__wbindgen_export_12(e,t)}},e.wbg.__wbindgen_number_new=function(e){return _(e)},e.wbg.__wbg_listenerid_6c59c2efd53f110b=function(e,t){const n=p(t).__yew_listener_id;w()[e/4+1]=v(n)?0:n,w()[e/4+0]=!v(n)},e.wbg.__wbg_setlistenerid_bd2a96e18b199f60=function(e,t){p(e).__yew_listener_id=t>>>0},e.wbg.__wbg_setsubtreeid_c53160380763026a=function(e,t){p(e).__yew_subtree_id=t>>>0},e.wbg.__wbg_setcachekey_4f4d2c31a4a93a0a=function(e,t){p(e).__yew_subtree_cache_key=t>>>0},e.wbg.__wbg_subtreeid_3e280a6b70fca3cb=function(e,t){const n=p(t).__yew_subtree_id;w()[e/4+1]=v(n)?0:n,w()[e/4+0]=!v(n)},e.wbg.__wbg_cachekey_579e004548d46a78=function(e,t){const n=p(t).__yew_subtree_cache_key;w()[e/4+1]=v(n)?0:n,w()[e/4+0]=!v(n)},e.wbg.__wbg_new_693216e109162396=function(){return _(new Error)},e.wbg.__wbg_stack_0ddaca5d1abfb52f=function(e,t){const n=m(p(t).stack,i.__wbindgen_export_0,i.__wbindgen_export_1),r=h;w()[e/4+1]=r,w()[e/4+0]=n},e.wbg.__wbg_error_09919627ac0992f5=function(e,t){try{console.error(u(e,t))}finally{i.__wbindgen_export_12(e,t)}},e.wbg.__wbindgen_is_undefined=function(e){return void 0===p(e)},e.wbg.__wbg_error_1a35d3879f286b52=function(e,t){var n=j(e,t).slice();i.__wbindgen_export_12(e,4*t),console.error(...n)},e.wbg.__wbg_newwithu8arraysequence_723043582a20ffe9=function(){return B((function(e){return _(new Blob(p(e)))}),arguments)},e.wbg.__wbg_newwithstrsequenceandoptions_40230de2ada4fb74=function(){return B((function(e,t){return _(new Blob(p(e),p(t)))}),arguments)},e.wbg.__wbg_write_0ce9f84c8d676428=function(e,t){return _(p(e).write(p(t)))},e.wbg.__wbg_length_032488e442c7a688=function(e){return p(e).length},e.wbg.__wbg_item_c261f03fea2e59e4=function(e,t){const n=p(e).item(t>>>0);return v(n)?0:_(n)},e.wbg.__wbg_length_a1cd1528ec8b00da=function(e){return p(e).length},e.wbg.__wbg_getPropertyValue_5ace8dabc30ab689=function(){return B((function(e,t,n,r){const o=m(p(t).getPropertyValue(u(n,r)),i.__wbindgen_export_0,i.__wbindgen_export_1),a=h;w()[e/4+1]=a,w()[e/4+0]=o}),arguments)},e.wbg.__wbg_item_d354bb0ab966554e=function(e,t,n){const r=m(p(t).item(n>>>0),i.__wbindgen_export_0,i.__wbindgen_export_1),o=h;w()[e/4+1]=o,w()[e/4+0]=r},e.wbg.__wbg_setProperty_e0774a610618c48e=function(){return B((function(e,t,n,r,o){p(e).setProperty(u(t,n),u(r,o))}),arguments)},e.wbg.__wbg_instanceof_CssStyleRule_d30b48b66f84c655=function(e){return p(e)instanceof CSSStyleRule},e.wbg.__wbg_selectorText_e85e34ce87a6a54d=function(e,t){const n=m(p(t).selectorText,i.__wbindgen_export_0,i.__wbindgen_export_1),r=h;w()[e/4+1]=r,w()[e/4+0]=n},e.wbg.__wbg_style_2110541292311f33=function(e){return _(p(e).style)},e.wbg.__wbg_cssRules_081ae3cae7bede26=function(){return B((function(e){return _(p(e).cssRules)}),arguments)},e.wbg.__wbg_new_95b5728d1d989202=function(){return B((function(e,t){return _(new CustomEvent(u(e,t)))}),arguments)},e.wbg.__wbg_newwitheventinitdict_03fa32d38a062ce7=function(){return B((function(e,t,n){return _(new CustomEvent(u(e,t),p(n)))}),arguments)},e.wbg.__wbg_setDragImage_7f3f4d8b13fdeb7b=function(e,t,n,r){p(e).setDragImage(p(t),n,r)},e.wbg.__wbg_readyState_1d2164d02510e41e=function(e,t){const n=m(p(t).readyState,i.__wbindgen_export_0,i.__wbindgen_export_1),r=h;w()[e/4+1]=r,w()[e/4+0]=n},e.wbg.__wbg_body_5e6efc7a3c1b65f3=function(e){const t=p(e).body;return v(t)?0:_(t)},e.wbg.__wbg_activeElement_db294ee130e32b8c=function(e){const t=p(e).activeElement;return v(t)?0:_(t)},e.wbg.__wbg_styleSheets_6213f6f06d38a925=function(e){return _(p(e).styleSheets)},e.wbg.__wbg_fonts_eb7bfd7a815f5b75=function(e){return _(p(e).fonts)},e.wbg.__wbg_createElement_28fc3740fb11defb=function(){return B((function(e,t,n){return _(p(e).createElement(u(t,n)))}),arguments)},e.wbg.__wbg_createElementNS_dd6cca2457c8c16c=function(){return B((function(e,t,n,r,o){return _(p(e).createElementNS(0===t?void 0:u(t,n),u(r,o)))}),arguments)},e.wbg.__wbg_createTextNode_2ab1e3ebc34e2641=function(e,t,n){return _(p(e).createTextNode(u(t,n)))},e.wbg.__wbg_width_67dae5c4bf46630b=function(e){return p(e).width},e.wbg.__wbg_height_7e6fdd733cb6456a=function(e){return p(e).height},e.wbg.__wbg_width_49b56947190779af=function(e){return p(e).width},e.wbg.__wbg_height_25b292914faba55a=function(e){return p(e).height},e.wbg.__wbg_top_fb523cecbe4ed028=function(e){return p(e).top},e.wbg.__wbg_left_f05715d9717867bb=function(e){return p(e).left},e.wbg.__wbg_get_7d6cf00d8eab20e4=function(e,t,n,r){const o=p(t)[u(n,r)];var a=v(o)?0:m(o,i.__wbindgen_export_0,i.__wbindgen_export_1),l=h;w()[e/4+1]=l,w()[e/4+0]=a},e.wbg.__wbg_set_dc0c7163c682288e=function(){return B((function(e,t,n,r,o){p(e)[u(t,n)]=u(r,o)}),arguments)},e.wbg.__wbg_delete_1a140bb7cab24482=function(e,t,n){delete p(e)[u(t,n)]},e.wbg.__wbg_add_a1fa1336c6b306df=function(){return B((function(e,t,n){p(e).add(u(t,n))}),arguments)},e.wbg.__wbg_remove_dce5eca3c9fcea70=function(){return B((function(e,t,n){p(e).remove(u(t,n))}),arguments)},e.wbg.__wbg_dataTransfer_6d2ad742f3aeb90b=function(e){const t=p(e).dataTransfer;return v(t)?0:_(t)},e.wbg.__wbg_instanceof_Element_1714e50f9bda1d15=function(e){return p(e)instanceof Element},e.wbg.__wbg_namespaceURI_b343a4afa454dd59=function(e,t){const n=p(t).namespaceURI;var r=v(n)?0:m(n,i.__wbindgen_export_0,i.__wbindgen_export_1),o=h;w()[e/4+1]=o,w()[e/4+0]=r},e.wbg.__wbg_tagName_0b399645f1a6af61=function(e,t){const n=m(p(t).tagName,i.__wbindgen_export_0,i.__wbindgen_export_1),r=h;w()[e/4+1]=r,w()[e/4+0]=n},e.wbg.__wbg_classList_965edecde8dc2a79=function(e){return _(p(e).classList)},e.wbg.__wbg_scrollTop_a76819f1eb4123f3=function(e){return p(e).scrollTop},e.wbg.__wbg_setscrollTop_68285fd41c0bfe1b=function(e,t){p(e).scrollTop=t},e.wbg.__wbg_scrollLeft_9a56a21aec5e6883=function(e){return p(e).scrollLeft},e.wbg.__wbg_setscrollLeft_a5292b9fd994a826=function(e,t){p(e).scrollLeft=t},e.wbg.__wbg_clientWidth_59d679e9a2f26aed=function(e){return p(e).clientWidth},e.wbg.__wbg_clientHeight_af8b9534d666597a=function(e){return p(e).clientHeight},e.wbg.__wbg_setinnerHTML_fe7eeed1b320a302=function(e,t,n){p(e).innerHTML=u(t,n)},e.wbg.__wbg_children_24719c7bfdf8fff0=function(e){return _(p(e).children)},e.wbg.__wbg_attachShadow_bb2b906fc106677a=function(){return B((function(e,t){return _(p(e).attachShadow(p(t)))}),arguments)},e.wbg.__wbg_getAttribute_4c623ae097fca4b4=function(e,t,n,r){const o=p(t).getAttribute(u(n,r));var a=v(o)?0:m(o,i.__wbindgen_export_0,i.__wbindgen_export_1),l=h;w()[e/4+1]=l,w()[e/4+0]=a},e.wbg.__wbg_getBoundingClientRect_a008242eae1b5be0=function(e){return _(p(e).getBoundingClientRect())},e.wbg.__wbg_hasAttribute_6cecf65a60b14887=function(e,t,n){return p(e).hasAttribute(u(t,n))},e.wbg.__wbg_matches_1a9fa714a2476700=function(){return B((function(e,t,n){return p(e).matches(u(t,n))}),arguments)},e.wbg.__wbg_removeAttribute_2d6e56b2f03aa57e=function(){return B((function(e,t,n){p(e).removeAttribute(u(t,n))}),arguments)},e.wbg.__wbg_setAttribute_8cfc462c0dedd03b=function(){return B((function(e,t,n,r,o){p(e).setAttribute(u(t,n),u(r,o))}),arguments)},e.wbg.__wbg_toggleAttribute_f0b5673bf5a31b78=function(){return B((function(e,t,n,r){return p(e).toggleAttribute(u(t,n),0!==r)}),arguments)},e.wbg.__wbg_target_68a5c10e2732a79e=function(e){const t=p(e).target;return v(t)?0:_(t)},e.wbg.__wbg_bubbles_4c447a2896325d98=function(e){return p(e).bubbles},e.wbg.__wbg_cancelBubble_aa216b328c490cb1=function(e){return p(e).cancelBubble},e.wbg.__wbg_composedPath_793a5ba0341c9563=function(e){return _(p(e).composedPath())},e.wbg.__wbg_preventDefault_b4d36c8196fbe491=function(e){p(e).preventDefault()},e.wbg.__wbg_stopPropagation_69631ec1e1f6375b=function(e){p(e).stopPropagation()},e.wbg.__wbg_addEventListener_b2c53f6c8c23bac8=function(){return B((function(e,t,n,r){p(e).addEventListener(u(t,n),p(r))}),arguments)},e.wbg.__wbg_addEventListener_ec92ea1297eefdfc=function(){return B((function(e,t,n,r,o){p(e).addEventListener(u(t,n),p(r),p(o))}),arguments)},e.wbg.__wbg_dispatchEvent_4bb3a5239d046f0e=function(){return B((function(e,t){return p(e).dispatchEvent(p(t))}),arguments)},e.wbg.__wbg_removeEventListener_f9b9f76b2053cf11=function(){return B((function(e,t,n,r){p(e).removeEventListener(u(t,n),p(r))}),arguments)},e.wbg.__wbg_instanceof_FontFace_9336a741c03977fe=function(e){return p(e)instanceof FontFace},e.wbg.__wbg_family_e13f9193eeba8cbb=function(e,t){const n=m(p(t).family,i.__wbindgen_export_0,i.__wbindgen_export_1),r=h;w()[e/4+1]=r,w()[e/4+0]=n},e.wbg.__wbg_weight_af21dbee0f96826e=function(e,t){const n=m(p(t).weight,i.__wbindgen_export_0,i.__wbindgen_export_1),r=h;w()[e/4+1]=r,w()[e/4+0]=n},e.wbg.__wbg_loaded_7701a695e974bca6=function(){return B((function(e){return _(p(e).loaded)}),arguments)},e.wbg.__wbg_values_7340e4084efeeabc=function(e){return _(p(e).values())},e.wbg.__wbg_next_25f0d8f117b655a6=function(){return B((function(e){return _(p(e).next())}),arguments)},e.wbg.__wbg_item_4175e9d985466d3c=function(e,t){const n=p(e).item(t>>>0);return v(n)?0:_(n)},e.wbg.__wbg_scrollTop_3654530920b016f7=function(e){return p(e).scrollTop},e.wbg.__wbg_setscrollTop_411ca294e28067a0=function(e,t){p(e).scrollTop=t},e.wbg.__wbg_dataset_e66cc711d9f51800=function(e){return _(p(e).dataset)},e.wbg.__wbg_style_365767989176e8d2=function(e){return _(p(e).style)},e.wbg.__wbg_offsetParent_9e1b25ca9756007a=function(e){const t=p(e).offsetParent;return v(t)?0:_(t)},e.wbg.__wbg_offsetWidth_66ecd3281b309d08=function(e){return p(e).offsetWidth},e.wbg.__wbg_offsetHeight_2d6d7c95cc5815d3=function(e){return p(e).offsetHeight},e.wbg.__wbg_blur_3d909bbeac9a005f=function(){return B((function(e){p(e).blur()}),arguments)},e.wbg.__wbg_click_48a3ccbed9faabd9=function(e){p(e).click()},e.wbg.__wbg_focus_66bb7c767837cd51=function(){return B((function(e){p(e).focus()}),arguments)},e.wbg.__wbg_checked_5b4bb12a26c07690=function(e){return p(e).checked},e.wbg.__wbg_setchecked_a450b330df6b3fa5=function(e,t){p(e).checked=0!==t},e.wbg.__wbg_value_30770021ca38e0db=function(e,t){const n=m(p(t).value,i.__wbindgen_export_0,i.__wbindgen_export_1),r=h;w()[e/4+1]=r,w()[e/4+0]=n},e.wbg.__wbg_setvalue_7b7950dacc5eb607=function(e,t,n){p(e).value=u(t,n)},e.wbg.__wbg_selectedIndex_b744e8ce263fb1a2=function(e){return p(e).selectedIndex},e.wbg.__wbg_setvalue_a4ecd21840fd1167=function(e,t,n){p(e).value=u(t,n)},e.wbg.__wbg_value_eb32f706ae6bfab2=function(e,t){const n=m(p(t).value,i.__wbindgen_export_0,i.__wbindgen_export_1),r=h;w()[e/4+1]=r,w()[e/4+0]=n},e.wbg.__wbg_setvalue_3dd349be116107ce=function(e,t,n){p(e).value=u(t,n)},e.wbg.__wbg_setselectionStart_ba69cd67beb49dc9=function(){return B((function(e,t,n){p(e).selectionStart=0===t?void 0:n>>>0}),arguments)},e.wbg.__wbg_selectionEnd_2803d57666d56ca8=function(){return B((function(e,t){const n=p(t).selectionEnd;w()[e/4+1]=v(n)?0:n,w()[e/4+0]=!v(n)}),arguments)},e.wbg.__wbg_setselectionEnd_39598a40c598bc2a=function(){return B((function(e,t,n){p(e).selectionEnd=0===t?void 0:n>>>0}),arguments)},e.wbg.__wbg_keyCode_3075e448a1211124=function(e){return p(e).keyCode},e.wbg.__wbg_shiftKey_f0821ad63ff4a752=function(e){return p(e).shiftKey},e.wbg.__wbg_clientX_e24ae62c30359a79=function(e){return p(e).clientX},e.wbg.__wbg_clientY_623ec4c13b3d821e=function(e){return p(e).clientY},e.wbg.__wbg_shiftKey_ca83eebd8c6225ef=function(e){return p(e).shiftKey},e.wbg.__wbg_relatedTarget_e5e788085b2deaf9=function(e){const t=p(e).relatedTarget;return v(t)?0:_(t)},e.wbg.__wbg_clipboard_93d4e0e30f1d73a2=function(e){const t=p(e).clipboard;return v(t)?0:_(t)},e.wbg.__wbg_isConnected_5a20495ebd19de06=function(e){return p(e).isConnected},e.wbg.__wbg_parentNode_3b6e136ccacf1d02=function(e){const t=p(e).parentNode;return v(t)?0:_(t)},e.wbg.__wbg_parentElement_14138ef2ff0b9c88=function(e){const t=p(e).parentElement;return v(t)?0:_(t)},e.wbg.__wbg_lastChild_2d1fa5efd0e0edcc=function(e){const t=p(e).lastChild;return v(t)?0:_(t)},e.wbg.__wbg_nextSibling_42ec4dd7469413eb=function(e){const t=p(e).nextSibling;return v(t)?0:_(t)},e.wbg.__wbg_setnodeValue_59d46f408f89fd0b=function(e,t,n){p(e).nodeValue=0===t?void 0:u(t,n)},e.wbg.__wbg_settextContent_8db6b500abb6e3ae=function(e,t,n){p(e).textContent=0===t?void 0:u(t,n)},e.wbg.__wbg_appendChild_d21bac021b5bbfde=function(){return B((function(e,t){return _(p(e).appendChild(p(t)))}),arguments)},e.wbg.__wbg_contains_a24a52ef28c14185=function(e,t){return p(e).contains(p(t))},e.wbg.__wbg_getRootNode_ee4b9653e98167ad=function(e){return _(p(e).getRootNode())},e.wbg.__wbg_insertBefore_26dfd5eb687a3438=function(){return B((function(e,t,n){return _(p(e).insertBefore(p(t),p(n)))}),arguments)},e.wbg.__wbg_removeChild_94b0c126b878241b=function(){return B((function(e,t){return _(p(e).removeChild(p(t)))}),arguments)},e.wbg.__wbg_now_c2563c77371d3ec4=function(e){return p(e).now()},e.wbg.__wbg_instanceof_ShadowRoot_7e8367d01bc05154=function(e){return p(e)instanceof ShadowRoot},e.wbg.__wbg_host_97c82501d6b5e57a=function(e){return _(p(e).host)},e.wbg.__wbg_length_572042363bd3d323=function(e){return p(e).length},e.wbg.__wbg_item_029e7e5ae941b43b=function(e,t){const n=p(e).item(t>>>0);return v(n)?0:_(n)},e.wbg.__wbg_createObjectURL_7ae06eedcd39cc97=function(){return B((function(e,t){const n=m(URL.createObjectURL(p(t)),i.__wbindgen_export_0,i.__wbindgen_export_1),r=h;w()[e/4+1]=r,w()[e/4+0]=n}),arguments)},e.wbg.__wbg_instanceof_Window_42f092928baaee84=function(e){return p(e)instanceof Window},e.wbg.__wbg_document_15b2e504fb1556d6=function(e){const t=p(e).document;return v(t)?0:_(t)},e.wbg.__wbg_navigator_9be277c167dac7dc=function(e){return _(p(e).navigator)},e.wbg.__wbg_innerWidth_df94b449bdf6c6fa=function(){return B((function(e){return _(p(e).innerWidth)}),arguments)},e.wbg.__wbg_innerHeight_c92e987f726e49cd=function(){return B((function(e){return _(p(e).innerHeight)}),arguments)},e.wbg.__wbg_performance_6a3706d0a3ba1118=function(e){const t=p(e).performance;return v(t)?0:_(t)},e.wbg.__wbg_getComputedStyle_3ce0d68f979880e1=function(){return B((function(e,t){const n=p(e).getComputedStyle(p(t));return v(n)?0:_(n)}),arguments)},e.wbg.__wbg_requestAnimationFrame_9e5ccef32fec2b99=function(){return B((function(e,t){return p(e).requestAnimationFrame(p(t))}),arguments)},e.wbg.__wbg_setTimeout_b9c1670391a219b8=function(){return B((function(e,t,n){return p(e).setTimeout(p(t),n)}),arguments)},e.wbg.__wbg_error_800b8d466653f7ea=function(e){console.error(p(e))},e.wbg.__wbg_error_8ee71a06f46f3a28=function(e,t,n){console.error(p(e),p(t),p(n))},e.wbg.__wbg_warn_ee027638ccb24e00=function(e){console.warn(p(e))},e.wbg.__wbg_self_fd00a1ef86d1b2ed=function(){return B((function(){return _(self.self)}),arguments)},e.wbg.__wbg_window_6f6e346d8bbd61d7=function(){return B((function(){return _(window.window)}),arguments)},e.wbg.__wbg_globalThis_3348936ac49df00a=function(){return B((function(){return _(globalThis.globalThis)}),arguments)},e.wbg.__wbg_global_67175caf56f55ca9=function(){return B((function(){return _(n.g.global)}),arguments)},e.wbg.__wbg_newnoargs_971e9a5abe185139=function(e,t){return _(new Function(u(e,t)))},e.wbg.__wbg_new_ee1a3da85465d621=function(){return _(new Array)},e.wbg.__wbg_new_e6a9fecc2bf26696=function(){return _(new Object)},e.wbg.__wbg_new_88a96ed5f419f19b=function(e,t){return _(new Intl.DateTimeFormat(p(e),p(t)))},e.wbg.__wbg_get_ad41fee29b7e0f53=function(e,t){return _(p(e)[t>>>0])},e.wbg.__wbg_from_94cd4a66487bd7a5=function(e){return _(Array.from(p(e)))},e.wbg.__wbg_length_a73bfd4c96dd97ef=function(e){return p(e).length},e.wbg.__wbg_push_0bc7fce4a139a883=function(e,t){return p(e).push(p(t))},e.wbg.__wbg_instanceof_ArrayBuffer_02bbeeb60438c785=function(e){return p(e)instanceof ArrayBuffer},e.wbg.__wbg_slice_a921e949c85fc5a3=function(e,t,n){return _(p(e).slice(t>>>0,n>>>0))},e.wbg.__wbg_instanceof_Error_2082612c1902c887=function(e){return p(e)instanceof Error},e.wbg.__wbg_message_924b46658b69b295=function(e){return _(p(e).message)},e.wbg.__wbg_call_33d7bcddbbfa394a=function(){return B((function(e,t){return _(p(e).call(p(t)))}),arguments)},e.wbg.__wbg_call_65af9f665ab6ade5=function(){return B((function(e,t,n){return _(p(e).call(p(t),p(n)))}),arguments)},e.wbg.__wbg_getTimezoneOffset_8a39b51acb4f52c9=function(e){return p(e).getTimezoneOffset()},e.wbg.__wbg_new_54cbca578174a105=function(e){return _(new Date(p(e)))},e.wbg.__wbg_is_43eb2f9708e964a9=function(e,t){return Object.is(p(e),p(t))},e.wbg.__wbg_keys_71a760ca987f8933=function(e){return _(Object.keys(p(e)))},e.wbg.__wbg_get_72332cd2bc57924c=function(){return B((function(e,t){return _(Reflect.get(p(e),p(t)))}),arguments)},e.wbg.__wbg_has_3be27932089d278e=function(){return B((function(e,t){return Reflect.has(p(e),p(t))}),arguments)},e.wbg.__wbg_set_2762e698c2f5b7e0=function(){return B((function(e,t,n){return Reflect.set(p(e),p(t),p(n))}),arguments)},e.wbg.__wbg_buffer_34f5ec9f8a838ba0=function(e){return _(p(e).buffer)},e.wbg.__wbg_stringify_d8d1ee75d5b55ce4=function(){return B((function(e){return _(JSON.stringify(p(e)))}),arguments)},e.wbg.__wbg_resolvedOptions_6c054c857dcd3a5f=function(e){return _(p(e).resolvedOptions())},e.wbg.__wbg_instanceof_Promise_9dc2c04fc1d8c0c6=function(e){return p(e)instanceof Promise},e.wbg.__wbg_new_52205195aa880fc2=function(e,t){try{var n={a:e,b:t};const r=new Promise(((e,t)=>{const r=n.a;n.a=0;try{return function(e,t,n,r){i.__wbindgen_export_14(e,t,_(n),_(r))}(r,n.b,e,t)}finally{n.a=r}}));return _(r)}finally{n.a=n.b=0}},e.wbg.__wbg_resolve_0107b3a501450ba0=function(e){return _(Promise.resolve(p(e)))},e.wbg.__wbg_then_18da6e5453572fc8=function(e,t){return _(p(e).then(p(t)))},e.wbg.__wbg_then_e5489f796341454b=function(e,t,n){return _(p(e).then(p(t),p(n)))},e.wbg.__wbg_newwithbyteoffsetandlength_88fdad741db1b182=function(e,t,n){return _(new Uint8Array(p(e),t>>>0,n>>>0))},e.wbg.__wbg_new_cda198d9dbc6d7ea=function(e){return _(new Uint8Array(p(e)))},e.wbg.__wbg_buffer_82a7641831277fcf=function(e){return _(p(e).buffer)},e.wbg.__wbg_length_51f19f73d6d9eff3=function(e){return p(e).length},e.wbg.__wbg_byteLength_ddb215ba7b4484fd=function(e){return p(e).byteLength},e.wbg.__wbg_byteOffset_14de023b9dde976b=function(e){return p(e).byteOffset},e.wbg.__wbg_set_1a930cfcda1a8067=function(e,t,n){p(e).set(p(t),n>>>0)},e.wbg.__wbindgen_throw=function(e,t){throw new Error(u(e,t))},e.wbg.__wbindgen_memory=function(){return _(i.memory)},e.wbg.__wbindgen_closure_wrapper3200=function(e,t,n){return _(A(e,t,34,C))},e.wbg.__wbindgen_closure_wrapper3202=function(e,t,n){return _(E(e,t,34,V))},e.wbg.__wbindgen_closure_wrapper3204=function(e,t,n){return _(A(e,t,34,P))},e.wbg.__wbindgen_closure_wrapper3206=function(e,t,n){return _(A(e,t,34,N))},e.wbg.__wbindgen_closure_wrapper3208=function(e,t,n){return _(E(e,t,40,L))},e.wbg.__wbindgen_closure_wrapper3210=function(e,t,n){return _(A(e,t,34,N))},e.wbg.__wbindgen_closure_wrapper3212=function(e,t,n){return _(E(e,t,34,T))},e.wbg.__wbindgen_closure_wrapper9326=function(e,t,n){return _(E(e,t,2097,M))},e.wbg.__wbindgen_closure_wrapper9357=function(e,t,n){return _(E(e,t,2103,O))},e.wbg.__wbindgen_closure_wrapper9424=function(e,t,n){return _(E(e,t,2120,z))},e}function ne(e,t){return i=e.exports,oe.__wbindgen_wasm_module=t,x=new Float64Array,y=new Int32Array,D=new Uint32Array,s=new Uint8Array,i}function re(e){const t=te(),n=new WebAssembly.Module(e);return ne(new WebAssembly.Instance(n,t),n)}async function oe(e){void 0===e&&(e=new URL(n(503),n.b));const t=te();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:o}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return ne(r,o)}var ae=oe,ie=n(6782),le=n(503),se=class extends HTMLElement{constructor(){super()}get name(){return"Debug"}get select_mode(){return"select"}get min_config_columns(){}get config_column_names(){}get priority(){return 0}async update(e){return this.draw(e)}async draw(e){this.style.backgroundColor="#fff";let t=await e.to_csv();this.innerHTML=`<pre style='margin:0;overflow:scroll;position:absolute;width:100%;height:100%'>${t}</pre>`}async clear(){this.innerHTML=""}async resize(){}async restyle(){}async save(){}async restore(){}async delete(){}};function ce(e,t){return function(n,r){let o=0;for(let a of t)if(a in n){if(o++>0)throw new Error(`Duplicate "${e}" fields`);n[e]=n[a],a!==e&&(delete n[a],r.warn&&console.warn(`Deprecated perspective attribute "${a}" renamed "${e}"`))}return n}}document.createElement("perspective-viewer-plugin").constructor===HTMLElement&&window.customElements.define("perspective-viewer-plugin",se);ce("group_by",["group_by","row_pivots","row-pivot","row-pivots","row_pivot"]),ce("split_by",["split_by","column_pivots","column-pivot","column-pivots","column_pivot","col_pivots","col-pivot","col-pivots","col_pivot"]),ce("filter",["filter","filters"]);function ue(e){return 559903==new Uint32Array(e.slice(0,4))[0]}window.addEventListener("unhandledrejection",(e=>{"View method cancelled"===e.reason?.message&&e.preventDefault()}));var de=async function(){let e=await le,t=[],n=0,o=new ie.Q1((e=>{e&&(n+=e.byteLength,t.push(e))}));if(e instanceof URL||"string"==typeof e){let r=(await fetch(e.toString())).body?.getReader(),a=0;if(void 0!==r)for(;;){let{value:e,done:i}=await r.read();if(i||void 0===e)break;0===a&&ue(e?.buffer)||1===a?(a=1,o.push(e,i)):(a=2,n+=e.byteLength,t.push(e))}}else if(e instanceof Uint8Array)ue(e.buffer)?o.push(e,!0):(n=e.byteLength,t=[e]);else{let r=new Uint8Array(e);ue(e)?o.push(r,!0):(n=r.byteLength,t=[r])}let a=0,i=new Uint8Array(n);for(let r of t)i.set(r,a),a+=r.byteLength;return await ae(i),F(),r}(),ge=class extends HTMLElement{constructor(){super(),this.__load_wasm()}async __load_wasm(){await de,void 0===this._instance&&(this._instance=new ee(this))}},_e=ee.prototype,pe=Object.getOwnPropertyNames(_e);for(let he of pe)Object.defineProperty(ge.prototype,he,{value:async function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return await this.__load_wasm(),await this._instance[he].call(this._instance,...t)}});for(let he of["registerPlugin","getExprTKCommands"])Object.defineProperty(ge,he,{value:async function(){let e=await de;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e[he].call(e,...n)}});customElements.define("perspective-viewer",ge)},6736:function(e,t,n){"use strict";function r(e,t){let{warn:n=!0,replace_defaults:r=!1}=void 0===t?{}:t;if("object"!=typeof e||e instanceof ArrayBuffer)return e;{const t=JSON.parse(JSON.stringify(e));return"viewers"in t&&"detail"in t?function(e,t){for(const n in e.viewers)e.viewers[n]=o(e.viewers[n],!0,t),"master"in e.viewers[n]||(e.viewers[n].master=!1,t.warn&&console.warn('Deprecated perspective missing attribute "master" set to default')),"linked"in e.viewers[n]||(e.viewers[n].linked=!1,t.warn&&console.warn('Deprecated perspective missing attribute "linked" set to default'));return e}(t,{warn:n,replace_defaults:r}):o(t,!1,{warn:n,replace_defaults:r})}}function o(e,t,n){return function(e,t,n){for(const r of t)e=r(e,n);return e}(e,[l,s,c,d,!!n.replace_defaults&&a,g,_,t?h:p].filter((e=>!!e)),n)}function a(e,t){for(const n of["group_by","split_by","filter","sort"])null===e[n]&&(e[n]=[],t.warn&&console.warn(`Deprecated perspective missing attribute "${n}" set to default"`)),"aggregates"in e&&null===e.aggregates&&(e.aggregates={},t.warn&&console.warn('Deprecated perspective missing attribute "aggregates" set to default"'));return e}function i(e,t){return function(n,r){let o=0;for(const a of t)if(a in n){if(o++>0)throw new Error(`Duplicate "${e}" fields`);n[e]=n[a],a!==e&&(delete n[a],r.warn&&console.warn(`Deprecated perspective attribute "${a}" renamed "${e}"`))}return n}}n.r(t),n.d(t,{convert:function(){return r}});const l=i("group_by",["group_by","row_pivots","row-pivot","row-pivots","row_pivot"]),s=i("split_by",["split_by","column_pivots","column-pivot","column-pivots","column_pivot","col_pivots","col-pivot","col-pivots","col_pivot"]),c=i("filter",["filter","filters"]);function u(e,t,n,r,o){if(e.test(n)){const a=n.replace(e,t);o.warn&&console.warn(`Deprecated perspective "expression" attribute value "${n}" updated to "${a}"`);for(const e of["group_by","split_by"])if(e in r)for(const t in r[e]){r[e][t]===n.replace(/"/g,"")&&(r[e][t]=a,o.warn&&console.warn(`Deprecated perspective expression in "${e}" attribute "${n}" replaced with "${a}"`))}for(const e of r.filter||[])e[0]===n.replace(/"/g,"")&&(e[0]=a,o.warn&&console.warn(`Deprecated perspective expression in "filter" attribute "${n}" replaced with "${a}"`));for(const e of r.sort||[])e[0]===n.replace(/"/g,"")&&(e[0]=a,o.warn&&console.warn(`Deprecated perspective expression in "sort" attribute "${n}" replaced with "${a}"`));return a}return n}function d(e,t){if(e["computed-columns"]){if("expressions"in e)throw new Error('Duplicate "expressions" and "computed-columns');e.expressions=e["computed-columns"],delete e["computed-columns"],t.warn&&console.warn('Deprecated perspective attribute "computed-columns" renamed "expressions"');const n=[[/^year_bucket\("(.+?)"\)/,"bucket(\"$1\", 'y')"],[/^month_bucket\("(.+?)"\)/,"bucket(\"$1\", 'M')"],[/^day_bucket\("(.+?)"\)/,"bucket(\"$1\", 'd')"],[/^hour_bucket\("(.+?)"\)/,"bucket(\"$1\", 'h')"],[/^minute_bucket\("(.+?)"\)/,"bucket(\"$1\", 'm')"],[/^second_bucket\("(.+?)"\)/,"bucket(\"$1\", 's')"]];for(const r in e.expressions){let o=e.expressions[r];for(const[r,a]of n)o=u(r,a,o,e,t);e.expressions[r]=o}}return e}function g(e,t){const n={datagrid:"Datagrid",Datagrid:"Datagrid",d3_y_area:"Y Area","Y Area":"Y Area",d3_y_line:"Y Line","Y Line":"Y Line",d3_xy_line:"X/Y Line","X/Y Line":"X/Y Line",d3_y_scatter:"Y Scatter","Y Scatter":"Y Scatter",d3_xy_scatter:"X/Y Scatter","X/Y Scatter":"X/Y Scatter",d3_x_bar:"X Bar","X Bar":"X Bar",d3_y_bar:"Y Bar","Y Bar":"Y Bar",d3_heatmap:"Heatmap",Heatmap:"Heatmap",d3_treemap:"Treemap",Treemap:"Treemap",d3_sunburst:"Sunburst",Sunburst:"Sunburst"};return"plugin"in e&&e.plugin!==n[e.plugin]&&(e.plugin=n[e.plugin],t.warn&&console.warn(`Deprecated perspective "plugin" attribute value "${e.plugin}" updated to "${n[e.plugin]}"`)),e}function _(e,t){if("Datagrid"===e.plugin&&e.plugin_config){if(!e.plugin_config.columns){t.warn&&console.warn('Deprecated perspective attribute "plugin_config" moved to "plugin_config.columns"');const n={};for(const r of Object.keys(e.plugin_config)){const o=e.plugin_config[r];delete e.plugin_config[r],"string"==typeof o.color_mode&&("foreground"===o.color_mode?o.number_fg_mode="color":"bar"===o.color_mode?o.number_fg_mode="bar":"background"===o.color_mode?o.number_bg_mode="color":"gradient"===o.color_mode?o.number_bg_mode="gradient":console.warn(`Unknown color_mode ${o.color_mode}`),delete o.color_mode,t.warn&&console.warn('Deprecated perspective attribute "color_mode" renamed "number_bg_mode"')),n[r]=o}e.plugin_config.columns=n,t.replace_defaults&&(e.plugin_config.editable=!1,e.plugin_config.scroll_lock=!0)}for(const n of Object.keys(e.plugin_config.columns)){const r=e.plugin_config.columns[n];"string"==typeof r.number_color_mode&&("foreground"===r.number_color_mode?r.number_fg_mode="color":"bar"===r.number_color_mode?r.number_fg_mode="bar":"background"===r.number_color_mode?r.number_bg_mode="color":"gradient"===r.number_color_mode&&(r.number_bg_mode="gradient"),delete r.number_color_mode,t.warn&&console.warn('Deprecated perspective attribute "number_color_mode" renamed "number_bg_mode"')),void 0!==r.gradient&&("gradient"===r.number_bg_mode?r.bg_gradient=r.gradient:"bar"===r.number_fg_mode&&(r.fg_gradient=r.gradient),delete r.gradient,t.warn&&console.warn('Deprecated perspective attribute "gradient" renamed "bg_gradient"')),void 0!==r.pos_color&&(void 0!==r.number_bg_mode?r.pos_bg_color=r.pos_color:void 0!==r.number_fg_mode&&(r.pos_fg_color=r.pos_color),delete r.pos_color,t.warn&&console.warn('Deprecated perspective attribute "pos_color" renamed "pos_bg_color"')),void 0!==r.neg_color&&(void 0!==r.number_bg_mode?r.neg_bg_color=r.neg_color:void 0!==r.number_fg_mode&&(r.neg_fg_color=r.neg_color),delete r.neg_color,t.warn&&console.warn('Deprecated perspective attribute "neg_color" renamed "neg_bg_color"'))}}return e}function p(e,t){const n=["editable","selectable","name","table","master","linked"];for(const r of n)r in e&&(delete e[r],t.warn&&console.warn(`Deprecated perspective attribute "${r}" removed`));return e}function h(e,t){const n=["editable","selectable","name","table","master","linked"];for(const r of n)r in e&&null===e[r]&&(delete e[r],t.warn&&console.warn(`Deprecated perspective attribute "${r}" removed`));return e}},6010:function(e,t,n){"use strict";function r(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}function o(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}n.d(t,{Z:function(){return o}})},503:function(e,t,n){"use strict";e.exports=n.p+"35290f10932dec39.wasm"}}]);